<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÁôæÂàÜÁôæ‰∏≠Â•ñ - ÊäΩÂ•ñËµ¢Â•ΩÁ§º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'ÂæÆËΩØÈõÖÈªë', sans-serif;
            background: url('https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/ee9cdd35-1a1b-4654-841b-fda1f4d56e26/bg.png') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            position: relative;
        }

        /* Èü≥ÊïàÊéßÂà∂ÊåâÈíÆÊ†∑Âºè */
        .sound-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-size: 1.5rem;
        }
        
        .sound-control:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }
        
        .sound-control.muted {
            opacity: 0.5;
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* ËÉåÊôØË£ÖÈ•∞ÊïàÊûú - Â∑≤ÁßªÈô§Ôºå‰ΩøÁî®Êñ∞ÁöÑËÉåÊôØÂõæÁâá */

        /* È°∂ÈÉ®Âå∫Âüü */
        .header {
            text-align: center;
            padding: 20px 15px 30px;
            position: relative;
        }

        .main-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: white;
            margin-bottom: 20px;
            opacity: 0.9;
        }



        /* Â§¥ÈÉ®Ê†áÈ¢òÂõæÁâá */
        .header-title-img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            max-height: 120px;
            width: auto;
        }

        /* Ê∏∏ÊàèÊú∫‰∏ª‰Ωì */
        .game-machine {
            background: url('https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/e9dae13a-12ec-42a4-b566-93db19c0354b/yxj.png') no-repeat center center;
            background-size: 100% 100%;
            margin: 0 15px 30px;
            border-radius: 25px;
            padding: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            min-height: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Áî®Êà∑‰ø°ÊÅØÊ†è - Âõ∫ÂÆöÂú®ÂõæÁâáÈ°∂ÈÉ®Âå∫Âüü */
        .user-info-bar {
            position: absolute;
            top: 5%;           /* Ë∑ùÁ¶ªÈ°∂ÈÉ®8% */
            left: 17%;         /* Ë∑ùÁ¶ªÂ∑¶‰æß15% */
            width: 70%;        /* ÂÆΩÂ∫¶Âç†70% */
            padding: 8px 15px;
            justify-content: center;
            display: flex;
            align-items: center;
            z-index: 10;
        }

        /* ÂàáÊç¢ÂÆπÂô® */
        .scroll-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Áî®Êà∑‰ø°ÊÅØÈ°π */
        .user-info-item {
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.5s ease;
            position: relative;
            width: 100%;
            height: 100%;
            justify-content: center;
        }

        .user-info-item.active {
            opacity: 1;
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #ffd700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #333;
        }

        .user-status {
            color: white;
            font-size: 0.9rem;
            flex: 1;
        }

        /* ‰∏ªÂ±èÂπïÂå∫Âüü - Âõ∫ÂÆöÂú®ÂõæÁâá‰∏≠Â§ÆÂå∫Âüü */
        .main-screen {
            position: absolute;
            top: 16%;
            left: 5%;
            width: 90%;
            height: 50%;
            /* background: transparent; */
            border-radius: 15px;
        }

        /* Â•ñÂìÅÁΩëÊ†º */
        .prize-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 3vw;
            margin-bottom: 5vw;
            width: 100%;
            max-width: 90%;
        }

        .prize-item {
            background: #fff5f5;
            border-radius: 4vw;
            padding: 4vw 2vw;
            text-align: center;
            box-shadow: 0 1vw 3vw rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .prize-item:hover {
            transform: translateY(-0.5vw);
            box-shadow: 0 1.5vw 4vw rgba(0,0,0,0.15);
        }

        .prize-icon {
            font-size: 5vw;
            margin-bottom: 2vw;
            display: block;
        }

        .prize-name {
            font-size: 2.5vw;
            color: #333;
            font-weight: 600;
        }

        /* ‰∏≠Â§ÆÊäΩÂ•ñÊåâÈíÆ */
        .draw-button {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border: none;
            border-radius: 5vw;
            padding: 5vw;
            font-size: 3.5vw;
            font-weight: bold;
            color: #ff4757;
            cursor: pointer;
            box-shadow: 0 1.5vw 5vw rgba(255, 215, 0, 0.4);
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 5vw;
        }

        .draw-button:hover {
            transform: translateY(-0.8vw);
            box-shadow: 0 2vw 6vw rgba(255, 215, 0, 0.6);
        }

        .draw-button:active {
            transform: translateY(-0.3vw);
        }

        /* ÊäΩÂ•ñÊåâÈíÆÂå∫Âüü - Âõ∫ÂÆöÂú®ÂõæÁâáÂ∫ïÈÉ®Âå∫Âüü */
        .draw-buttons {
            position: absolute;
            bottom: 30%;       /* Ë∑ùÁ¶ªÂ∫ïÈÉ®15% */
            left: 20%;         /* Ë∑ùÁ¶ªÂ∑¶‰æß20% */
            width: 60%;        /* ÂÆΩÂ∫¶Âç†60% */
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-shrink: 0;
            padding: 20px 0;
            z-index: 10;
        }

        /* ÊäΩÂ•ñÂå∫ÂüüloadingÁä∂ÊÄÅÊ†∑Âºè */
        .draw-cards.loading {
            position: relative;
            pointer-events: none;
        }
        .draw-cards.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            width: 60px;
            height: 60px;
            margin: auto;
            transform: translateY(-50%);
            border: 5px solid transparent;
            border-top: 5px solid #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 1000;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.4);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ÊäΩÂ•ñÂç°ÁâáÂå∫ÂüüloadingÁä∂ÊÄÅ */
        .draw-cards.loading .draw-placeholder {
            opacity: 0.3;
        }

        /* PCÁ´ØÊèêÁ§∫È°µÈù¢ */
        @media screen and (min-width: 768px) {
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                margin: 0;
                padding: 0;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: 'Microsoft YaHei', Arial, sans-serif;
            }
            
            .mobile-container {
                display: none;
            }
            
            .pc-tip {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                color: white;
                padding: 50px 40px;
                max-width: 600px;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
                border-radius: 30px;
                backdrop-filter: blur(20px);
                border: 2px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
                position: relative;
                overflow: hidden;
            }
            
            .pc-tip::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
                animation: shine 3s ease-in-out infinite;
                pointer-events: none;
            }
            
            .pc-tip-icon {
                font-size: 5rem;
                margin-bottom: 25px;
                animation: bounce 2s infinite;
                filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            }
            
            .pc-tip-title {
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 20px;
                text-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
                background: linear-gradient(135deg, #fff, #f0f0f0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .pc-tip-text {
                font-size: 1.2rem;
                line-height: 1.8;
                margin-bottom: 30px;
                opacity: 0.95;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            }
            
            .pc-tip-qrcode {
                margin: 25px 0;
                padding: 20px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
            }
            
            .pc-tip-qrcode img {
                width: 180px;
                height: 180px;
                border-radius: 10px;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
                border: 3px solid rgba(255, 255, 255, 0.3);
            }
            
            .pc-tip-qrcode-text {
                margin-top: 15px;
                font-size: 1rem;
                color: #e0e0e0;
                font-weight: 500;
            }
            
            .pc-tip-btn {
                padding: 18px 40px;
                background: linear-gradient(135deg, #ff6b6b, #ee5a24);
                color: white;
                border: none;
                border-radius: 15px;
                font-size: 1.2rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(238, 90, 36, 0.4);
                text-decoration: none;
                display: inline-block;
                position: relative;
                overflow: hidden;
            }
            
            .pc-tip-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                transition: left 0.5s;
            }
            
            .pc-tip-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 12px 30px rgba(238, 90, 36, 0.6);
            }
            
            .pc-tip-btn:hover::before {
                left: 100%;
            }
            
            @keyframes shine {
                0%, 100% { transform: translateX(-100%); }
                50% { transform: translateX(100%); }
            }
            
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% {
                    transform: translateY(0);
                }
                40% {
                    transform: translateY(-10px);
                }
                60% {
                    transform: translateY(-5px);
                }
            }
        }



            /* PCÁ´ØÊäΩÂ•ñÊåâÈíÆÂå∫Âüü */
            .draw-buttons {
                bottom: 30%;
                left: 20%;
                width: 60%;
                gap: 15px;
                padding: 15px 0;
            }

            /* PCÁ´ØÊäΩÂ•ñËµÑÊ†ºÊòæÁ§∫ */
            .draw-qualification {
                bottom: 4%;
                left: 20%;
                width: 60%;
                font-size: 0.8rem;
            }

            /* PCÁ´ØÊéßÂà∂Âå∫Âüü */
            .controls {
                bottom: 15%;
                right: 8%;
                width: 25%;
            }

            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
                border-radius: 50%;
            }

            .rewards-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
                border-radius: 20px;
            }

            .joystick {
                width: 45px;
                height: 45px;
            }

            .joystick::after {
                width: 20px;
                height: 20px;
            }

            /* PCÁ´ØÊäΩÂ•ñÂç°ÁâáÂå∫Âüü */
            .draw-cards {
                gap: 20px;
                padding: 10px;
            }

            /* PCÁ´ØÊäΩÂ•ñÂç†‰ΩçÊèêÁ§∫ */
            .draw-placeholder {
                font-size: 18px;
                color: #333;
                text-align: center;
                padding: 40px 30px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border-radius: 15px;
                border: none;
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
                min-height: 150px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                width: 100%;
                max-width: 400px;
                backdrop-filter: none;
                border: none;
                transition: all 0.3s ease;
            }

            .placeholder-icon {
                font-size: 3rem;
                margin-bottom: 20px;
            }

            .placeholder-text {
                font-size: 1.2rem;
                margin-bottom: 10px;
            }

            .placeholder-subtext {
                font-size: 0.9rem;
            }

            /* PCÁ´ØÈáëÂ∏Å‰∏çË∂≥ÂÜÖÂÆπ */
            .insufficient-coins-content {
                padding: 40px 30px;
                border-radius: 15px;
                min-height: 200px;
                max-width: 70%;
            }

            /* PCÁ´ØÈü≥ÊïàÊéßÂà∂ÊåâÈíÆ */
            .sound-control {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            /* PCÁ´ØÂ•ñÂìÅÁΩëÊ†º */
            .prize-grid {
                gap: 15px;
                margin-bottom: 20px;
                max-width: 80%;
            }

            .prize-item {
                border-radius: 15px;
                padding: 20px 15px;
            }

            .prize-icon {
                font-size: 2rem;
                margin-bottom: 10px;
            }

            .prize-name {
                font-size: 0.9rem;
            }

            /* PCÁ´ØÊäΩÂ•ñÊåâÈíÆ */
            .draw-button {
                border-radius: 15px;
                padding: 15px 20px;
                font-size: 1.1rem;
                margin-bottom: 20px;
            }

            /* PCÁ´ØÊäΩÂ•ñÈÄâÈ°πÊåâÈíÆ */
            .draw-option-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
                border-radius: 20px;
                min-width: 120px;
            }

            /* PCÁ´ØË¥≠Áâ©ÊåâÈíÆ */
            .shopping-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
                border-radius: 20px;
            }

            /* PCÁ´ØÊ®°ÊÄÅÊ°ÜÊ†∑Âºè */
            .modal {
                padding: 20px;
            }

            .modal-content {
                max-width: 600px;
                border-radius: 15px;
            }

            .modal-header {
                padding: 15px 20px;
                border-radius: 15px 15px 0 0;
            }

            .modal-body {
                padding: 20px;
            }

            .modal-footer {
                padding: 15px 20px;
                border-radius: 0 0 15px 15px;
            }

            /* PCÁ´ØË°®ÂçïÊ†∑Âºè */
            .form-group {
                margin-bottom: 15px;
            }

            .form-control {
                padding: 10px 12px;
                border-radius: 8px;
                font-size: 0.9rem;
            }

            .btn {
                padding: 10px 20px;
                border-radius: 8px;
                font-size: 0.9rem;
            }

            /* PCÁ´ØË°®Ê†ºÊ†∑Âºè */
            .table {
                font-size: 0.9rem;
            }

            .table th,
            .table td {
                padding: 10px 12px;
            }

            /* PCÁ´ØÂàÜÈ°µÊ†∑Âºè */
            .pagination {
                gap: 8px;
            }

            .page-link {
                padding: 8px 12px;
                font-size: 0.9rem;
            }



        /* ÊäΩÂ•ñËµÑÊ†ºÊòæÁ§∫Âå∫Âüü - Âõ∫ÂÆöÂú®ÊåâÈíÆ‰∏ãÊñπ */
        .draw-qualification {
            position: absolute;
        
            left: 20%;         /* Ë∑ùÁ¶ªÂ∑¶‰æß20% */
            width: 60%;        /* ÂÆΩÂ∫¶Âç†60% */
            text-align: center;
            color: white;
            font-size: 0.9rem;
            flex-shrink: 0;
            z-index: 10;
        }

        /* ÊéßÂà∂Âå∫Âüü - Âõ∫ÂÆöÂú®ÂõæÁâáÂè≥‰∏ãËßí */
        .controls {
            position: absolute;
            bottom: 17%;        /* Ë∑ùÁ¶ªÂ∫ïÈÉ®5% */
            right: 10%;        /* Ë∑ùÁ¶ªÂè≥‰æß10% */
            width: 30%;        /* ÂÆΩÂ∫¶Âç†30% */
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
        }

        .control-btn {
            background: #ffd700;
            border: none;
            border-radius: 50%;
            width: 10vw;
            height: 10vw;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3vw;
            cursor: pointer;
            box-shadow: 0 0.8vw 2.5vw rgba(0,0,0,0.2);
        }

        .rewards-btn {
            background: transparent;
            color: transparent;
            border: none;
            border-radius: 5vw;
            padding: 2.5vw 5vw;
            font-size: 2.5vw;
            cursor: pointer;
            box-shadow: none;
        }

        .joystick {
            background: #ffd700;
            border: none;
            border-radius: 50%;
            width: 10vw;
            height: 10vw;
            cursor: pointer;
            box-shadow: 0 0.8vw 2.5vw rgba(0,0,0,0.2);
            position: relative;
        }

        .joystick::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 5vw;
            height: 5vw;
            background: #333;
            border-radius: 50%;
        }

        /* ÊäΩÂ•ñÂç°ÁâáÂå∫Âüü */
        .draw-cards {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4vw;
            margin: 0;
            flex-wrap: wrap;
          
            flex: 1;
            padding: 1vw 1vw;
        }

        /* ÊäΩÂ•ñÂç†‰ΩçÊèêÁ§∫ - ÁæéÂåñÁâàÊú¨ */
        .draw-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 3vw 3vw;
            border-radius: 5vw;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(4vw);
            border: 0.5vw solid rgba(255, 215, 0, 0.3);
            box-shadow: 
                0 2vw 8vw rgba(0, 0, 0, 0.3),
                inset 0 0.3vw 0 rgba(255, 255, 255, 0.2),
                0 0 5vw rgba(255, 215, 0, 0.1);
            
            width: 100%;
            
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .draw-placeholder::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        .draw-placeholder::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.1), transparent 50%);
            pointer-events: none;
        }

        .placeholder-icon {
            font-size: 8.5vw;
            margin-bottom: 5vw;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 1vw 2vw rgba(255, 215, 0, 0.3));
            position: relative;
            z-index: 2;
        }

        .placeholder-text {
            font-size: 3.5vw;
            font-weight: bold;
            margin-bottom: 3vw;
            color: #ffd700;
            text-shadow: 0 0.5vw 1vw rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
            letter-spacing: 0.3vw;
        }

        .placeholder-subtext {
            font-size: 2.5vw;
            opacity: 0.9;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.4;
            position: relative;
            z-index: 2;
            text-shadow: 0 0.3vw 0.5vw rgba(0, 0, 0, 0.2);
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        /* ÈáëÂ∏Å‰∏çË∂≥Êó∂ÊòæÁ§∫ÁöÑÂÜÖÂÆπÊ†∑Âºè */
        .insufficient-coins-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 7.5vw 6vw;
            border-radius: 5vw;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.15), rgba(255, 107, 107, 0.05));
            backdrop-filter: blur(4vw);
            border: 0.5vw solid rgba(255, 107, 107, 0.3);
            box-shadow: 
                0 2vw 8vw rgba(0, 0, 0, 0.3),
                inset 0 0.3vw 0 rgba(255, 255, 255, 0.2),
                0 0 5vw rgba(255, 107, 107, 0.1);
            min-height: 55vh; /* ‰ΩøÁî®ËßÜÂè£È´òÂ∫¶ */
            width: 100%;
            max-width: 80%;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .insufficient-coins-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 107, 107, 0.1), transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        .insufficient-coins-content::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255, 107, 107, 0.1), transparent 50%);
            pointer-events: none;
        }

        .coins-title {
            font-size: 4vw;
            font-weight: bold;
            margin-bottom: 4vw;
            color: #ff6b6b;
            text-shadow: 0 0.5vw 1vw rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
            letter-spacing: 0.3vw;
        }

        .coins-text {
            font-size: 3vw;
            opacity: 0.9;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.5;
            position: relative;
            z-index: 2;
            text-shadow: 0 0.3vw 0.5vw rgba(0, 0, 0, 0.2);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-2.5vw) rotate(1.5deg); }
        }
         
         /* È™åËØÅË°®ÂçïÊ†∑Âºè - ÁæéÂåñÁâàÊú¨ */
         .verification-form {
             display: flex;
             flex-direction: column;
             gap: 4.5vw;
             margin-top: 6vw;
             width: 100%;
             max-width: 70%;
             position: relative;
             z-index: 2;
         }
         
         .verification-input {
             padding: 3vw 4.5vw;
             border: 0.5vw solid rgba(255, 215, 0, 0.4);
             border-radius: 3vw;
             background: rgba(255, 255, 255, 0.15);
             color: white;
             font-size: 3vw;
             backdrop-filter: blur(4vw);
             outline: none;
             transition: all 0.3s ease;
             box-shadow: 
                 0 1vw 3vw rgba(0, 0, 0, 0.2),
                 inset 0 0.3vw 0 rgba(255, 255, 255, 0.1);
         }
         
         .verification-input::placeholder {
             color: rgba(255, 255, 255, 0.8);
             font-weight: 500;
         }
         
         .verification-input:focus {
             border-color: #ffd700;
             box-shadow: 
                 0 0 4vw rgba(255, 215, 0, 0.4),
                 0 1vw 3vw rgba(0, 0, 0, 0.2),
                 inset 0 0.3vw 0 rgba(255, 255, 255, 0.1);
             transform: translateY(-0.3vw);
         }
         
         .verification-btn {
             padding: 3vw 6vw;
             background: linear-gradient(145deg, #ffd700, #ffed4e);
             border: none;
             border-radius: 4vw;
             color: #333;
             font-size: 3vw;
             font-weight: bold;
             cursor: pointer;
             transition: all 0.3s ease;
             box-shadow: 
                 0 1.5vw 5vw rgba(255, 215, 0, 0.4),
                 0 0.5vw 2vw rgba(0, 0, 0, 0.2);
             position: relative;
             overflow: hidden;
         }
         
         .verification-btn::before {
             content: '';
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
             transition: left 0.5s ease;
         }
         
         .verification-btn:hover {
             transform: translateY(-0.8vw);
             box-shadow: 
                 0 2vw 6vw rgba(255, 215, 0, 0.6),
                 0 1vw 3vw rgba(0, 0, 0, 0.3);
         }
         
         .verification-btn:hover::before {
             left: 100%;
         }
         
         .verification-btn:active {
             transform: translateY(-0.3vw);
         }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-2.5vw);
            }
            60% {
                transform: translateY(-1.3vw);
            }
        }

        .draw-card {
            width: 18vw;
            height: 25vw;
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border-radius: 2.5vw;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5vw;
            font-weight: bold;
            color: #ff4757;
            cursor: pointer;
            box-shadow: 0 1vw 4vw rgba(255, 215, 0, 0.4);
            transition: all 0.6s ease;
            transform-style: preserve-3d;
            position: relative;
        }

        /* ÈáëËâ≤ËæπÊ°ÜÂä®ÁîªÊïàÊûú */
        @keyframes goldenGlow {
            0% {
                box-shadow: 0 0 5vw rgba(255, 215, 0, 0.8), 0 0 10vw rgba(255, 215, 0, 0.4), 0 0 15vw rgba(255, 215, 0, 0.2);
            }
            50% {
                box-shadow: 0 0 7.5vw rgba(255, 215, 0, 1), 0 0 12.5vw rgba(255, 215, 0, 0.6), 0 0 17.5vw rgba(255, 215, 0, 0.3);
            }
            100% {
                box-shadow: 0 0 5vw rgba(255, 215, 0, 0.8), 0 0 10vw rgba(255, 215, 0, 0.4), 0 0 15vw rgba(255, 215, 0, 0.2);
            }
        }

        @keyframes goldenBorder {
            0% {
                border: 0.8vw solid #ffd700;
            }
            50% {
                border: 0.8vw solid #ffed4e;
            }
            100% {
                border: 0.8vw solid #ffd700;
            }
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0.8);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        .draw-card.golden-prize {
            border: 0.8vw solid #ffd700;
            animation: goldenGlow 2s ease-in-out infinite, goldenBorder 1.5s ease-in-out infinite;
            position: relative;
        }

        .draw-card.golden-prize::before {
            content: '‚ú®';
            position: absolute;
            top: -2.5vw;
            right: -2.5vw;
            font-size: 3vw;
            animation: sparkle 1.5s ease-in-out infinite;
            z-index: 10;
        }

        .draw-card.golden-prize::after {
            content: 'üéâ';
            position: absolute;
            bottom: -2.5vw;
            left: -2.5vw;
            font-size: 3vw;
            animation: sparkle 1.5s ease-in-out infinite 0.5s;
            z-index: 10;
        }

        .draw-card.flipped {
            transform: rotateY(180deg);
        }

        .draw-card-front,
        .draw-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 2.5vw;
        }

        .draw-card-front {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            color: #ff4757;
        }

        .draw-card-back {
            background: linear-gradient(145deg, #ff4757, #ff6b9d);
            color: white;
            transform: rotateY(180deg);
            font-size: 2vw;
            text-align: center;
            padding: 1.3vw;
        }

        /* Áä∂ÊÄÅÊòæÁ§∫ - ‰∏ªÂ±èÂπïÂÜÖ */
        .status-display {
            text-align: center;
            color: white;
            font-size: 2.5vw;
            margin-bottom: 4vw;
            width: 100%;
        }

        .decorative-pattern {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2.5vw;
        }

        .pattern-left {
            display: flex;
            gap: 1.3vw;
        }

        .pattern-square {
            width: 2vw;
            height: 2vw;
            background: #ff4757;
            border-radius: 0.5vw;
        }

        .pattern-right {
            display: flex;
            gap: 2vw;
            align-items: center;
        }

        .coin {
            width: 5vw;
            height: 5vw;
            background: #ffd700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8vw;
            color: #333;
        }

        .gold-ingot {
            width: 6vw;
            height: 3.5vw;
            background: #ffd700;
            border-radius: 0.8vw;
            margin-left: 1.3vw;
        }

        .rules-text2 {
            color: #666;
            line-height: 1.6;
            font-size: 2.5vw;
            text-align: justify;
            margin: 6vw 0px;
        }

        .shopping-btn {
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 6vw;
            padding: 4vw 10vw;
            font-size: 3vw;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 1vw 4vw rgba(255, 71, 87, 0.3);
            transition: all 0.3s ease;
        }

        .shopping-btn:hover {
            transform: translateY(-0.5vw);
            box-shadow: 0 1.5vw 5vw rgba(255, 71, 87, 0.4);
        }

        /* Âä®ÁîªÊïàÊûú */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .draw-button.animate {
            animation: pulse 0.5s ease-in-out;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° - Áªü‰∏ÄÂ™í‰ΩìÊü•ËØ¢ÈÄªËæë */
        /* Â∞èÂ±èÂπïÈÄÇÈÖç (480px‰ª•‰∏ã) */
        @media (max-width: 480px) {
            .main-title {
                font-size: 5vw;
            }
            
            .subtitle {
                font-size: 2.5vw;
            }
            
            .game-machine {
                margin: 0 3vw 5vw;
                padding: 4vw 4vw;
                min-height: 75vh;
            }
            
            .user-info-bar {
                margin-top: 2vw;
                width: 85%;
            }
            
            .main-screen {
                padding: 4vw;
                max-height: 45vh;
            }
            
            .user-avatar {
                width: 6vw;
                height: 6vw;
                font-size: 2.5vw;
            }
            
            .prize-grid {
                gap: 2.5vw;
            }
            
            .prize-item {
                padding: 3vw 1.5vw;
            }
            
            .prize-icon {
                font-size: 4vw;
            }
            
            .prize-name {
                font-size: 2vw;
            }
            
            .draw-buttons {
                gap: 4vw;
                padding: 2vw 0;
            }
            
            .draw-option-btn {
                padding: 3vw 5vw;
                font-size: 2.5vw;
                min-width: 20vw;
            }
            
            .draw-qualification {
                padding-bottom: 5vw;
            }
            
            .controls {
                margin-bottom: 4vw;
            }
        }
        
        /* Ë∂ÖÂ∞èÂ±èÂπïÈÄÇÈÖç (360px‰ª•‰∏ã) */
        @media (max-width: 360px) {
            .game-machine {
                margin: 0 2vw 4vw;
                padding: 3vw 3vw;
                min-height: 70vh;
            }
            
            .user-info-bar {
                margin-top: 1.5vw;
                width: 90%;
            }
            
            .main-screen {
                margin-top: 6vw;
                padding: 3vw;
                max-height: 40vh;
            }
            
            .draw-buttons {
                gap: 3vw;
                padding: 2vw 0;
            }
            
            .draw-option-btn {
                padding: 2.5vw 4vw;
                font-size: 2.2vw;
                min-width: 18vw;
            }
        }

        /* ÂºπÁ™óÊ†∑Âºè */
        .modal {
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(145deg, #ff4757, #ff6b9d);
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 20px;
        }

        .address-list {
            margin-bottom: 20px;
        }

        .address-item {
            border: 2px solid #f1f1f1;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            position: relative;
            transition: all 0.3s ease;
        }

        .address-item:hover {
            border-color: #ffd700;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
        }

        .address-item.default {
            border-color: #ffd700;
            background: linear-gradient(145deg, #fff9e6, #fff5cc);
        }

        .address-item.default::before {
            content: 'ÈªòËÆ§';
            position: absolute;
            top: -8px;
            right: 15px;
            background: #ffd700;
            color: #333;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .address-item.selected {
            border-color: #ffd700;
            background: linear-gradient(145deg, #fff9e6, #fff5cc);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .address-item.selected::after {
            content: 'Â∑≤ÈÄâÊã©';
            position: absolute;
            top: -8px;
            left: 15px;
            background: #28a745;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .address-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .address-phone {
            color: #666;
            margin-bottom: 5px;
        }

        .address-detail {
            color: #333;
            line-height: 1.4;
        }

        .address-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .add-address-btn, .confirm-order-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-address-btn {
            background: #f1f1f1;
            color: #333;
        }

        .add-address-btn:hover {
            background: #e1e1e1;
        }

        .confirm-order-btn {
            background: linear-gradient(145deg, #ff4757, #ff6b9d);
            color: white;
        }

        .confirm-order-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
        }

        .address-form {
            border: 2px solid #f1f1f1;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f9f9f9;
        }

        .address-form h4 {
            margin: 0 0 15px 0;
            color: #333;
        }

        .address-input, .address-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .address-input:focus, .address-textarea:focus {
            outline: none;
            border-color: #ffd700;
        }

        .address-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .address-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .address-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .address-checkbox label {
            color: #333;
            font-weight: 500;
        }

        .address-buttons {
            display: flex;
            gap: 10px;
        }

        .save-btn, .cancel-btn {
            flex: 1;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-btn {
            background: linear-gradient(145deg, #2ed573, #7bed9f);
            color: white;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(46, 213, 115, 0.4);
        }

        .cancel-btn {
            background: #f1f1f1;
            color: #333;
        }

        .cancel-btn:hover {
            background: #e1e1e1;
        }

        .no-address {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .no-address-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* ËÆ¢ÂçïÊ®°ÂùóÊ†∑Âºè - Áé∞‰ª£ÂåñËÆæËÆ° */
        .orders-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            margin: 20px 15px;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            display: none; /* ÈªòËÆ§ÈöêËóèÔºåÈ™åËØÅÂêéÊòæÁ§∫ */
            border: 2px solid rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }

        .orders-section::before {
            content: '';
            position: absolute;
            top: 0;
            
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 25px 25px 0 0;
        }

        .orders-title {
            color: #2d3748;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .orders-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        .orders-container {
            height: 400px;
            overflow-y: auto;
            padding-right: 8px;
            padding-left: 4px;
        }

        /* Ëá™ÂÆö‰πâÊªöÂä®Êù°Ê†∑Âºè - Áé∞‰ª£ÂåñËÆæËÆ° */
        .orders-container::-webkit-scrollbar {
            width: 8px;
        }

        .orders-container::-webkit-scrollbar-track {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 4px;
            margin: 4px 0;
        }

        .orders-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            border: 2px solid rgba(248, 250, 252, 0.8);
        }

        .orders-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        }

        .loading-orders {
            text-align: center;
            padding: 60px 20px;
            color: #4a5568;
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.8) 0%, rgba(241, 245, 249, 0.8) 100%);
            border-radius: 20px;
            border: 2px dashed rgba(102, 126, 234, 0.3);
            margin: 20px 0;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(102, 126, 234, 0.1);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ÊäΩÂ•ñËÆ∞ÂΩïÂç°ÁâáÊ†∑Âºè - ‰∏ìÁî®Ê†∑Âºè */
        .lottery-record-item {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .lottery-record-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 16px 16px 0 0;
        }
        
        .lottery-record-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
            border-color: rgba(102, 126, 234, 0.3);
        }
        
        .lottery-record-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            position: relative;
        }
        
        .lottery-record-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .lottery-record-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .lottery-record-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 12px;
        }
        
        .lottery-record-details h4 {
            color: #2d3748;
            margin-bottom: 6px;
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1.3;
        }
        
        .lottery-record-details .detail-item {
            color: #4a5568;
            font-size: 0.9rem;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .lottery-record-details .detail-item strong {
            color: #2d3748;
            font-weight: 600;
        }
        
        .lottery-record-status {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .lottery-record-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 16px;
        }
        
        .lottery-record-status.pending {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #744210;
        }
        
        .lottery-record-status.shipped {
            background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);
            color: white;
        }
        
        .lottery-record-status.delivered {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .lottery-record-status.completed {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .lottery-record-status.special {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }
        
        .lottery-record-content {
            /* margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(0, 0, 0, 0.06); */
        }
        
        .lottery-record-content .detail-item {
            color: #4a5568;
            font-size: 0.85rem;
            padding: 8px 0;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            margin-top: 10px;
            background: none;
            border-left: none;
            border-radius: 0;
        }
        
        .lottery-record-content .detail-item:hover {
            background: none;
            transform: none;
        }

        /* Áõ≤ÁõíËÆ¢ÂçïÂç°ÁâáÊ†∑Âºè - ‰∏ìÁî®Ê†∑Âºè */
        .blind-box-order-item {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .blind-box-order-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 16px 16px 0 0;
        }
        
        .blind-box-order-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
            border-color: rgba(102, 126, 234, 0.3);
        }
        
        .blind-box-order-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            position: relative;
        }
        
        .blind-box-order-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .blind-box-order-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .blind-box-order-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 12px;
        }
        
        .blind-box-order-details h4 {
            color: #2d3748;
            margin-bottom: 6px;
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1.3;
        }
        
        .blind-box-order-details .detail-item {
            color: #4a5568;
            font-size: 0.9rem;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .blind-box-order-details .detail-item strong {
            color: #2d3748;
            font-weight: 600;
        }
        
        .blind-box-order-status {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .blind-box-order-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 16px;
        }
        
        .blind-box-order-status.pending {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #744210;
        }
        
        .blind-box-order-status.shipped {
            background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);
            color: white;
        }
        
        .blind-box-order-status.delivered {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .blind-box-order-status.completed {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .blind-box-order-status.special {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }
        
        .blind-box-order-content {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(0, 0, 0, 0.06);
        }
        
        .blind-box-order-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }
        
        .blind-box-order-details-grid .detail-item {
            color: #4a5568;
            font-size: 0.85rem;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: rgba(248, 250, 252, 0.8);
            border-radius: 8px;
            border-left: 3px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .blind-box-order-details-grid .detail-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(4px);
        }
        
        .blind-box-order-details-grid .detail-item strong {
            color: #2d3748;
            font-weight: 600;
            margin-right: 8px;
        }

        /* ÂºπÁ™ó‰∏≠ÁöÑËÆ¢ÂçïÂÆπÂô®Ê†∑Âºè - Áé∞‰ª£ÂåñËÆæËÆ° */
        #modalOrdersContainer {
            height: 400px;
            overflow-y: auto;
            padding-right: 8px;
            padding-left: 4px;
        }

        #modalOrdersContainer::-webkit-scrollbar {
            width: 8px;
        }

        #modalOrdersContainer::-webkit-scrollbar-track {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 4px;
            margin: 4px 0;
        }

        #modalOrdersContainer::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            border: 2px solid rgba(248, 250, 252, 0.8);
        }

        #modalOrdersContainer::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        }

        .no-orders {
            text-align: center;
            padding: 60px 20px;
            color: #4a5568;
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.8) 0%, rgba(241, 245, 249, 0.8) 100%);
            border-radius: 20px;
            border: 2px dashed rgba(102, 126, 234, 0.3);
            margin: 20px 0;
        }

        .no-orders-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.7;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .order-info {
            margin-bottom: 10px;
        }

        .order-item-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .order-price {
            color: #ff4757;
            font-weight: bold;
        }

        .order-time {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 8px;
        }

        .order-contact {
            background: #e9ecef;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .order-contact-name {
            font-weight: bold;
            color: #333;
        }

        .order-contact-phone {
            color: #666;
            margin-left: 10px;
        }

        .order-contact-address {
            color: #666;
            margin-top: 5px;
            word-break: break-all;
        }
        
        /* ÈÄöÁî®ËØ¶ÊÉÖÈ°πÊ†∑Âºè - ‰øùÊåÅÂéüÊúâÊ†∑Âºè */
        .detail-item {
            color: #4a5568;
            font-size: 0.85rem;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: rgba(248, 250, 252, 0.8);
            border-radius: 8px;
            border-left: 3px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .detail-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(4px);
        }
        
        .detail-item strong {
            color: #2d3748;
            font-weight: 600;
            margin-right: 8px;
        }
        
        .virtual-item {
            border-left: 4px solid #28a745;
            position: relative;
        }
        
        .virtual-item::after {
            content: 'üéÅ';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.2rem;
            opacity: 0.7;
        }

        /* Áõ≤ÁõíÂïÜÂìÅÊ®°ÂùóÊ†∑Âºè - Áé∞‰ª£ÂåñËÆæËÆ° */
        .blind-box-products-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            margin: 20px 15px;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }

        .blind-box-products-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 25px 25px 0 0;
        }

        .blind-box-products-title {
            color: #2d3748;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .blind-box-products-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        .blind-box-products-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .blind-box-product-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 5px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .blind-box-product-item::before {
            /* content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ffd700 0%, #ffed4e 100%);
            border-radius: 20px 20px 0 0; */
        }

        .blind-box-product-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%);
            pointer-events: none;
        }

        .blind-box-product-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
            border-color: rgba(255, 215, 0, 0.5);
        }

        .blind-box-product-image {
            width: 100%;
            /* height: 140px; */
            margin: 0 auto 15px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .blind-box-product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 14px;
            transition: all 0.3s ease;
        }

        .blind-box-product-item:hover .blind-box-product-image img {
            transform: scale(1.05);
        }

        .blind-box-product-description {
            color: white;
            font-size: 0.95rem;
            font-weight: 600;
            line-height: 1.4;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* ÊéßÂà∂Âå∫Âüü - Âõ∫ÂÆöÂú®ÂõæÁâáÂè≥‰∏ãËßí */
        .controls {
            position: absolute;
            bottom: 17%;        /* Ë∑ùÁ¶ªÂ∫ïÈÉ®5% */
            right: 30%;        /* Ë∑ùÁ¶ªÂè≥‰æß10% */
            width: 30%;        /* ÂÆΩÂ∫¶Âç†30% */
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
        }

        .draw-option-btn {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border: none;
            border-radius: 15px;
            padding: 15px 25px;
            font-size: 3vw;
            font-weight: bold;
            color: #ff4757;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .draw-option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
        }

        .draw-option-btn:active {
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <!-- PCÁ´ØÊèêÁ§∫È°µÈù¢ -->
    <div class="pc-tip" id="pcTip" style="display: none;">
        <div class="pc-tip-icon">üì±</div>
        <div class="pc-tip-title">ËØ∑‰ΩøÁî®ÊâãÊú∫ËÆøÈóÆ</div>
        <div class="pc-tip-text">
            ‰∏∫‰∫ÜËé∑ÂæóÊúÄ‰Ω≥‰ΩìÈ™åÔºåËØ∑‰ΩøÁî®ÊâãÊú∫ÊµèËßàÂô®ËÆøÈóÆÊ≠§È°µÈù¢„ÄÇ<br>
            Êú¨ÊäΩÂ•ñÊ¥ªÂä®‰∏ì‰∏∫ÁßªÂä®Á´ØËÆæËÆ°ÔºåPCÁ´ØÊöÇ‰∏çÊîØÊåÅ„ÄÇ
        </div>
        <div class="pc-tip-qrcode">
            <img src="https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/3dfbcad5-ead7-4116-af85-a389ab109bb1/cj.png" alt="Êâ´Á†ÅËÆøÈóÆ">
            <div class="pc-tip-qrcode-text">Êâ´Êèè‰∫åÁª¥Á†ÅÔºåÁî®ÊâãÊú∫ËÆøÈóÆ</div>
        </div>
        
    </div>

    <!-- ÁßªÂä®Á´ØÂÜÖÂÆπ -->
    <div class="mobile-container" id="mobileContainer">
        <!-- Èü≥ÊïàÊéßÂà∂ÊåâÈíÆ -->
        <div class="sound-control" id="soundControl" onclick="toggleSound()">
            üîä
        </div>

        <!-- È°∂ÈÉ®Âå∫Âüü -->
        <div class="header">
            <img src="https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/77ec949d-7b3f-4c73-94ed-cc9cc19b02c9/title.png" alt="ÁôæÂàÜÁôæ‰∏≠Â•ñ" class="header-title-img">
        </div>

    <!-- Ê∏∏ÊàèÊú∫‰∏ª‰Ωì -->
    <div class="game-machine">
                 <!-- Áî®Êà∑‰ø°ÊÅØÊ†è - È°∂ÈÉ®Áã≠ÈïøÂå∫Âüü -->
         <div class="user-info-bar">
             <div class="scroll-container" id="userInfoContainer">
                 <!-- Áî®Êà∑‰ø°ÊÅØÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
             </div>
         </div>

                          <!-- ‰∏ªÂ±èÂπïÂå∫Âüü - ÊäΩÂ•ñÂÜÖÂÆπ -->
         <div class="main-screen">
                                                       <!-- ÊäΩÂ•ñÂç°ÁâáÂå∫Âüü -->
               <div class="draw-cards" id="drawCards">
                                  <!-- ÈªòËÆ§ÊèêÁ§∫ÊñáÊ°à -->
                <div class="draw-placeholder" id="drawPlaceholder">
                    <div class="placeholder-icon">üîê</div>
                    <div class="placeholder-text">ËØ∑ËæìÂÖ•È™åËØÅÁ†Å</div>
                    <div class="placeholder-subtext">È™åËØÅË∫´‰ªΩÂêéÂç≥ÂèØÂºÄÂßãÊäΩÂ•ñ</div>
                    <div class="verification-form" id="verificationForm">
                        <input type="text" id="verificationCode" placeholder="ËØ∑ËæìÂÖ•È™åËØÅÁ†Å" class="verification-input">
                        <button onclick="handleVerification()" class="verification-btn">È™åËØÅË∫´‰ªΩ</button>
                    </div>
                </div>
                   <!-- Âç°ÁâáÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
               </div>
         </div>
         
         <!-- ÊäΩÂ•ñÊåâÈíÆÂå∫Âüü - Âõ∫ÂÆöÂú®ÂõæÁâáÂ∫ïÈÉ®Âå∫Âüü -->
         <div class="draw-buttons" id="drawButtons">
                         <button class="draw-option-btn" onclick="startDraw(1)">20<svg t="1754277660881" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5506" width="16" height="16" style="vertical-align: middle; margin: 0 2px;"><path d="M512 528m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#F2814E" p-id="5507"></path><path d="M512 496m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#FFDC88" p-id="5508"></path><path d="M512 496m-282 0a282 282 0 1 0 564 0 282 282 0 1 0-564 0Z" fill="#FFBC54" p-id="5509"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5510"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5511"></path><path d="M257.4 801.828c14.168-7.124 31.124-14.42 36.6-35.828 20.132-78.676 424-508 424-508s0.372-52.644 29.852-82.536C846.172 247.96 910 364.584 910 496c0 219.664-178.336 398-398 398-96.8 0-185.572-34.632-254.6-92.172z" fill="#F47A38" fill-opacity=".5" p-id="5512"></path><path d="M716.296 301.688a30.104 30.104 0 0 1-0.228-41.464c1.24-1.488 1.932-2.224 1.932-2.224v-0.144a0.188 0.188 0 0 1 0.044-0.24 0.188 0.188 0 0 1 0.244 0c66.784 57.816 109.044 143.204 109.044 238.384 0 174.036-141.296 315.332-315.332 315.332-72.76 0-139.8-24.696-193.18-66.156a14.96 14.96 0 0 1-3.216-19.928l-0.036-0.02a18.172 18.172 0 0 1 26.248-4.452C389.112 756.692 448.088 778 512 778c155.64 0 282-126.36 282-282 0-75.284-29.564-143.716-77.704-194.312z" fill="#FFBA58" p-id="5513"></path><path d="M496.016 347.784a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.668 19.668 0 0 1 9.88 30.404l-53.308 72.396a19.668 19.668 0 0 0-3.828 11.788l0.572 89.896a19.668 19.668 0 0 1-25.864 18.792l-85.324-28.324a19.656 19.656 0 0 0-12.392 0l-85.324 28.324a19.664 19.664 0 0 1-25.864-18.792l0.572-89.896a19.668 19.668 0 0 0-3.828-11.788l-53.308-72.396a19.668 19.668 0 0 1 9.88-30.404l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FA7F4B" p-id="5514"></path><path d="M496.016 327.004a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.68 19.68 0 0 1 9.88 30.408l-53.308 72.392a19.668 19.668 0 0 0-3.828 11.788l0.572 89.9a19.664 19.664 0 0 1-25.864 18.792l-85.324-28.328a19.656 19.656 0 0 0-12.392 0l-85.324 28.328a19.668 19.668 0 0 1-25.864-18.792l0.572-89.9a19.668 19.668 0 0 0-3.828-11.788L338.052 465a19.68 19.68 0 0 1 9.88-30.408l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FFBC54" p-id="5515"></path><path d="M338.444 461.512a25.548 25.548 0 0 1 17.3-29.404l76.008-24.16a25.564 25.564 0 0 0 13.02-9.46l46.468-64.82a25.54 25.54 0 0 1 41.52 0l46.468 64.82a25.564 25.564 0 0 0 13.02 9.46l76.008 24.16a25.548 25.548 0 0 1 16.16 33.36c-49.228 10.14-104.98 15.864-164.024 15.864-66.332 0-128.508-7.224-181.948-19.82z" fill="#FFEA8D" p-id="5516"></path><path d="M787.368 557.016a17.312 17.312 0 0 1 21.992-12.948c0.376 0.124 0.752 0.236 1.124 0.356a14.752 14.752 0 0 1 10.016 17.036c-18.42 87.196-72.936 161.14-147.148 205.464a15.988 15.988 0 0 1-21.116-4.48l0.016-0.016a17.24 17.24 0 0 1 5.224-24.844c65.064-39.296 113.004-104.128 129.892-180.568z" fill="#FFED8C" p-id="5517"></path></svg>/1Ê¨°</button>
                         <button class="draw-option-btn" onclick="startDraw(5)">90<svg t="1754277660881" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5506" width="16" height="16" style="vertical-align: middle; margin: 0 2px;"><path d="M512 528m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#F2814E" p-id="5507"></path><path d="M512 496m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#FFDC88" p-id="5508"></path><path d="M512 496m-282 0a282 282 0 1 0 564 0 282 282 0 1 0-564 0Z" fill="#FFBC54" p-id="5509"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5510"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5511"></path><path d="M257.4 801.828c14.168-7.124 31.124-14.42 36.6-35.828 20.132-78.676 424-508 424-508s0.372-52.644 29.852-82.536C846.172 247.96 910 364.584 910 496c0 219.664-178.336 398-398 398-96.8 0-185.572-34.632-254.6-92.172z" fill="#F47A38" fill-opacity=".5" p-id="5512"></path><path d="M716.296 301.688a30.104 30.104 0 0 1-0.228-41.464c1.24-1.488 1.932-2.224 1.932-2.224v-0.144a0.188 0.188 0 0 1 0.044-0.24 0.188 0.188 0 0 1 0.244 0c66.784 57.816 109.044 143.204 109.044 238.384 0 174.036-141.296 315.332-315.332 315.332-72.76 0-139.8-24.696-193.18-66.156a14.96 14.96 0 0 1-3.216-19.928l-0.036-0.02a18.172 18.172 0 0 1 26.248-4.452C389.112 756.692 448.088 778 512 778c155.64 0 282-126.36 282-282 0-75.284-29.564-143.716-77.704-194.312z" fill="#FFBA58" p-id="5513"></path><path d="M496.016 347.784a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.668 19.668 0 0 1 9.88 30.404l-53.308 72.396a19.668 19.668 0 0 0-3.828 11.788l0.572 89.896a19.668 19.668 0 0 1-25.864 18.792l-85.324-28.324a19.656 19.656 0 0 0-12.392 0l-85.324 28.324a19.664 19.664 0 0 1-25.864-18.792l0.572-89.896a19.668 19.668 0 0 0-3.828-11.788l-53.308-72.396a19.668 19.668 0 0 1 9.88-30.404l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FA7F4B" p-id="5514"></path><path d="M496.016 327.004a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.68 19.68 0 0 1 9.88 30.408l-53.308 72.392a19.668 19.668 0 0 0-3.828 11.788l0.572 89.9a19.664 19.664 0 0 1-25.864 18.792l-85.324-28.328a19.656 19.656 0 0 0-12.392 0l-85.324 28.328a19.668 19.668 0 0 1-25.864-18.792l0.572-89.9a19.668 19.668 0 0 0-3.828-11.788L338.052 465a19.68 19.68 0 0 1 9.88-30.408l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FFBC54" p-id="5515"></path><path d="M338.444 461.512a25.548 25.548 0 0 1 17.3-29.404l76.008-24.16a25.564 25.564 0 0 0 13.02-9.46l46.468-64.82a25.54 25.54 0 0 1 41.52 0l46.468 64.82a25.564 25.564 0 0 0 13.02 9.46l76.008 24.16a25.548 25.548 0 0 1 16.16 33.36c-49.228 10.14-104.98 15.864-164.024 15.864-66.332 0-128.508-7.224-181.948-19.82z" fill="#FFEA8D" p-id="5516"></path><path d="M787.368 557.016a17.312 17.312 0 0 1 21.992-12.948c0.376 0.124 0.752 0.236 1.124 0.356a14.752 14.752 0 0 1 10.016 17.036c-18.42 87.196-72.936 161.14-147.148 205.464a15.988 15.988 0 0 1-21.116-4.48l0.016-0.016a17.24 17.24 0 0 1 5.224-24.844c65.064-39.296 113.004-104.128 129.892-180.568z" fill="#FFED8C" p-id="5517"></path></svg>/5Ê¨°</button>
         </div>
                   <div class="draw-qualification" id="drawQualification">
             ÊÇ®ÂΩìÂâçÊã•Êúâ 0 ÈáëÂ∏Å
          </div>

        

        <!-- ÊéßÂà∂Âå∫Âüü - Â∫ïÈÉ®Âõ∫ÂÆö -->
        <div class="controls">
           
            <button class="rewards-btn">ÊàëÁöÑÂ•ñÂä± ></button>
    
        </div>
    </div>



    <!-- Áõ≤ÁõíÂïÜÂìÅÊ®°Âùó -->
    <div class="blind-box-products-section">
        <h3 class="blind-box-products-title">Áõ≤ÁõíÂïÜÂìÅ</h3>
        <div class="blind-box-products-grid" id="blindBoxProductsGrid">
            <!-- Áõ≤ÁõíÂïÜÂìÅÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
        </div>
        
        <p class="rules-text2">
            ÂÖëÊç¢ÊàêÂäüÂêéÔºåÂú®ÂÖ¨‰ºóÂè∑ÂõûÂ§çËÆ¢ÂçïÂè∑Ëé∑ÂèñÁâ©ÊµÅ‰ø°ÊÅØ
        </p>
                 <button class="shopping-btn">ÂÖëÊç¢Áõ≤Áõí/2000<svg t="1754277660881" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5506" width="16" height="16" style="vertical-align: middle; margin: 0 2px;"><path d="M512 528m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#F2814E" p-id="5507"></path><path d="M512 496m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#FFDC88" p-id="5508"></path><path d="M512 496m-282 0a282 282 0 1 0 564 0 282 282 0 1 0-564 0Z" fill="#FFBC54" p-id="5509"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5510"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5511"></path><path d="M257.4 801.828c14.168-7.124 31.124-14.42 36.6-35.828 20.132-78.676 424-508 424-508s0.372-52.644 29.852-82.536C846.172 247.96 910 364.584 910 496c0 219.664-178.336 398-398 398-96.8 0-185.572-34.632-254.6-92.172z" fill="#F47A38" fill-opacity=".5" p-id="5512"></path><path d="M716.296 301.688a30.104 30.104 0 0 1-0.228-41.464c1.24-1.488 1.932-2.224 1.932-2.224v-0.144a0.188 0.188 0 0 1 0.044-0.24 0.188 0.188 0 0 1 0.244 0c66.784 57.816 109.044 143.204 109.044 238.384 0 174.036-141.296 315.332-315.332 315.332-72.76 0-139.8-24.696-193.18-66.156a14.96 14.96 0 0 1-3.216-19.928l-0.036-0.02a18.172 18.172 0 0 1 26.248-4.452C389.112 756.692 448.088 778 512 778c155.64 0 282-126.36 282-282 0-75.284-29.564-143.716-77.704-194.312z" fill="#FFBA58" p-id="5513"></path><path d="M496.016 347.784a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.668 19.668 0 0 1 9.88 30.404l-53.308 72.396a19.668 19.668 0 0 0-3.828 11.788l0.572 89.896a19.668 19.668 0 0 1-25.864 18.792l-85.324-28.324a19.656 19.656 0 0 0-12.392 0l-85.324 28.324a19.664 19.664 0 0 1-25.864-18.792l0.572-89.896a19.668 19.668 0 0 0-3.828-11.788l-53.308-72.396a19.668 19.668 0 0 1 9.88-30.404l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FA7F4B" p-id="5514"></path><path d="M496.016 327.004a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.68 19.68 0 0 1 9.88 30.408l-53.308 72.392a19.668 19.668 0 0 0-3.828 11.788l0.572 89.9a19.664 19.664 0 0 1-25.864 18.792l-85.324-28.328a19.656 19.656 0 0 0-12.392 0l-85.324 28.328a19.668 19.668 0 0 1-25.864-18.792l0.572-89.9a19.668 19.668 0 0 0-3.828-11.788L338.052 465a19.68 19.68 0 0 1 9.88-30.408l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FFBC54" p-id="5515"></path><path d="M338.444 461.512a25.548 25.548 0 0 1 17.3-29.404l76.008-24.16a25.564 25.564 0 0 0 13.02-9.46l46.468-64.82a25.54 25.54 0 0 1 41.52 0l46.468 64.82a25.564 25.564 0 0 0 13.02 9.46l76.008 24.16a25.548 25.548 0 0 1 16.16 33.36c-49.228 10.14-104.98 15.864-164.024 15.864-66.332 0-128.508-7.224-181.948-19.82z" fill="#FFEA8D" p-id="5516"></path><path d="M787.368 557.016a17.312 17.312 0 0 1 21.992-12.948c0.376 0.124 0.752 0.236 1.124 0.356a14.752 14.752 0 0 1 10.016 17.036c-18.42 87.196-72.936 161.14-147.148 205.464a15.988 15.988 0 0 1-21.116-4.48l0.016-0.016a17.24 17.24 0 0 1 5.224-24.844c65.064-39.296 113.004-104.128 129.892-180.568z" fill="#FFED8C" p-id="5517"></path></svg></button>
    </div>

    <!-- ËÆ¢ÂçïÊ®°Âùó -->
    <div class="orders-section">
        <h3 class="orders-title">ÊàëÁöÑÁõ≤ÁõíËÆ¢Âçï</h3>
        <div class="orders-container" id="ordersContainer">
            <div class="loading-orders" id="loadingOrders">
                <div class="loading-spinner"></div>
                <div>Ê≠£Âú®Âä†ËΩΩËÆ¢Âçï...</div>
            </div>
        </div>
    </div>

    

    <!-- Âú∞ÂùÄÁÆ°ÁêÜÂºπÁ™ó -->
    <div id="addressModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Êî∂Ë¥ßÂú∞ÂùÄÁÆ°ÁêÜ</h3>
                <span class="close" onclick="closeAddressModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="addressList" class="address-list">
                    <!-- Âú∞ÂùÄÂàóË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                </div>
                <div class="address-form" id="addressForm" style="display: none;">
                    <h4>Ê∑ªÂä†/ÁºñËæëÂú∞ÂùÄ</h4>
                    <input type="text" id="addressName" placeholder="Êî∂Ë¥ß‰∫∫ÂßìÂêç" class="address-input">
                    <input type="text" id="addressPhone" placeholder="ËÅîÁ≥ªÁîµËØù" class="address-input">
                    <textarea id="addressDetail" placeholder="ËØ¶ÁªÜÂú∞ÂùÄ" class="address-textarea"></textarea>
                    <div class="address-checkbox">
                        <input type="checkbox" id="addressDefault">
                        <label for="addressDefault">ËÆæ‰∏∫ÈªòËÆ§Âú∞ÂùÄ</label>
                    </div>
                    <div class="address-buttons">
                        <button onclick="saveAddress()" class="save-btn">‰øùÂ≠òÂú∞ÂùÄ</button>
                        <button onclick="cancelAddress()" class="cancel-btn">ÂèñÊ∂à</button>
                    </div>
                </div>
                <div class="address-actions">
                    <button onclick="showAddressForm()" class="add-address-btn">+ Êñ∞Â¢ûÂú∞ÂùÄ</button>
                    <button onclick="confirmBlindBoxOrder()" class="confirm-order-btn">Á°ÆËÆ§ÂÖëÊç¢Áõ≤Áõí</button>
                </div>
            </div>
        </div>
    </div>

               <!-- ÊäΩÂ•ñËÆ∞ÂΩïÂºπÁ™ó -->
           <div id="ordersModal" class="modal" style="display: none;">
               <div class="modal-content">
                   <div class="modal-header">
                       <h3>ÊäΩÂ•ñËÆ∞ÂΩï</h3>
                       <span class="close" onclick="closeOrdersModal()">&times;</span>
                   </div>
                   <div class="modal-body">
                       <div class="orders-container" id="modalOrdersContainer">
                           <div class="loading-orders" id="modalLoadingOrders">
                               <div class="loading-spinner"></div>
                               <div>Ê≠£Âú®Âä†ËΩΩËÆ∞ÂΩï...</div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>

                   <script>
          // APIÂü∫Á°ÄURL
          const API_BASE_URL = 'https://www.fuyetask.top:83/public/api/lottery';
        //    const API_BASE_URL = 'http://127.0.0.1:8000/public/api/lottery';
          
                     // Áî®Êà∑Áä∂ÊÄÅ
           let currentUser = null;
           let isVerified = false;
           
           // Èü≥ÊïàÊéßÂà∂
           let soundEnabled = true;
           
           // Èü≥ÊïàÂØπË±°
           const sounds = {
               draw: null,
               win: null,
               lose: null,
               flip: null
           };
           
           // ÂàùÂßãÂåñÈü≥Êïà
           function initSounds() {
               // ÂàõÂª∫ÊäΩÂ•ñÈü≥ÊïàÔºà‰ΩøÁî®Web Audio APIÁîüÊàêÔºâ
               const audioContext = new (window.AudioContext || window.webkitAudioContext)();
               
               // ÊäΩÂ•ñÈü≥Êïà - ‰ª§‰∫∫ÂÖ¥Â•ãÁöÑ‰∏äÂçáÈü≥Ë∞É
               function createDrawSound() {
                   const oscillator = audioContext.createOscillator();
                   const gainNode = audioContext.createGain();
                   
                   oscillator.connect(gainNode);
                   gainNode.connect(audioContext.destination);
                   
                   oscillator.type = 'sine';
                   oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                   oscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.5);
                   
                   gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                   gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.1);
                   gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                   
                   oscillator.start(audioContext.currentTime);
                   oscillator.stop(audioContext.currentTime + 0.5);
               }
               
               // ‰∏≠Â•ñÈü≥Êïà - Ê¨¢Âø´ÁöÑËÉúÂà©Èü≥Ë∞É
               function createWinSound() {
                   const oscillator = audioContext.createOscillator();
                   const gainNode = audioContext.createGain();
                   
                   oscillator.connect(gainNode);
                   gainNode.connect(audioContext.destination);
                   
                   oscillator.type = 'triangle';
                   oscillator.frequency.setValueAtTime(523, audioContext.currentTime); // C5
                   oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1); // E5
                   oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2); // G5
                   oscillator.frequency.setValueAtTime(1047, audioContext.currentTime + 0.3); // C6
                   
                   gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                   gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.05);
                   gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                   
                   oscillator.start(audioContext.currentTime);
                   oscillator.stop(audioContext.currentTime + 0.4);
               }
               
               // Âç°ÁâáÁøªËΩ¨Èü≥Êïà
               function createFlipSound() {
                   const oscillator = audioContext.createOscillator();
                   const gainNode = audioContext.createGain();
                   
                   oscillator.connect(gainNode);
                   gainNode.connect(audioContext.destination);
                   
                   oscillator.type = 'square';
                   oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                   oscillator.frequency.setValueAtTime(400, audioContext.currentTime + 0.1);
                   
                   gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                   gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.05);
                   gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                   
                   oscillator.start(audioContext.currentTime);
                   oscillator.stop(audioContext.currentTime + 0.2);
               }
               
               sounds.draw = createDrawSound;
               sounds.win = createWinSound;
               sounds.flip = createFlipSound;
           }
           
           // Êí≠ÊîæÈü≥Êïà
           function playSound(soundType) {
               if (!soundEnabled) return;
               
               try {
                   if (sounds[soundType]) {
                       sounds[soundType]();
                   }
               } catch (error) {
                   console.log('Èü≥ÊïàÊí≠ÊîæÂ§±Ë¥•:', error);
               }
           }
           
           // ÂàáÊç¢Èü≥ÊïàÂºÄÂÖ≥
           function toggleSound() {
               soundEnabled = !soundEnabled;
               const soundControl = document.getElementById('soundControl');
               
               if (soundEnabled) {
                   soundControl.textContent = 'üîä';
                   soundControl.classList.remove('muted');
               } else {
                   soundControl.textContent = 'üîá';
                   soundControl.classList.add('muted');
               }
               
               // ‰øùÂ≠òÈü≥ÊïàËÆæÁΩÆÂà∞Êú¨Âú∞Â≠òÂÇ®
               localStorage.setItem('soundEnabled', soundEnabled);
           }
           
           // ÊäΩÂ•ñËÆ∞ÂΩïÂàÜÈ°µÁõ∏ÂÖ≥ÂèòÈáè
           let currentPage = 1;
           let hasMoreRecords = true;
           let isLoadingRecords = false;
           
           // ‰ªéÊú¨Âú∞Â≠òÂÇ®ÊÅ¢Â§çÈ™åËØÅÁä∂ÊÄÅ
           async function loadVerificationState() {
               const savedUser = localStorage.getItem('lottery_user');
               const savedVerified = localStorage.getItem('lottery_verified');
               
               if (savedUser && savedVerified === 'true') {
                   try {
                       currentUser = JSON.parse(savedUser);
                       isVerified = true;
                       console.log('‰ªéÊú¨Âú∞Â≠òÂÇ®ÊÅ¢Â§çÈ™åËØÅÁä∂ÊÄÅ');
                       
                       // Ë∞ÉÁî®APIËé∑ÂèñÁî®Êà∑ÊúÄÊñ∞‰ø°ÊÅØ
                       await refreshUserInfo();
                       
                       // ÊòæÁ§∫ËÆ¢ÂçïÊ®°Âùó
                       const ordersSection = document.querySelector('.orders-section');
                       if (ordersSection) {
                           ordersSection.style.display = 'block';
                       }
                   } catch (error) {
                       console.error('Ëß£ÊûêÊú¨Âú∞Â≠òÂÇ®Êï∞ÊçÆÂ§±Ë¥•:', error);
                       clearVerificationState();
                   }
               }
           }
           
           // Âà∑Êñ∞Áî®Êà∑‰ø°ÊÅØ
           async function refreshUserInfo() {
               if (!currentUser || !currentUser.user_id) {
                   console.log('Áî®Êà∑‰ø°ÊÅØ‰∏çÂÆåÊï¥ÔºåË∑≥ËøáÂà∑Êñ∞');
                   return;
               }
               
               try {
                   console.log('Ê≠£Âú®Ëé∑ÂèñÁî®Êà∑ÊúÄÊñ∞‰ø°ÊÅØ...');
                   const response = await fetch(`${API_BASE_URL}/my-coins/?user_id=${currentUser.user_id}`, {
                       method: 'GET',
                       headers: {
                           'Content-Type': 'application/json',
                       }
                   });

                   const data = await response.json();
                   
                   if (response.ok && data.code === 200) {
                       // Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ
                       currentUser = {
                           user_id: data.data.user_id,
                           name: data.data.name,
                           coins: data.data.coins,
                           kills: data.data.kills
                       };
                       
                       console.log('Áî®Êà∑‰ø°ÊÅØÂ∑≤Êõ¥Êñ∞:', currentUser);
                       
                       // Êõ¥Êñ∞È°µÈù¢ÊòæÁ§∫
                       updateDrawQualification();
                       updateDrawCardsDisplay();
                       
                       // ‰øùÂ≠òÊõ¥Êñ∞ÂêéÁöÑÁä∂ÊÄÅ
                       saveVerificationState();
                   } else {
                       console.error('Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•:', data);
                       // Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•ÔºåÊ∏ÖÈô§È™åËØÅÁä∂ÊÄÅ
                       clearVerificationState();
                   }
               } catch (error) {
                   console.error('Âà∑Êñ∞Áî®Êà∑‰ø°ÊÅØAPIÈîôËØØ:', error);
                   // Â¶ÇÊûúÁΩëÁªúÈîôËØØÔºå‰øùÊåÅÂΩìÂâçÁä∂ÊÄÅ‰∏çÂèò
               }
           }
           
           // ‰øùÂ≠òÈ™åËØÅÁä∂ÊÄÅÂà∞Êú¨Âú∞Â≠òÂÇ®
           function saveVerificationState() {
               if (currentUser && isVerified) {
                   localStorage.setItem('lottery_user', JSON.stringify(currentUser));
                   localStorage.setItem('lottery_verified', 'true');
                   console.log('È™åËØÅÁä∂ÊÄÅÂ∑≤‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®');
               }
           }
           
           // Ê∏ÖÈô§È™åËØÅÁä∂ÊÄÅ
           function clearVerificationState() {
               localStorage.removeItem('lottery_user');
               localStorage.removeItem('lottery_verified');
               currentUser = null;
               isVerified = false;
               console.log('È™åËØÅÁä∂ÊÄÅÂ∑≤Ê∏ÖÈô§');
           }
          
          // Â•ñÂìÅÂàóË°®Ôºà‰øùÁïô‰Ωú‰∏∫Â§áÁî®Ôºâ
          const prizes = [
              'üíª ËãπÊûúÁ¨îËÆ∞Êú¨',
              'üì± iPhone 7 MAX',
              '‚åö Apple Watch',
              'üßß 500ÂÖÉÁ∫¢ÂåÖ',
              'üßß 200ÂÖÉÁ∫¢ÂåÖ',
              'üßß 100ÂÖÉÁ∫¢ÂåÖ',
              'üßß 50ÂÖÉÁ∫¢ÂåÖ',
              'üßß 10ÂÖÉÁ∫¢ÂåÖ',
              'üéÅ Ë∞¢Ë∞¢ÂèÇ‰∏é'
          ];

                                       // ÊäΩÂ•ñÂäüËÉΩ
          // Èò≤ÈáçÂ§çÁÇπÂáªÊó∂Èó¥Êà≥
          let lastDrawClickTime = 0;
          
          async function startDraw(times) {
              // Èò≤ÈáçÂ§çÁÇπÂáªÊ£ÄÊü• - 1ÁßíÂÜÖÂè™ËÉΩÁÇπÂáª‰∏ÄÊ¨°
              const currentTime = Date.now();
              if (currentTime - lastDrawClickTime < 1000) {
                  showToast('‰Ω†ÁöÑÊâãÈÄüÂ§™Âø´‰∫ÜÂêß', 'warning');
                  return;
              }
              
              // ËÆ∞ÂΩïÁÇπÂáªÊó∂Èó¥
              lastDrawClickTime = currentTime;
              
              // Ëé∑Âèñdraw-cardsÂå∫ÂüüÂπ∂Ê∑ªÂä†loadingÁä∂ÊÄÅ
              const drawCards = document.getElementById('drawCards');
              drawCards.classList.add('loading');
              
              // Ê£ÄÊü•Áî®Êà∑ÊòØÂê¶Â∑≤È™åËØÅ
          if (!isVerified || !currentUser) {
              showToast('ËØ∑ÂÖàÈ™åËØÅË∫´‰ªΩ', 'error');
              return;
          }
              
              // Êí≠ÊîæÊäΩÂ•ñÈü≥Êïà
              playSound('draw');
              
              const drawPlaceholder = document.getElementById('drawPlaceholder');
              
              // ÈöêËóèÊèêÁ§∫ÊñáÊ°à
              if (drawPlaceholder) {
                  drawPlaceholder.style.display = 'none';
              }
              
              drawCards.innerHTML = ''; // Ê∏ÖÁ©∫Áé∞ÊúâÂç°Áâá
              
              try {
                  // Ë∞ÉÁî®ÁúüÂÆûÊäΩÂ•ñAPI
                  const response = await fetch(`${API_BASE_URL}/draw/`, {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json',
                      },
                      body: JSON.stringify({
                          user_id: currentUser.user_id,
                          draw_type: times
                      })
                  });

                  const data = await response.json();
                  
                  if (response.ok) {
                                           // Êõ¥Êñ∞Áî®Êà∑ÈáëÂ∏Å
                     if (data.data && data.data.remaining_coins !== undefined) {
                         currentUser.coins = data.data.remaining_coins;
                         updateDrawQualification();
                     }
                      
                      // ÊòæÁ§∫ÊäΩÂ•ñÁªìÊûú
                      if (data.data && data.data.draw_results) {
                          showDrawResults(data.data.draw_results, drawCards);
                      } else {
                          // Â¶ÇÊûúAPIÊ≤°ÊúâËøîÂõûÁªìÊûúÔºå‰ΩøÁî®Â§áÁî®ÊñπÊ°à
                          showBackupDrawResults(times, drawCards);
                      }
                  } else {
                      // ÁâπÂà´Â§ÑÁêÜÈáëÂ∏Å‰∏çË∂≥ÁöÑÊÉÖÂÜµ
                      if (data.message && data.message.includes('ÈáëÂ∏Å‰∏çË∂≥')) {
                          const costCoins = times === 1 ? 20 : 90;
                          const currentCoins = currentUser.coins || 0;
                          const needed = costCoins - currentCoins;
                          showToast(`ÈáëÂ∏Å‰∏çË∂≥ÔºåÊó†Ê≥ïÊäΩÂ•ñ\nÈúÄË¶Å${costCoins}ÈáëÂ∏ÅÔºåÂΩìÂâç${currentCoins}ÈáëÂ∏Å\nËøòÂ∑Æ${needed}ÈáëÂ∏Å`, 'error');
                          
                          // ÈáëÂ∏Å‰∏çË∂≥Êó∂ÔºåÂú®drawCardsÂå∫ÂüüÊòæÁ§∫Â¶Ç‰ΩïËé∑ÂèñÈáëÂ∏ÅÁöÑÊñáÊ°à
                          drawCards.innerHTML = `
                              <div class="insufficient-coins-content">
                                  <div class="coins-title">Â¶Ç‰ΩïËé∑ÂèñÈáëÂ∏Å</div>
                                  <div class="coins-text">ÂèÇ‰∏éÊ∏∏ÊàèÔºåÈÄöËøáÊ∏∏ÊàèÂØπÊàòËé∑ÂæóÈáëÂ∏Å</div>
                              </div>
                          `;
                          // ÁßªÈô§loadingÁä∂ÊÄÅ
                          drawCards.classList.remove('loading');
                          return; // Áõ¥Êé•ËøîÂõûÔºå‰∏çÊâßË°åÂêéÁª≠ÁöÑÂ§áÁî®ÊñπÊ°à
                      } else {
                          showToast(data.message || 'ÊäΩÂ•ñÂ§±Ë¥•', 'error');
                          // ÂÖ∂‰ªñÈîôËØØÊó∂‰ΩøÁî®Â§áÁî®ÊñπÊ°à
                          showBackupDrawResults(times, drawCards);
                      }
                  }
              } catch (error) {
                  console.error('ÊäΩÂ•ñAPIÈîôËØØ:', error);
                  showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï', 'error');
                  
                  // ÁΩëÁªúÈîôËØØÊó∂ÔºåÊÅ¢Â§çÊèêÁ§∫ÊñáÊ°àÊòæÁ§∫Ôºå‰∏çÂ±ïÁ§∫‰ªª‰ΩïÂç°Áâá
                  if (drawPlaceholder) {
                      drawPlaceholder.style.display = 'block';
                  }
              } finally {
                  // ÁßªÈô§loadingÁä∂ÊÄÅ
                  drawCards.classList.remove('loading');
              }
          }
          
          // ÊòæÁ§∫ÊäΩÂ•ñÁªìÊûú
          function showDrawResults(prizes, container) {
              prizes.forEach((prize, index) => {
                  setTimeout(() => {
                      const card = document.createElement('div');
                      card.className = 'draw-card';
                      
                      card.innerHTML = `
                          <div class="draw-card-front">?</div>
                          <div class="draw-card-back">${prize.prize_name || prize}</div>
                      `;
                      container.appendChild(card);
                      
                      // Âª∂ËøüÁøªËΩ¨Âç°Áâá - Á°Æ‰øùËá≥Â∞ëÁ≠âÂæÖ1ÁßíÂÜçÁøªËΩ¨
                      setTimeout(() => {
                          card.classList.add('flipped');
                          
                          // Êí≠ÊîæÁøªËΩ¨Èü≥Êïà
                          playSound('flip');
                          
                          // ÁøªËΩ¨ÂêéÂÜçÊ∑ªÂä†ÈáëËâ≤ËæπÊ°ÜÊ†∑ÂºèÔºàÂ¶ÇÊûúÊòØÂ•ΩÂ•ñÂìÅÔºâ
                          if (prize.prize_type <= 3) {
                              card.classList.add('golden-prize');
                              // Êí≠Êîæ‰∏≠Â•ñÈü≥Êïà
                              playSound('win');
                          }
                      }, 1000 + index * 500);
                  }, index * 200);
              });
          }
          
          // Â§áÁî®ÊäΩÂ•ñÁªìÊûúÔºàÂΩìAPI‰∏çÂèØÁî®Êó∂Ôºâ
          function showBackupDrawResults(times, container) {
              const cards = [];
              for (let i = 0; i < times; i++) {
                  const card = document.createElement('div');
                  card.className = 'draw-card';
                  
                  card.innerHTML = `
                      <div class="draw-card-front">?</div>
                      <div class="draw-card-back">${getRandomPrize()}</div>
                  `;
                  container.appendChild(card);
                  cards.push(card);
              }
              
              // Âª∂ËøüÁøªËΩ¨Âç°Áâá - Á°Æ‰øùËá≥Â∞ëÁ≠âÂæÖ1ÁßíÂÜçÁøªËΩ¨
              setTimeout(() => {
                  cards.forEach((card, index) => {
                      setTimeout(() => {
                          card.classList.add('flipped');
                          
                          // Êí≠ÊîæÁøªËΩ¨Èü≥Êïà
                          playSound('flip');
                          
                          // ÁøªËΩ¨ÂêéÂÜçÈöèÊú∫Ê∑ªÂä†ÈáëËâ≤ËæπÊ°ÜÔºàÊ®°ÊãüÂ•ΩÂ•ñÂìÅÔºâ
                          if (Math.random() > 0.7) { // 30%Ê¶ÇÁéáËé∑ÂæóÈáëËâ≤ËæπÊ°Ü
                              card.classList.add('golden-prize');
                              // Êí≠Êîæ‰∏≠Â•ñÈü≥Êïà
                              playSound('win');
                          }
                      }, 1000 + index * 500);
                  });
              }, 1000);
          }

                   // Ëé∑ÂèñÈöèÊú∫Â•ñÂìÅ
         function getRandomPrize() {
             return prizes[Math.floor(Math.random() * prizes.length)];
         }
         
         // Ëé∑ÂèñÁî®Êà∑ÈªòËÆ§Âú∞ÂùÄ
         async function getUserDefaultAddress() {
             try {
                 const response = await fetch(`${API_BASE_URL}/user-address/`, {
                     method: 'GET',
                     headers: {
                       'Content-Type': 'application/json',
                       'Accept': 'application/json',
                     }
                 });
                 
                 if (response.ok) {
                     const data = await response.json();
                     if (data.data && data.data.length > 0) {
                         // ‰ºòÂÖàËøîÂõûÈªòËÆ§Âú∞ÂùÄÔºåÂ¶ÇÊûúÊ≤°ÊúâÈªòËÆ§Âú∞ÂùÄÂàôËøîÂõûÁ¨¨‰∏Ä‰∏™Âú∞ÂùÄ
                         const defaultAddress = data.data.find(addr => addr.is_default) || data.data[0];
                         return defaultAddress;
                     }
                 }
                 return null;
             } catch (error) {
                 console.error('Ëé∑ÂèñÁî®Êà∑Âú∞ÂùÄÂ§±Ë¥•:', error);
                 return null;
             }
         }
         
                   // È™åËØÅÂ§ÑÁêÜÂáΩÊï∞
          async function handleVerification() {
              const code = document.getElementById('verificationCode').value.trim();
              if (!code) {
                  showToast('ËØ∑ËæìÂÖ•È™åËØÅÁ†Å', 'error');
                  return;
              }
              
              try {
                  const success = await verifyUser(code);
                  if (success) {
                      // È™åËØÅÊàêÂäüÂêé‰øùÂ≠òÁä∂ÊÄÅÂπ∂Êõ¥Êñ∞ÊòæÁ§∫
                      saveVerificationState();
                      updateDrawCardsDisplay();
                      updateDrawQualification();
                  }
              } catch (error) {
                  console.error('È™åËØÅÂ§±Ë¥•:', error);
              }
          }
          
                                           // Êõ¥Êñ∞ÊäΩÂ•ñÂç°ÁâáÂå∫ÂüüÊòæÁ§∫
            function updateDrawCardsDisplay() {
                const drawPlaceholder = document.getElementById('drawPlaceholder');
                const drawButtons = document.getElementById('drawButtons');
                
                if (isVerified && currentUser) {
                    // È™åËØÅÊàêÂäüÔºåÊòæÁ§∫ÊäΩÂ•ñÊèêÁ§∫Âπ∂ÊòæÁ§∫ÊåâÈíÆ
                    drawPlaceholder.innerHTML = `
                        <div class="placeholder-icon">üéØ</div>
                        <div class="placeholder-text">ÁÇπÂáª‰∏ãÊñπÊåâÈíÆÂºÄÂßãÊäΩÂ•ñ</div>
                        <div class="placeholder-subtext">ÈÄâÊã©ÊäΩÂ•ñÊ¨°Êï∞ÔºåËµ¢Âèñ‰∏∞ÂéöÂ•ñÂìÅ</div>
                    `;
                    // ÊòæÁ§∫ÊäΩÂ•ñÊåâÈíÆ
                    if (drawButtons) {
                        drawButtons.style.display = 'flex';
                    }
                } else {
                    // Êú™È™åËØÅÔºåÊòæÁ§∫È™åËØÅË°®ÂçïÂπ∂ÈöêËóèÊåâÈíÆ
                    drawPlaceholder.innerHTML = `
                        <div class="placeholder-icon">üîê</div>
                        <div class="placeholder-text">ËØ∑ËæìÂÖ•È™åËØÅÁ†Å</div>
                        <div class="placeholder-subtext">È™åËØÅË∫´‰ªΩÂêéÂç≥ÂèØÂºÄÂßãÊäΩÂ•ñ</div>
                                                 <div class="verification-form" id="verificationForm">
                             <input type="text" id="verificationCode" placeholder="ËØ∑ËæìÂÖ•È™åËØÅÁ†Å" class="verification-input" maxlength="8" onkeypress="handleKeyPress(event)" oninput="limitInput(this)">
                             <button onclick="handleVerification()" class="verification-btn">È™åËØÅË∫´‰ªΩ</button>
                         </div>
                    `;
                    // ÈöêËóèÊäΩÂ•ñÊåâÈíÆ
                    if (drawButtons) {
                        drawButtons.style.display = 'none';
                    }
                }
             }
            
                         // Â§ÑÁêÜÂõûËΩ¶ÈîÆ
             function handleKeyPress(event) {
                 if (event.key === 'Enter') {
                     handleVerification();
                 }
             }
             
             // ÈôêÂà∂ËæìÂÖ•Ê°ÜÈïøÂ∫¶ÂíåÂ≠óÁ¨¶Á±ªÂûã
             function limitInput(input) {
                 // Âè™ÂÖÅËÆ∏Êï∞Â≠ó
                //  input.value = input.value.replace(/[^0-9]/g, '');
                 
                 // ÈôêÂà∂ÊúÄÂ§ßÈïøÂ∫¶‰∏∫8‰Ωç
                 if (input.value.length > 8) {
                     input.value = input.value.slice(0, 8);
                 }
             }
          
          // Áî®Êà∑È™åËØÅÂäüËÉΩ
          async function verifyUser(code) {
             try {
                 const response = await fetch(`${API_BASE_URL}/verify/`, {
                     method: 'POST',
                     headers: {
                         'Content-Type': 'application/json',
                     },
                                           body: JSON.stringify({
                          password: code
                      })
                 });

                 const data = await response.json();
                 
                 if (response.ok) {
                     currentUser = data.data;
                     isVerified = true;
                     
                     // ‰øùÂ≠òÈ™åËØÅÁä∂ÊÄÅ
                     saveVerificationState();
                     
                     // Êõ¥Êñ∞È°µÈù¢ÊòæÁ§∫
                     updateDrawQualification();
                     updateDrawCardsDisplay();
                     
                     // ÊòæÁ§∫ËÆ¢ÂçïÊ®°ÂùóÂπ∂Âä†ËΩΩÁî®Êà∑ËÆ¢Âçï
                     const ordersSection = document.querySelector('.orders-section');
                     if (ordersSection) {
                         ordersSection.style.display = 'block';
                     }
                     loadUserOrders();
                     
                     showToast('È™åËØÅÊàêÂäüÔºÅ', 'success');
                     return true;
                 } else {
                     showToast(data.message || 'È™åËØÅÂ§±Ë¥•', 'error');
                     return false;
                 }
             } catch (error) {
                 console.error('È™åËØÅAPIÈîôËØØ:', error);
                 showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï', 'error');
                 return false;
             }
         }
         
         // Êõ¥Êñ∞ÊäΩÂ•ñËµÑÊ†ºÊòæÁ§∫
         function updateDrawQualification() {
             const qualificationElement = document.getElementById('drawQualification');
             if (currentUser && isVerified) {
                 qualificationElement.textContent = `${currentUser.name || 0}ÔºåÊÇ®ÂΩìÂâçÊã•Êúâ ${currentUser.coins || 0} ÈáëÂ∏Å`;
             } else {
                 qualificationElement.textContent = 'ÂÖ≥Ê≥®ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÔºåÂõûÂ§ç„ÄêË¥¶Âè∑„ÄëËé∑ÂæóÈ™åËØÅÁ†Å';
             }
         }
         
                             // ToastÊèêÁ§∫ÂäüËÉΩ
          function showToast(message, type = 'info') {
              // ÂàõÂª∫toastÂÖÉÁ¥†
              const toast = document.createElement('div');
              toast.style.cssText = `
                  position: fixed;
                  top: 20px;
                  right: -320px;
                  background: ${type === 'error' ? '#ff4757' : type === 'success' ? '#2ed573' : '#3742fa'};
                  color: white;
                  padding: 16px 24px;
                  border-radius: 12px;
                  z-index: 10000;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
                  backdrop-filter: blur(10px);
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  min-width: 200px;
                  max-width: 300px;
                  text-align: center;
                  transition: right 0.4s ease;
              `;
              toast.textContent = message;
              
              document.body.appendChild(toast);
              
              // ‰ªéÂè≥Âà∞Â∑¶ÊªëÂÖ•
              setTimeout(() => {
                  toast.style.right = '20px';
              }, 100);
              
              // 2ÁßíÂêéÁõ¥Êé•Ê∂àÂ§±
              setTimeout(() => {
                  if (toast.parentNode) {
                      toast.parentNode.removeChild(toast);
                  }
              }, 2000);
          }



        // ÊàëÁöÑÂ•ñÂä±ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
        document.querySelector('.rewards-btn').addEventListener('click', function() {
            // Ê£ÄÊü•Áî®Êà∑ÊòØÂê¶Â∑≤È™åËØÅ
            if (!isVerified || !currentUser) {
                showToast('ËØ∑ÂÖàÈ™åËØÅË∫´‰ªΩ', 'error');
                return;
            }
            
            // ÊòæÁ§∫Áõ≤ÁõíËÆ¢ÂçïÂºπÁ™ó
            showOrdersModal();
        });

                                                                       // ÂéªË¥≠Áâ©ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
           document.querySelector('.shopping-btn').addEventListener('click', function() {
               // Ê£ÄÊü•Áî®Êà∑ÊòØÂê¶Â∑≤È™åËØÅ
               if (!isVerified || !currentUser) {
                   showToast('ËØ∑ÂÖàÈ™åËØÅË∫´‰ªΩ', 'error');
                   return;
               }
               
                              // Ê£ÄÊü•Áî®Êà∑ÈáëÂ∏ÅÊòØÂê¶Ë∂≥Â§üÔºàÁõ≤Áõí‰ª∑Ê†º2000ÈáëÂ∏ÅÔºâ
                if (!currentUser.coins || currentUser.coins < 2000) {
                    const needed = 2000 - (currentUser.coins || 0);
                    showToast(`ÈáëÂ∏Å‰∏çË∂≥ÔºåÊó†Ê≥ïÂÖëÊç¢Áõ≤Áõí\nÈúÄË¶Å2000ÈáëÂ∏ÅÔºåÂΩìÂâç${currentUser.coins || 0}ÈáëÂ∏Å\nËøòÂ∑Æ${needed}ÈáëÂ∏Å`, 'error');
                    return;
                }
               
               // ÂÖàÊü•ËØ¢Áî®Êà∑Âú∞ÂùÄÔºåÁÑ∂ÂêéÊòæÁ§∫Âú∞ÂùÄÁÆ°ÁêÜÂºπÁ™ó
               loadUserAddresses();
           });
          
                     // ÂàõÂª∫Áõ≤ÁõíËÆ¢Âçï - ÂèÇËÄÉlottery.htmlÁöÑÁªü‰∏Ä‰∏ãÂçïÈÄªËæë
           async function createBlindBoxOrder() {
               try {
                   // ÊòæÁ§∫Âä†ËΩΩÊèêÁ§∫
                   showToast('Ê≠£Âú®ÂàõÂª∫Áõ≤ÁõíËÆ¢Âçï...', 'info');
                   
                   // Ëé∑ÂèñÁî®Êà∑ÈÄâ‰∏≠ÁöÑÂú∞ÂùÄ
                   const selectedAddress = getSelectedAddress();
                   if (!selectedAddress) {
                       showToast('ËØ∑ÂÖàÊ∑ªÂä†Êî∂Ë¥ßÂú∞ÂùÄ', 'error');
                       return;
                   }
                   
                   // ÂáÜÂ§áËØ∑Ê±ÇÊï∞ÊçÆ - ‰ΩøÁî®Âõ∫ÂÆöÁöÑitem_idÔºåÂèÇËÄÉlottery.htmlÈÄªËæë
                   const requestData = {
                       user_id: currentUser.user_id,
                       item_id: '5c1563fa-e38f-43c4-b7ad-aaaed0458304',  // Âõ∫ÂÆöÁõ≤ÁõíÂïÜÂìÅID
                       contact_info: {
                           name: selectedAddress.name,
                           phone: selectedAddress.phone,
                           address: selectedAddress.address
                       }
                   };
                   
                   console.log('Áõ≤ÁõíËÆ¢ÂçïËØ∑Ê±ÇÊï∞ÊçÆ:', requestData);
                   console.log('ËØ∑Ê±ÇURL:', `${API_BASE_URL.replace('/lottery', '/shop')}/exchange/`);
                   
                   // Ë∞ÉÁî®Áªü‰∏ÄÁöÑÂïÜÂìÅÂÖëÊç¢API - ÂèÇËÄÉlottery.htmlÁöÑAPIË∞ÉÁî®ÊñπÂºè
                   const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/exchange/`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify(requestData)
                   });

                   console.log('ÂìçÂ∫îÁä∂ÊÄÅ:', response.status);
                   const data = await response.json();
                   console.log('ÂìçÂ∫îÊï∞ÊçÆ:', data);
                   
                   if (response.ok) {
                       // Êõ¥Êñ∞Áî®Êà∑ÈáëÂ∏Å - ÂèÇËÄÉlottery.htmlÁöÑÈáëÂ∏ÅÊõ¥Êñ∞ÈÄªËæë
                       if (data.data && data.data.remaining_coins !== undefined) {
                           currentUser.coins = data.data.remaining_coins;
                           updateDrawQualification();
                           
                           // Êõ¥Êñ∞ÁºìÂ≠òÊï∞ÊçÆ
                           const cachedUserData = localStorage.getItem('cachedUserData');
                           if (cachedUserData) {
                               const cachedUser = JSON.parse(cachedUserData);
                               cachedUser.coins = currentUser.coins;
                               localStorage.setItem('cachedUserData', JSON.stringify(cachedUser));
                           }
                       }
                       
                       // ÊòæÁ§∫ÊàêÂäü‰ø°ÊÅØ - ÂèÇËÄÉlottery.htmlÁöÑÊàêÂäüÂèçÈ¶à
                       const orderInfo = data.data;
                       showToast(`Áõ≤ÁõíËÆ¢ÂçïÂàõÂª∫ÊàêÂäüÔºÅ\nËÆ¢ÂçïÂè∑Ôºö${orderInfo.order_id}`, 'success');
                       
                       // Âà∑Êñ∞ËÆ¢ÂçïÂàóË°®
                       loadUserOrders();
                       
                       // ÊòæÁ§∫ËØ¶ÁªÜËÆ¢Âçï‰ø°ÊÅØ - ÂèÇËÄÉlottery.htmlÁöÑËÆ¢ÂçïËØ¶ÊÉÖÂ±ïÁ§∫
                       setTimeout(() => {
                           showOrderDetails(orderInfo, requestData.contact_info);
                       }, 1000);
                       
                   } else {
                       console.error('APIÈîôËØØÂìçÂ∫î:', data);
                       showToast(data.message || `Áõ≤ÁõíËÆ¢ÂçïÂàõÂª∫Â§±Ë¥• (${response.status})`, 'error');
                   }
               } catch (error) {
                   console.error('Áõ≤ÁõíËÆ¢ÂçïAPIÈîôËØØ:', error);
                   showToast(`ÁΩëÁªúÈîôËØØ: ${error.message}`, 'error');
               }
           }

           // ÊòæÁ§∫ËÆ¢ÂçïËØ¶ÊÉÖ - ÂèÇËÄÉlottery.htmlÁöÑËÆ¢ÂçïËØ¶ÊÉÖÂ±ïÁ§∫
           function showOrderDetails(orderData, contactInfo) {
               const orderHtml = `
                   <div style="background: rgba(0,0,0,0.9); position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10000; display: flex; align-items: center; justify-content: center;">
                       <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 30px; max-width: 500px; width: 90%; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                           <h3 style="color: #ffd700; text-align: center; margin-bottom: 20px;">üéâ Áõ≤ÁõíËÆ¢ÂçïÂàõÂª∫ÊàêÂäü</h3>
                           <div style="color: #fff; line-height: 1.6;">
                               <p><strong>ÂïÜÂìÅÂêçÁß∞Ôºö</strong>${orderData.item_name}</p>
                               <p><strong>ËÆ¢ÂçïÂè∑Ôºö</strong>${orderData.order_id}</p>
                               <p><strong>ÂÖëÊç¢‰ª∑Ê†ºÔºö</strong>${orderData.price} ü™ô</p>
                               <p><strong>Ââ©‰ΩôÈáëÂ∏ÅÔºö</strong>${orderData.remaining_coins} ü™ô</p>
                               <p><strong>Êî∂Ë¥ß‰∫∫Ôºö</strong>${contactInfo.name}</p>
                               <p><strong>ËÅîÁ≥ªÁîµËØùÔºö</strong>${contactInfo.phone}</p>
                               <p><strong>Êî∂Ë¥ßÂú∞ÂùÄÔºö</strong>${contactInfo.address}</p>
                               <p><strong>ÂÖëÊç¢Êó∂Èó¥Ôºö</strong>${new Date(orderData.exchange_time).toLocaleString()}</p>
                               <p><strong>ËÆ¢ÂçïÁä∂ÊÄÅÔºö</strong><span style="color: #ffc107;">ÂæÖÂèëË¥ß</span></p>
                           </div>
                           <div style="text-align: center; margin-top: 20px;">
                               <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer;">Á°ÆÂÆö</button>
                           </div>
                       </div>
                   </div>
               `;
               document.body.insertAdjacentHTML('beforeend', orderHtml);
           }

                 // Â•ñÂìÅÁÇπÂáª‰∫ã‰ª∂ - Â∑≤Ê≥®ÈáäÔºåÂõ†‰∏∫Â•ñÂìÅÁΩëÊ†º‰∏çÂ≠òÂú®
         // document.querySelectorAll('.prize-item').forEach(item => {
         //     item.addEventListener('click', function() {
         //         const prizeName = this.querySelector('.prize-name').textContent;
         //         alert(`Â•ñÂìÅËØ¶ÊÉÖÔºö${prizeName}`);
         //     });
         // });

                   // Âä®ÊÄÅÁîüÊàêÁî®Êà∑‰ø°ÊÅØÊï∞ÊçÆÔºàÂÆöÊó∂Êõ¥Êñ∞ÊñáÊ°àÔºâ
          let userInfoUpdateTimer = null;
          
          function generateUserInfoData() {
              const container = document.getElementById('userInfoContainer');
              
              // ÁîüÊàêËÑ±ÊïèÁî®Êà∑Âêç
              const generateDesensitizedName = () => {
                  const prefixes = ['Áî®Êà∑', 'Áé©ÂÆ∂', 'Âπ∏ËøêÂÑø', 'ÊäΩÂ•ñËÄÖ', 'Â∞è‰ºô‰º¥', 'ÊúãÂèã', 'Áî®Êà∑', 'Áé©ÂÆ∂'];
                  const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                  const suffix = Math.floor(Math.random() * 999) + 1;
                  return `${prefix}***${suffix}`;
              };
              
              // ÁîüÊàêÈáëÂ∏ÅÊï∞ÈáèÔºàÁÆÄÂåñ‰∏∫ÊåáÂÆöÁöÑÈáëÂ∏ÅÊï∞ÈáèÔºâ
              const generateCoinAmount = () => {
                  const amounts = [5, 10, 20, 50, 500, 2000];
                  return amounts[Math.floor(Math.random() * amounts.length)];
              };
              
              // ÁÆÄÂåñÁöÑÊ∂àÊÅØÁîüÊàêÂáΩÊï∞
              const generateRandomMessage = () => {
                  const userName = generateDesensitizedName();
                  const coinAmount = generateCoinAmount();
                  return `${userName}ÊäΩ‰∏≠${coinAmount}ÈáëÂ∏Å`;
              };
              
              // Êõ¥Êñ∞ÊñáÊ°àÂÜÖÂÆπ
              const updateUserInfoMessage = () => {
                  const userStatusElement = container.querySelector('.user-status');
                  if (userStatusElement) {
                      const newMessage = generateRandomMessage();
                      userStatusElement.textContent = newMessage;
                      console.log('Êõ¥Êñ∞ÊñáÊ°à:', newMessage);
                  }
              };
              
              console.log('ÂºÄÂßãÁîüÊàêÁî®Êà∑‰ø°ÊÅØÊï∞ÊçÆ');
              
              // Ê∏ÖÁ©∫Áé∞ÊúâÂÜÖÂÆπ
              container.innerHTML = '';
              
              // ÁîüÊàê1‰∏™Áî®Êà∑‰ø°ÊÅØÈ°π
              const initialMessage = generateRandomMessage();
              
              const userInfoItem = document.createElement('div');
              userInfoItem.className = 'user-info-item';
              userInfoItem.innerHTML = `
                  <div class="user-avatar">üë§</div>
                  <div class="user-status">${initialMessage}</div>
              `;
              
              container.appendChild(userInfoItem);
              
              console.log('ÁîüÊàê‰∫Ü1‰∏™Áî®Êà∑‰ø°ÊÅØÈ°π');
              
              // Áõ¥Êé•ÊòæÁ§∫Ôºå‰∏çÈúÄË¶ÅÂàáÊç¢Âä®Áîª
              if (userInfoItem) {
                  userInfoItem.classList.add('active');
              }
              
              // ÂêØÂä®ÂÆöÊó∂Êõ¥Êñ∞ÔºàÊØè3-5ÁßíÊõ¥Êñ∞‰∏ÄÊ¨°Ôºâ
              if (userInfoUpdateTimer) {
                  clearInterval(userInfoUpdateTimer);
              }
              
              userInfoUpdateTimer = setInterval(() => {
                  updateUserInfoMessage();
              }, 3000 + Math.random() * 2000); // 3-5ÁßíÈöèÊú∫Èó¥Èöî
              
              console.log('ÂêØÂä®ÂÆöÊó∂Êõ¥Êñ∞ÊñáÊ°àÂäüËÉΩ');
          }

                     // È°µÈù¢Âç∏ËΩΩÊó∂Ê∏ÖÁêÜÂÆöÊó∂Âô®
                     window.addEventListener('beforeunload', function() {
                         if (userInfoUpdateTimer) {
                             clearInterval(userInfoUpdateTimer);
                             console.log('Ê∏ÖÁêÜÁî®Êà∑‰ø°ÊÅØÊõ¥Êñ∞ÂÆöÊó∂Âô®');
                         }
                     });
                     
                     // È°µÈù¢Âä†ËΩΩÊó∂ÁîüÊàêÁî®Êà∑‰ø°ÊÅØÊï∞ÊçÆ
                        window.addEventListener('load', async function() {
                 console.log('È°µÈù¢Âä†ËΩΩÂÆåÊàêÔºåÂºÄÂßãÂàùÂßãÂåñÁî®Êà∑‰ø°ÊÅØ');
                 await loadVerificationState(); // ÂÖàÂä†ËΩΩÈ™åËØÅÁä∂ÊÄÅ
                 generateUserInfoData();
                 updateDrawQualification();
                 updateDrawCardsDisplay();
                 
                 // Âä†ËΩΩÁî®Êà∑ËÆ¢Âçï
                 if (isVerified && currentUser) {
                     loadUserOrders();
                 }
             });
          
                      // ‰πüÂ∞ùËØïÂú®DOMContentLoadedÊó∂ÊâßË°å
            document.addEventListener('DOMContentLoaded', function() {
                console.log('DOMÂä†ËΩΩÂÆåÊàêÔºåÂºÄÂßãÂàùÂßãÂåñÁî®Êà∑‰ø°ÊÅØ');
                generateUserInfoData();
            });

            // Âú∞ÂùÄÁÆ°ÁêÜÁõ∏ÂÖ≥ÂèòÈáè
            let userAddresses = [];
            let editingAddressId = null;
            let selectedAddressId = null; // Êñ∞Â¢ûÔºöÈÄâ‰∏≠ÁöÑÂú∞ÂùÄID

            // Ëé∑ÂèñÁî®Êà∑ÈªòËÆ§Âú∞ÂùÄ - ÂèÇËÄÉlottery.htmlÁöÑÂú∞ÂùÄËé∑ÂèñÈÄªËæë
            async function getUserDefaultAddress() {
                try {
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/address/?user_id=${currentUser.user_id}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok && data.data.addresses && data.data.addresses.length > 0) {
                        // ËøîÂõûÁ¨¨‰∏Ä‰∏™Âú∞ÂùÄ‰Ωú‰∏∫ÈªòËÆ§Âú∞ÂùÄ
                        return data.data.addresses[0];
                    } else {
                        return null;
                    }
                } catch (error) {
                    console.error('Ëé∑ÂèñÁî®Êà∑Âú∞ÂùÄÂ§±Ë¥•:', error);
                    return null;
                }
            }

            // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÂú∞ÂùÄ
            function getSelectedAddress() {
                if (!selectedAddressId) {
                    // Â¶ÇÊûúÊ≤°ÊúâÈÄâ‰∏≠Âú∞ÂùÄÔºåËøîÂõûÈªòËÆ§Âú∞ÂùÄÔºàÁ¨¨‰∏Ä‰∏™Âú∞ÂùÄÔºâ
                    return userAddresses.length > 0 ? userAddresses[0] : null;
                }
                return userAddresses.find(addr => addr.id === selectedAddressId) || userAddresses[0];
            }

            // ÈÄâÊã©Âú∞ÂùÄ
            function selectAddress(addressId) {
                selectedAddressId = addressId;
                // Êõ¥Êñ∞Âú∞ÂùÄÂàóË°®ÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
                renderAddressList();
            }

            // Âä†ËΩΩÁî®Êà∑Âú∞ÂùÄ
            async function loadUserAddresses() {
                try {
                    showToast('Ê≠£Âú®Âä†ËΩΩÂú∞ÂùÄ‰ø°ÊÅØ...', 'info');
                    
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/address/?user_id=${currentUser.user_id}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok) {
                        userAddresses = data.data.addresses || [];
                        // ËÆæÁΩÆÈªòËÆ§ÈÄâ‰∏≠Âú∞ÂùÄÔºàÁ¨¨‰∏Ä‰∏™Âú∞ÂùÄÊàñÈªòËÆ§Âú∞ÂùÄÔºâ
                        if (userAddresses.length > 0) {
                            const defaultAddress = userAddresses.find(addr => addr.is_default) || userAddresses[0];
                            selectedAddressId = defaultAddress.id;
                        }
                        showAddressModal();
                    } else {
                        console.error('Âä†ËΩΩÂú∞ÂùÄÂ§±Ë¥•:', data);
                        showToast(data.message || 'Âä†ËΩΩÂú∞ÂùÄÂ§±Ë¥•', 'error');
                        // Âç≥‰ΩøÂä†ËΩΩÂ§±Ë¥•‰πüÊòæÁ§∫ÂºπÁ™óÔºåÂÖÅËÆ∏Áî®Êà∑Ê∑ªÂä†Âú∞ÂùÄ
                        userAddresses = [];
                        showAddressModal();
                    }
                } catch (error) {
                    console.error('Âú∞ÂùÄAPIÈîôËØØ:', error);
                    showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï', 'error');
                    // Âç≥‰ΩøÁΩëÁªúÈîôËØØ‰πüÊòæÁ§∫ÂºπÁ™óÔºåÂÖÅËÆ∏Áî®Êà∑Ê∑ªÂä†Âú∞ÂùÄ
                    userAddresses = [];
                    showAddressModal();
                }
            }

            // ÊòæÁ§∫Âú∞ÂùÄÁÆ°ÁêÜÂºπÁ™ó
            function showAddressModal() {
                const modal = document.getElementById('addressModal');
                modal.style.display = 'block';
                renderAddressList();
            }

            // ÂÖ≥Èó≠Âú∞ÂùÄÁÆ°ÁêÜÂºπÁ™ó
            function closeAddressModal() {
                const modal = document.getElementById('addressModal');
                modal.style.display = 'none';
                hideAddressForm();
            }

            // ÊòæÁ§∫Áõ≤ÁõíËÆ¢ÂçïÂºπÁ™ó
            function showOrdersModal() {
                const modal = document.getElementById('ordersModal');
                modal.style.display = 'block';
                
                loadModalOrders();
                
                // Ê∑ªÂä†ÊªöÂä®ÁõëÂê¨Âô®
                const container = document.getElementById('modalOrdersContainer');
                if (container) {
                    container.addEventListener('scroll', handleModalScroll);
                }
            }

            // ÂÖ≥Èó≠Áõ≤ÁõíËÆ¢ÂçïÂºπÁ™ó
            function closeOrdersModal() {
                const modal = document.getElementById('ordersModal');
                modal.style.display = 'none';
                
                // ÁßªÈô§ÊªöÂä®ÁõëÂê¨Âô®
                const container = document.getElementById('modalOrdersContainer');
                if (container) {
                    container.removeEventListener('scroll', handleModalScroll);
                }
            }

            // Âä†ËΩΩÂºπÁ™ó‰∏≠ÁöÑÊäΩÂ•ñËÆ∞ÂΩï
            async function loadModalOrders(page = 1, append = false) {
                if (isLoadingRecords) return;
                
                try {
                    isLoadingRecords = true;
                    const loadingElement = document.getElementById('modalLoadingOrders');
                    const container = document.getElementById('modalOrdersContainer');
                    
                    if (page === 1 && container) {
                        // ÈáçÁΩÆÁä∂ÊÄÅ
                        currentPage = 1;
                        hasMoreRecords = true;
                        container.innerHTML = '';
                    }
                    
                    // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
                    if (loadingElement) {
                        loadingElement.style.display = 'block';
                    }
                    
                    // Ë∞ÉÁî®Êñ∞ÁöÑÊäΩÂ•ñËÆ∞ÂΩïAPI
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '')}/lottery-draw-records/?user_id=${currentUser.user_id}&page=${page}&per_page=10`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok && data.code === 200 && data.data.records) {
                        // ÊòæÁ§∫Áî®Êà∑ÁöÑÊäΩÂ•ñËÆ∞ÂΩï
                        renderModalRecords(data.data.records, append);
                        
                        // Êõ¥Êñ∞ÂàÜÈ°µÁä∂ÊÄÅ
                        hasMoreRecords = data.data.has_next;
                        currentPage = page;
                    } else {
                        console.error('Âä†ËΩΩÊäΩÂ•ñËÆ∞ÂΩïÂ§±Ë¥•:', data);
                        if (page === 1) {
                            showToast('Âä†ËΩΩÊäΩÂ•ñËÆ∞ÂΩïÂ§±Ë¥•', 'error');
                            showNoModalOrders();
                        }
                    }
                } catch (error) {
                    console.error('ÊäΩÂ•ñËÆ∞ÂΩïAPIÈîôËØØ:', error);
                    if (page === 1) {
                        showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï', 'error');
                        showNoModalOrders();
                    }
                } finally {
                    isLoadingRecords = false;
                    const loadingElement = document.getElementById('modalLoadingOrders');
                    if (loadingElement) {
                        loadingElement.style.display = 'none';
                    }
                    
                    // ÁßªÈô§ËÆ¢ÂçïÂºπÁ™óloadingÁä∂ÊÄÅ
                    const ordersModal = document.getElementById('ordersModal');
                    if (ordersModal) {
                        ordersModal.classList.remove('loading');
                    }
                }
            }

            // Ê∏≤ÊüìÂºπÁ™ó‰∏≠ÁöÑÊäΩÂ•ñËÆ∞ÂΩïÂàóË°®
            function renderModalRecords(records, append = false) {
                const container = document.getElementById('modalOrdersContainer');
                const loadingElement = document.getElementById('modalLoadingOrders');
                
                // ÈöêËóèÂä†ËΩΩÁä∂ÊÄÅ
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }
                
                if (records.length === 0 && !append) {
                    showNoModalOrders();
                    return;
                }
                
                const recordsHTML = records.map(record => {
                    const statusText = record.is_special ? 'ÁâπÊÆäÂ•ñÂä±' : 'ÊôÆÈÄöÈáëÂ∏Å';
                    const statusClass = record.is_special ? 'special' : 'completed';
                    
                    // Ê†πÊçÆÂ•ñÂìÅÁ±ªÂûãÊòæÁ§∫‰∏çÂêåÁöÑÂõæÊ†á
                    let icon = 'üéÅ';
                    if (record.prize_type === 5) icon = 'üí∞'; // ÈáëÂ∏Å
                    else if (record.prize_type === 4) icon = 'üéØ'; // ÂõõÁ≠âÂ•ñ
                    else if (record.prize_type === 3) icon = 'üèÜ'; // ‰∏âÁ≠âÂ•ñ
                    else if (record.prize_type === 2) icon = 'ü•à'; // ‰∫åÁ≠âÂ•ñ
                    else if (record.prize_type === 1) icon = 'ü•á'; // ‰∏ÄÁ≠âÂ•ñ
                    
                    return `
                        <div class="lottery-record-item">
                            <div class="lottery-record-header">
                                <div class="lottery-record-info">
                                    <div class="lottery-record-icon">
                                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">${icon}</div>
                                    </div>
                                    <div class="lottery-record-details">
                                        ${record.earned_coins > 0 ? `<div class="detail-item">
                                            <strong>Ëé∑ÂæóÔºö</strong>${record.earned_coins}üí∞
                                        </div>` : ''}
                                    </div>
                                </div>
                                <div class="lottery-record-status ${statusClass}">${statusText}</div>
                            </div>
                            <div class="lottery-record-content">
                                <div class="detail-item">
                                    <strong>ÊäΩÂ•ñÊó∂Èó¥Ôºö</strong>${record.draw_time}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                if (container) {
                    if (append) {
                        container.innerHTML += recordsHTML;
                    } else {
                        container.innerHTML = recordsHTML;
                    }
                }
                
                // Â¶ÇÊûúÊ≤°ÊúâÊõ¥Â§öÊï∞ÊçÆÔºåÊòæÁ§∫Âä†ËΩΩÂÆåÊàêÊèêÁ§∫
                if (!hasMoreRecords && records.length > 0 && container) {
                    container.innerHTML += `
                        <div style="text-align: center; padding: 20px; color: #999; font-size: 0.9rem;">
                            Â∑≤Âä†ËΩΩÂÖ®ÈÉ®ËÆ∞ÂΩï
                        </div>
                    `;
                }
            }
            
            // Ëé∑ÂèñÂ•ñÂìÅÁ±ªÂûãÊñáÊú¨
            function getPrizeTypeText(prizeType) {
                switch(prizeType) {
                    case 1: return '‰∏ÄÁ≠âÂ•ñ';
                    case 2: return '‰∫åÁ≠âÂ•ñ';
                    case 3: return '‰∏âÁ≠âÂ•ñ';
                    case 4: return 'ÂõõÁ≠âÂ•ñ';
                    case 5: return '‰∫îÁ≠âÂ•ñ';
                    default: return 'Êú™Áü•Á±ªÂûã';
                }
            }

            // Â§ÑÁêÜÂºπÁ™óÊªöÂä®‰∫ã‰ª∂
            function handleModalScroll(event) {
                const container = event.target;
                const scrollTop = container.scrollTop;
                const scrollHeight = container.scrollHeight;
                const clientHeight = container.clientHeight;
                
                // ÂΩìÊªöÂä®Âà∞Â∫ïÈÉ®Êó∂Âä†ËΩΩÊõ¥Â§öÊï∞ÊçÆ
                if (scrollTop + clientHeight >= scrollHeight - 50 && hasMoreRecords && !isLoadingRecords) {
                    loadModalOrders(currentPage + 1, true);
                }
            }
            
            // ÊòæÁ§∫ÂºπÁ™ó‰∏≠Êó†ËÆ∞ÂΩï‰ø°ÊÅØ
            function showNoModalOrders() {
                const container = document.getElementById('modalOrdersContainer');
                const loadingElement = document.getElementById('modalLoadingOrders');
                
                // ÈöêËóèÂä†ËΩΩÁä∂ÊÄÅ
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }
                
                if (container) {
                    container.innerHTML = `
                        <div class="no-orders">
                            <div class="no-orders-icon">üìã</div>
                            <div>ÊöÇÊó†ÊäΩÂ•ñËÆ∞ÂΩï</div>
                            <div style="font-size: 0.9rem; margin-top: 10px; color: #999;">Âø´ÂéªÂèÇ‰∏éÊäΩÂ•ñÂêßÔºÅ</div>
                        </div>
                    `;
                }
            }

            // Ê∏≤ÊüìÂú∞ÂùÄÂàóË°®
            function renderAddressList() {
                const addressList = document.getElementById('addressList');
                
                if (userAddresses.length === 0) {
                    addressList.innerHTML = `
                        <div class="no-address">
                            <div class="no-address-icon">üìç</div>
                            <div>ÊöÇÊó†Êî∂Ë¥ßÂú∞ÂùÄ</div>
                            <div style="font-size: 0.9rem; margin-top: 10px; color: #999;">ËØ∑Ê∑ªÂä†Êî∂Ë¥ßÂú∞ÂùÄ‰ª•‰æøÂÖëÊç¢Áõ≤Áõí</div>
                        </div>
                    `;
                } else {
                    addressList.innerHTML = userAddresses.map(address => {
                        const isSelected = selectedAddressId === address.id || (!selectedAddressId && address.is_default);
                        return `
                            <div class="address-item ${address.is_default ? 'default' : ''} ${isSelected ? 'selected' : ''}" data-id="${address.id}" onclick="selectAddress('${address.id}')" style="cursor: pointer;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="flex: 1;">
                                        <div class="address-name">${address.name}</div>
                                        <div class="address-phone">${address.phone}</div>
                                        <div class="address-detail">${address.address}</div>
                                    </div>
                                    <div style="color: #ffd700; font-size: 1.2rem;">
                                        ${isSelected ? '‚úì' : '‚óã'}
                                    </div>
                                </div>
                                <div style="margin-top: 10px; display: flex; gap: 10px;">
                                    <button onclick="event.stopPropagation(); editAddress('${address.id}')" style="padding: 5px 10px; background: #f1f1f1; border: none; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">ÁºñËæë</button>
                                    <button onclick="event.stopPropagation(); deleteAddress('${address.id}')" style="padding: 5px 10px; background: #ff4757; color: white; border: none; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">Âà†Èô§</button>
                                </div>
                            </div>
                        `;
                    }).join('');
                }
            }

            // ÊòæÁ§∫Âú∞ÂùÄË°®Âçï
            function showAddressForm(addressId = null) {
                const form = document.getElementById('addressForm');
                const nameInput = document.getElementById('addressName');
                const phoneInput = document.getElementById('addressPhone');
                const detailInput = document.getElementById('addressDetail');
                const defaultCheckbox = document.getElementById('addressDefault');
                
                // Ê∏ÖÁ©∫Ë°®Âçï
                nameInput.value = '';
                phoneInput.value = '';
                detailInput.value = '';
                defaultCheckbox.checked = false;
                
                if (addressId) {
                    // ÁºñËæëÊ®°Âºè
                    editingAddressId = addressId;
                    const address = userAddresses.find(addr => addr.id === addressId);
                    if (address) {
                        nameInput.value = address.name;
                        phoneInput.value = address.phone;
                        detailInput.value = address.address;
                        defaultCheckbox.checked = address.is_default;
                    }
                } else {
                    // Êñ∞Â¢ûÊ®°Âºè
                    editingAddressId = null;
                }
                
                form.style.display = 'block';
            }

            // ÈöêËóèÂú∞ÂùÄË°®Âçï
            function hideAddressForm() {
                const form = document.getElementById('addressForm');
                form.style.display = 'none';
                editingAddressId = null;
            }

            // ‰øùÂ≠òÂú∞ÂùÄ
            async function saveAddress() {
                const nameInput = document.getElementById('addressName');
                const phoneInput = document.getElementById('addressPhone');
                const detailInput = document.getElementById('addressDetail');
                const defaultCheckbox = document.getElementById('addressDefault');
                
                const name = nameInput.value.trim();
                const phone = phoneInput.value.trim();
                const address = detailInput.value.trim();
                const isDefault = defaultCheckbox.checked;
                
                if (!name || !phone || !address) {
                    showToast('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÂú∞ÂùÄ‰ø°ÊÅØ', 'error');
                    return;
                }
                
                // È™åËØÅÊâãÊú∫Âè∑Ê†ºÂºè
                const phoneRegex = /^1[3-9]\d{9}$/;
                if (!phoneRegex.test(phone)) {
                    showToast('ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÊâãÊú∫Âè∑Á†Å', 'error');
                    return;
                }
                
                try {
                    const requestData = {
                        user_id: currentUser.user_id,
                        name: name,
                        phone: phone,
                        address: address,
                        is_default: isDefault
                    };
                    
                    let url = `${API_BASE_URL.replace('/lottery', '/shop')}/address/`;
                    let method = 'POST';
                    
                    if (editingAddressId) {
                        // ÁºñËæëÊ®°Âºè
                        url = `${API_BASE_URL.replace('/lottery', '/shop')}/address/`;
                        method = 'PUT';
                        requestData.id = editingAddressId;
                    }
                    
                    const response = await fetch(url, {
                        method: method,
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(requestData)
                    });

                    const data = await response.json();
                    
                    if (response.ok) {
                        showToast(editingAddressId ? 'Âú∞ÂùÄÊõ¥Êñ∞ÊàêÂäü' : 'Âú∞ÂùÄÊ∑ªÂä†ÊàêÂäü', 'success');
                        hideAddressForm();
                        // ÈáçÊñ∞Âä†ËΩΩÂú∞ÂùÄÂàóË°®
                        await loadUserAddresses();
                    } else {
                        showToast(data.message || '‰øùÂ≠òÂú∞ÂùÄÂ§±Ë¥•', 'error');
                    }
                } catch (error) {
                    console.error('‰øùÂ≠òÂú∞ÂùÄAPIÈîôËØØ:', error);
                    showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï', 'error');
                }
            }

            // ÁºñËæëÂú∞ÂùÄ
            function editAddress(addressId) {
                showAddressForm(addressId);
            }

            // Âà†Èô§Âú∞ÂùÄ
            async function deleteAddress(addressId) {
                if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Âú∞ÂùÄÂêóÔºü')) {
                    return;
                }
                
                try {
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/address/?id=${addressId}`, {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok) {
                        showToast('Âú∞ÂùÄÂà†Èô§ÊàêÂäü', 'success');
                        // ÈáçÊñ∞Âä†ËΩΩÂú∞ÂùÄÂàóË°®
                        await loadUserAddresses();
                    } else {
                        showToast(data.message || 'Âà†Èô§Âú∞ÂùÄÂ§±Ë¥•', 'error');
                    }
                } catch (error) {
                    console.error('Âà†Èô§Âú∞ÂùÄAPIÈîôËØØ:', error);
                    showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï', 'error');
                }
            }

                         // ÂèñÊ∂àÂú∞ÂùÄÁºñËæë
             function cancelAddress() {
                 hideAddressForm();
             }

             // Á°ÆËÆ§ÂÖëÊç¢Áõ≤Áõí
             async function confirmBlindBoxOrder() {
                 // Ê£ÄÊü•ÊòØÂê¶ÊúâÂú∞ÂùÄ
                 if (userAddresses.length === 0) {
                     showToast('ËØ∑ÂÖàÊ∑ªÂä†Êî∂Ë¥ßÂú∞ÂùÄ', 'error');
                     return;
                 }
                 
                 // Ê£ÄÊü•ÊòØÂê¶ÈÄâÊã©‰∫ÜÂú∞ÂùÄ
                 const selectedAddress = getSelectedAddress();
                 if (!selectedAddress) {
                     showToast('ËØ∑ÈÄâÊã©‰∏Ä‰∏™Êî∂Ë¥ßÂú∞ÂùÄ', 'error');
                     return;
                 }
                 
                 try {
                     // ÂÖ≥Èó≠ÂºπÁ™ó
                     closeAddressModal();
                     
                     // ÊâßË°åÂÖëÊç¢ÈÄªËæë
                     await createBlindBoxOrder();
                 } catch (error) {
                     console.error('Á°ÆËÆ§ËÆ¢ÂçïÂ§±Ë¥•:', error);
                 }
             }

             // Âä†ËΩΩÁî®Êà∑Áõ≤ÁõíËÆ¢Âçï
             async function loadUserOrders() {
                 if (!currentUser || !currentUser.user_id) {
                     console.log('Áî®Êà∑Êú™È™åËØÅÔºåË∑≥ËøáÂä†ËΩΩËÆ¢Âçï');
                     return;
                 }

                 try {
                     console.log('Ê≠£Âú®Âä†ËΩΩÁî®Êà∑Áõ≤ÁõíËÆ¢Âçï...');
                     const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/records/?user_id=${currentUser.user_id}`, {
                         method: 'GET',
                         headers: {
                             'Content-Type': 'application/json',
                         }
                     });

                     const data = await response.json();
                     
                     if (response.ok && data.code === 200) {
                         // ËøáÊª§Âá∫Áõ≤ÁõíËÆ¢Âçï
                         const blindBoxOrders = data.data.records.filter(order => order.item_name && order.item_name.includes('Áõ≤Áõí'));
                         renderOrders(blindBoxOrders);
                     } else {
                         console.error('Âä†ËΩΩËÆ¢ÂçïÂ§±Ë¥•:', data);
                         showNoOrders();
                     }
                 } catch (error) {
                     console.error('Âä†ËΩΩËÆ¢ÂçïAPIÈîôËØØ:', error);
                     showNoOrders();
                 }
             }

             // Ê∏≤ÊüìËÆ¢ÂçïÂàóË°®
             function renderOrders(orders) {
                 const container = document.getElementById('ordersContainer');
                 const loadingElement = document.getElementById('loadingOrders');
                 
                 // ÈöêËóèÂä†ËΩΩÁä∂ÊÄÅ
                 if (loadingElement) {
                     loadingElement.style.display = 'none';
                 }

                 if (!orders || orders.length === 0) {
                     showNoOrders();
                     return;
                 }

                 const ordersHTML = orders.map(order => `
                     <div class="blind-box-order-item">
                         <div class="blind-box-order-header">
                             <div class="blind-box-order-info">
                                 <div class="blind-box-order-icon">
                                     <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üì¶</div>
                                 </div>
                                 <div class="blind-box-order-details">
                                     <h4>${order.item_name} ${order.order_id}</h4>
                                     <div style="color: #ffd700; font-size: 0.9rem;">${order.exchange_time}</div>
                                 </div>
                             </div>
                             <div class="blind-box-order-status ${order.status}">${getStatusText(order.status)}</div>
                         </div>
                         <div class="blind-box-order-content">
                             <div class="blind-box-order-details-grid">
                                 
                                 <div class="detail-item">
                                     <strong>ËÅîÁ≥ª‰∫∫Ôºö</strong>${order.contact_name}
                                 </div>
                                 <div class="detail-item">
                                     <strong>ËÅîÁ≥ªÁîµËØùÔºö</strong>${order.contact_phone}
                                 </div>
                                 <div class="detail-item">
                                     <strong>Êî∂Ë¥ßÂú∞ÂùÄÔºö</strong>${order.contact_address}
                                 </div>
                             </div>
                         </div>
                     </div>
                 `).join('');

                 container.innerHTML = ordersHTML;
             }

             // ÊòæÁ§∫Êó†ËÆ¢ÂçïÁä∂ÊÄÅ
             function showNoOrders() {
                 const container = document.getElementById('ordersContainer');
                 const loadingElement = document.getElementById('loadingOrders');
                 
                 if (loadingElement) {
                     loadingElement.style.display = 'none';
                 }

                 container.innerHTML = `
                     <div class="no-orders">
                         <div class="no-orders-icon">üì¶</div>
                         <div>ÊöÇÊó†Áõ≤ÁõíËÆ¢Âçï</div>
                         <div style="font-size: 0.9rem; margin-top: 10px; color: #999;">ÂÖëÊç¢Áõ≤ÁõíÂêéËÆ¢ÂçïÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå</div>
                     </div>
                 `;
             }

             // Ëé∑ÂèñËÆ¢ÂçïÁä∂ÊÄÅÊñáÊú¨
             function getStatusText(status) {
                 const statusMap = {
                     'pending': 'ÂæÖÂèëË¥ß',
                     'shipped': 'Â∑≤ÂèëË¥ß',
                     'delivered': 'Â∑≤ÈÄÅËææ'
                 };
                 return statusMap[status] || status;
             }

                        // Áõ≤ÁõíÂïÜÂìÅÊï∞ÊçÆ
           const blindBoxProducts = [
               {
                   id: 1,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/04157b5c-c1f8-4b2a-8d7c-b644fdf509eb/1.jpg',
                   description: 'Á•ûÁßòÁõ≤Áõí\nÂÜÖÂê´ÊÉäÂñúÂ•ΩÁ§º'
               },
               {
                   id: 2,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/d81dce78-e636-4ada-a6df-d758bae1aa30/2.jpg',
                   description: 'Ê∏∏ÊàèÂë®Ëæπ\nÁ≤æÁæéÊâãÂäûÊ®°Âûã'
               },
               {
                   id: 3,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/1b95d0e8-1b95-4732-8ed1-355c7ba04590/3.jpg',
                   description: '„ÄêÈáëËâ≤‰º†ËØ¥„Äë\nÊñ∞Ê¨æÈìÅÈÅìÂéüÁ•ûÊñóÁ†¥'
               },
               {
                   id: 4,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/cfe1ee97-6b9c-4abb-bb42-adbeaca27f3f/gzh.png',
                   description: 'ÂÖ¨‰ºóÂè∑\nÂõûÂ§çËÆ¢ÂçïÂè∑Ëé∑ÂèñÁâ©ÊµÅ‰ø°ÊÅØ'
               }
           ];

             // Ê∏≤ÊüìÁõ≤ÁõíÂïÜÂìÅ
             function renderBlindBoxProducts() {
                 const container = document.getElementById('blindBoxProductsGrid');
                 
                 if (!container) {
                     console.log('Áõ≤ÁõíÂïÜÂìÅÂÆπÂô®Êú™ÊâæÂà∞');
                     return;
                 }

                                const productsHTML = blindBoxProducts.map(product => `
                   <div class="blind-box-product-item" onclick="handleBlindBoxProductClick(${product.id})">
                       <div class="blind-box-product-image">
                           <img src="${product.image}" alt="Áõ≤ÁõíÂïÜÂìÅ" onerror="this.style.display='none'">
                       </div>
                       <div class="blind-box-product-description">${product.description}</div>
                   </div>
               `).join('');

                 container.innerHTML = productsHTML;
             }

             // Â§ÑÁêÜÁõ≤ÁõíÂïÜÂìÅÁÇπÂáª
             function handleBlindBoxProductClick(productId) {
                 console.log('ÁÇπÂáª‰∫ÜÁõ≤ÁõíÂïÜÂìÅ:', productId);
                 showToast('Áõ≤ÁõíÂïÜÂìÅÊöÇ‰∏çÊîØÊåÅËá™ÈÄâ...', 'info');
             }

             // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñÁõ≤ÁõíÂïÜÂìÅ
             window.addEventListener('load', function() {
                 // Ê£ÄÊµãËÆæÂ§áÁ±ªÂûã
                 checkDeviceType();
                 
                 // ÂàùÂßãÂåñÈü≥Êïà
                 initSounds();
                 
                 // ÊÅ¢Â§çÈü≥ÊïàËÆæÁΩÆ
                 const savedSoundEnabled = localStorage.getItem('soundEnabled');
                 if (savedSoundEnabled !== null) {
                     soundEnabled = savedSoundEnabled === 'true';
                     const soundControl = document.getElementById('soundControl');
                     if (soundControl) {
                         if (soundEnabled) {
                             soundControl.textContent = 'üîä';
                             soundControl.classList.remove('muted');
                         } else {
                             soundControl.textContent = 'üîá';
                             soundControl.classList.add('muted');
                         }
                     }
                 }
                 
                 renderBlindBoxProducts();
             });
             
             // Ê£ÄÊµãËÆæÂ§áÁ±ªÂûãÂπ∂ÊòæÁ§∫Áõ∏Â∫îÂÜÖÂÆπ
             function checkDeviceType() {
                 const isMobile = window.innerWidth < 768;
                 const pcTip = document.getElementById('pcTip');
                 const mobileContainer = document.getElementById('mobileContainer');
                 
                 if (!isMobile) {
                     // PCÁ´ØÊòæÁ§∫ÊèêÁ§∫È°µÈù¢
                     pcTip.style.display = 'flex';
                     mobileContainer.style.display = 'none';
                 } else {
                     // ÁßªÂä®Á´ØÊòæÁ§∫Ê≠£Â∏∏ÂÜÖÂÆπ
                     pcTip.style.display = 'none';
                     mobileContainer.style.display = 'block';
                 }
             }
             
             // ÊòæÁ§∫ÁßªÂä®Á´ØÂÜÖÂÆπÔºàÁî®Êà∑ÁÇπÂáª"ÊàëÁü•ÈÅì‰∫Ü"ÂêéÔºâ
             function showMobileContent() {
                 const pcTip = document.getElementById('pcTip');
                 const mobileContainer = document.getElementById('mobileContainer');
                 
                 pcTip.style.display = 'none';
                 mobileContainer.style.display = 'block';
             }

    </script>
    </div><!-- ÁßªÂä®Á´ØÂÆπÂô®ÁªìÊùü -->
</body>
</html> 
