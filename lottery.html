<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç™¾åˆ†ç™¾ä¸­å¥– - æŠ½å¥–èµ¢å¥½ç¤¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'å¾®è½¯é›…é»‘', sans-serif;
            background: url('https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/ee9cdd35-1a1b-4654-841b-fda1f4d56e26/bg.png') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            position: relative;
        }

        /* é”®ç›˜è°ƒèµ·æ—¶çš„æ ·å¼å¤„ç† */
        @media screen and (max-height: 500px) {
            body {
                min-height: 100vh;
                height: 100vh;
            }
            
            .game-machine {
                min-height: 400px;
            }
            
            .draw-qualification {
                bottom: 7%;
                font-size: 0.8rem;
            }
            
            .controls {
                bottom: 21%;
            }
            
            .user-info-bar {
                top: 6%;
            }
            
            .main-screen {
                top: 18%;
                height: 60%;
            }
            
            .draw-buttons {
                bottom: 2%;
            }
        }
        
        /* é”®ç›˜è°ƒèµ·æ—¶çš„é¢å¤–æ ·å¼ */
        body.keyboard-open {
            height: 100vh;
            overflow: hidden;
        }
        
        body.keyboard-open .game-machine {
            transform: none;
            min-height: 350px;
            margin: 0 15px 15px;
        }
        
        body.keyboard-open .draw-qualification {
            position: relative;
            bottom: auto;
            margin-top: 10px;
            font-size: 0.8rem;
        }
        
        body.keyboard-open .controls {
            position: relative;
            bottom: auto;
            margin-top: 10px;
        }
        
        body.keyboard-open .user-info-bar {
            top: 6%;
        }
        
        /* é”®ç›˜è°ƒèµ·æ—¶çš„main-screené€‚é… */
        body.keyboard-open .main-screen {
            position: relative;
            top: auto;
            height: auto;
            min-height: 300px;
            margin: 10px 0;
            padding: 20px 15px;
        }

        body.keyboard-open .draw-cards {
            height: auto;
            min-height: 200px;
            margin-bottom: 15px;
        }

        body.keyboard-open .draw-placeholder {
            padding: 20px 15px;
            min-height: 150px;
        }

        body.keyboard-open .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        body.keyboard-open .placeholder-text {
            font-size: 1.2rem;
            margin-bottom: 8px;
        }

        body.keyboard-open .placeholder-subtext {
            font-size: 0.9rem;
        }

        body.keyboard-open .draw-buttons {
            position: static;
            margin-top: 15px;
            gap: 15px;
            padding: 0;
        }

        body.keyboard-open .verification-form {
            padding: 10px 15px;
            border-radius: 20px;
        }

        body.keyboard-open .verification-input {
            font-size: 16px;
            padding: 5px 0;
        }

        body.keyboard-open .verification-btn {
            padding: 8px 16px;
            font-size: 14px;
            border-radius: 15px;
        }

        body.keyboard-open .draw-option-btn {
            padding: 10px 20px;
            font-size: 14px;
            min-width: 120px;
        }
        
        body.keyboard-open .draw-buttons {
            position: relative;
            bottom: auto;
            margin-top: 10px;
        }
        
        /* è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶çš„æ ·å¼ */
        .verification-input:focus,
        .address-input:focus,
        .address-textarea:focus {
            transform: none;
            transition: none;
        }
        
        /* é”®ç›˜è°ƒèµ·æ—¶çš„æ›´ç¨³å®šå¸ƒå±€ */
        body.keyboard-open .game-machine {
            position: relative;
            transform: none;
            min-height: 400px;
            margin: 0 15px 10px;
            padding: 15px 0;
        }
        
        body.keyboard-open .draw-qualification {
            position: static;
            margin: 10px 0;
            padding: 5px 0;
        }
        
        body.keyboard-open .controls {
            position: static;
            margin: 10px 0;
            justify-content: center;
        }
        
        body.keyboard-open .draw-buttons {
            position: static;
            margin: 10px 0;
            justify-content: center;
        }
        
        /* é”®ç›˜è°ƒèµ·æ—¶çš„draw-placeholderæ ·å¼ */
        body.keyboard-open .draw-placeholder {
            height: auto;
            min-height: 200px;
            padding: 20px 15px;
            border-radius: 15px;
            font-size: 14px;
        }
        
        body.keyboard-open .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        body.keyboard-open .placeholder-text {
            font-size: 1rem;
            margin-bottom: 8px;
        }
        
        body.keyboard-open .placeholder-subtext {
            font-size: 0.8rem;
        }
        
        /* ç¡®ä¿é”®ç›˜è°ƒèµ·æ—¶å†…å®¹ä¸è¢«å‹ç¼© */
        body.keyboard-open .main-screen {
            position: relative;
            top: auto;
            height: auto;
            min-height: 200px;
            margin: 10px 0;
        }
        
        /* é”®ç›˜è°ƒèµ·æ—¶ä¿æŒèƒŒæ™¯å›¾ç‰‡å®Œæ•´æ€§ */
        body.keyboard-open .game-machine {
            min-height: 350px;
            max-height: 500px;
        }

        /* éŸ³æ•ˆæ§åˆ¶æŒ‰é’®æ ·å¼ */
        .sound-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-size: 1.5rem;
        }
        
        .sound-control:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }
        
        .sound-control.muted {
            opacity: 0.5;
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* èƒŒæ™¯è£…é¥°æ•ˆæœ - å·²ç§»é™¤ï¼Œä½¿ç”¨æ–°çš„èƒŒæ™¯å›¾ç‰‡ */

        /* é¡¶éƒ¨åŒºåŸŸ */
        .header {
            text-align: center;
            padding: 20px 15px 30px;
            position: relative;
        }

        .main-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: white;
            margin-bottom: 20px;
            opacity: 0.9;
        }



        /* å¤´éƒ¨æ ‡é¢˜å›¾ç‰‡ */
        .header-title-img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            max-height: 120px;
            width: auto;
        }

        /* æ¸¸æˆæœºä¸»ä½“ */
        .game-machine {
            background: url('https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/e9dae13a-12ec-42a4-b566-93db19c0354b/yxj.png') no-repeat center center;
            background-size: 100% 100%;
            margin: 0 15px 30px;
            border-radius: 25px;
            padding: 20px 0;
            /* box-shadow: 0 10px 30px rgba(0,0,0,0.3); */
            position: relative;
            min-height: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* ç”¨æˆ·ä¿¡æ¯æ  - å›ºå®šåœ¨å›¾ç‰‡é¡¶éƒ¨åŒºåŸŸ */
        .user-info-bar {
            position: absolute;
            top: 6%;           /* è·ç¦»é¡¶éƒ¨8% */
            left: 17%;         /* è·ç¦»å·¦ä¾§15% */
            width: 70%;        /* å®½åº¦å 70% */
            padding: 8px 15px;
            justify-content: center;
            display: flex;
            align-items: center;
            z-index: 10;
        }

        /* åˆ‡æ¢å®¹å™¨ */
        .scroll-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ç”¨æˆ·ä¿¡æ¯é¡¹ */
        .user-info-item {
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.5s ease;
            position: relative;
            width: 100%;
            height: 100%;
            justify-content: center;
        }

        .user-info-item.active {
            opacity: 1;
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #ffd700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #333;
        }

        .user-status {
            color: white;
            font-size: 0.7rem;
            flex: 1;
        }

        /* ä¸»å±å¹•åŒºåŸŸ - é‡æ–°è®¾è®¡å¸ƒå±€ */
        .main-screen {
            position: absolute;
            top: 13%;           /* è°ƒæ•´é¡¶éƒ¨ä½ç½®ï¼Œç»™ç”¨æˆ·ä¿¡æ¯æ ç•™æ›´å¤šç©ºé—´ */
            left: 3%;          /* å‡å°‘å·¦è¾¹è· */
            width: 94%;        /* å¢åŠ å®½åº¦åˆ©ç”¨ç‡ */
            height: 60%;       /* å¢åŠ é«˜åº¦ï¼Œæä¾›æ›´å¤šå†…å®¹ç©ºé—´ */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 0 3vw;
            border-radius: 20px;
          
           
        }

        /* æŠ½å¥–å¡ç‰‡åŒºåŸŸ - é‡æ–°è®¾è®¡ */
        .draw-cards {
            width: 100%;
            height: 70%;       /* å æ®ä¸»è¦ç©ºé—´ */
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-bottom: 2vw;
        }

        /* æŠ½å¥–å ä½ç¬¦ - ä¼˜åŒ–æ ·å¼ */
        .draw-placeholder {
            width: 80%;
            height: 80%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            border-radius: 15px;
            padding: 4vw;
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .draw-placeholder:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .placeholder-icon {
            font-size: 8vw;
            margin-bottom: 3vw;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .placeholder-text {
            font-size: 4vw;
            font-weight: 600;
            color: #333;
            margin-bottom: 2vw;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .placeholder-subtext {
            font-size: 2.5vw;
            color: #666;
            text-align: center;
            line-height: 1.4;
        }

        /* å¥–å“ç½‘æ ¼ */
        .prize-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 3vw;
            margin-bottom: 5vw;
            width: 100%;
            max-width: 90%;
        }

        .prize-item {
            background: #fff5f5;
            border-radius: 4vw;
            padding: 4vw 2vw;
            text-align: center;
            box-shadow: 0 1vw 3vw rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .prize-item:hover {
            transform: translateY(-0.5vw);
            box-shadow: 0 1.5vw 4vw rgba(0,0,0,0.15);
        }

        .prize-icon {
            font-size: 5vw;
            margin-bottom: 2vw;
            display: block;
        }

        .prize-name {
            font-size: 2.5vw;
            color: #333;
            font-weight: 600;
        }

        /* ä¸­å¤®æŠ½å¥–æŒ‰é’® */
        .draw-button {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border: none;
            border-radius: 5vw;
            padding: 5vw;
            font-size: 3.5vw;
            font-weight: bold;
            color: #ff4757;
            cursor: pointer;
            box-shadow: 0 1.5vw 5vw rgba(255, 215, 0, 0.4);
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 5vw;
        }

        .draw-button:hover {
            transform: translateY(-0.8vw);
            box-shadow: 0 2vw 6vw rgba(255, 215, 0, 0.6);
        }

        .draw-button:active {
            transform: translateY(-0.3vw);
        }

        /* æŠ½å¥–æŒ‰é’®åŒºåŸŸ - é‡æ–°å®šä½å’Œè®¾è®¡ */
        .draw-buttons {
            position: relative;  /* æ”¹ä¸ºç›¸å¯¹å®šä½ */
            bottom: auto;
            left: auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3vw;
            padding: 2vw 0;
            margin-top: auto;   /* æ¨åˆ°åº•éƒ¨ */
        }

        /* éªŒè¯åŒºåŸŸæ ·å¼ - ä¼˜åŒ– */
        .verification-section {
            width: 100%;
            max-width: 80%;
            display: flex;
            justify-content: center;
            margin-bottom: 2vw;
        }

        .verification-form {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 2vw;
            width: 100%;
            max-width: 100%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 2vw 3vw;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .verification-input {
            flex: 1;
            min-width: 60%;
            border: none;
            background: transparent;
            font-size: 3.5vw;
            color: #333;
            outline: none;
            padding: 1vw 0;
        }

        .verification-input::placeholder {
            color: #999;
        }

        .verification-btn {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border: none;
            border-radius: 20px;
            padding: 2vw 4vw;
            font-size: 3vw;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .verification-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
        }

        /* æŠ½å¥–é€‰é¡¹åŒºåŸŸ - ä¼˜åŒ– */
        .draw-options-section {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 4vw;
        }

        .draw-option-btn {
            background: linear-gradient(145deg, #ff4757, #ff6b9d);
            border: none;
            border-radius: 15px;
            padding: 3vw 5vw;
            font-size: 3.5vw;
            font-weight: 600;
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
            transition: all 0.3s ease;
            min-width: 25vw;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1vw;
        }

        .draw-option-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.6);
        }

        .draw-option-btn:active {
            transform: translateY(-1px);
        }

        /* æŠ½å¥–åŒºåŸŸloadingçŠ¶æ€æ ·å¼ */
        .draw-cards.loading {
            position: relative;
            pointer-events: none;
        }
        .draw-cards.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            width: 60px;
            height: 60px;
            margin: auto;
            transform: translateY(-50%);
            border: 5px solid transparent;
            border-top: 5px solid #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 1000;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.4);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* æŠ½å¥–å¡ç‰‡åŒºåŸŸloadingçŠ¶æ€ */
        .draw-cards.loading .draw-placeholder {
            opacity: 0.3;
        }

        /* PCç«¯æç¤ºé¡µé¢ */
        @media screen and (min-width: 768px) {
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                margin: 0;
                padding: 0;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: 'Microsoft YaHei', Arial, sans-serif;
            }
            
            .mobile-container {
                display: none;
            }
            
            .pc-tip {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                color: white;
                padding: 50px 40px;
                max-width: 600px;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
                border-radius: 30px;
                backdrop-filter: blur(20px);
                border: 2px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
                position: relative;
                overflow: hidden;
            }
            
            .pc-tip::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
                animation: shine 3s ease-in-out infinite;
                pointer-events: none;
            }
            
            .pc-tip-icon {
                font-size: 5rem;
                margin-bottom: 25px;
                animation: bounce 2s infinite;
                filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            }
            
            .pc-tip-title {
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 20px;
                text-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
                background: linear-gradient(135deg, #fff, #f0f0f0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .pc-tip-text {
                font-size: 1.2rem;
                line-height: 1.8;
                margin-bottom: 30px;
                opacity: 0.95;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            }
            
            .pc-tip-qrcode {
                margin: 25px 0;
                padding: 20px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
            }
            
            .pc-tip-qrcode img {
                width: 180px;
                height: 180px;
                border-radius: 10px;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
                border: 3px solid rgba(255, 255, 255, 0.3);
            }
            
            .pc-tip-qrcode-text {
                margin-top: 15px;
                font-size: 1rem;
                color: #e0e0e0;
                font-weight: 500;
            }
            
            .pc-tip-btn {
                padding: 18px 40px;
                background: linear-gradient(135deg, #ff6b6b, #ee5a24);
                color: white;
                border: none;
                border-radius: 15px;
                font-size: 1.2rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(238, 90, 36, 0.4);
                text-decoration: none;
                display: inline-block;
                position: relative;
                overflow: hidden;
            }
            
            .pc-tip-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                transition: left 0.5s;
            }
            
            .pc-tip-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 12px 30px rgba(238, 90, 36, 0.6);
            }
            
            .pc-tip-btn:hover::before {
                left: 100%;
            }
            
            @keyframes shine {
                0%, 100% { transform: translateX(-100%); }
                50% { transform: translateX(100%); }
            }
            
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% {
                    transform: translateY(0);
                }
                40% {
                    transform: translateY(-10px);
                }
                60% {
                    transform: translateY(-5px);
                }
            }
        }



            /* PCç«¯æŠ½å¥–æŒ‰é’®åŒºåŸŸ */
            .draw-buttons {
                bottom: 2%;
             
                width: 100%;
                gap: 15px;
                padding: 15px 0;
            }

            /* PCç«¯æŠ½å¥–èµ„æ ¼æ˜¾ç¤º */
            .draw-qualification {
                bottom: 7%;
             
                width: 60%;
                font-size: 0.8rem;
            }

            /* PCç«¯æ§åˆ¶åŒºåŸŸ */
            .controls {
                bottom: 21%;
                right: 35%;
                width: 30%;
            }

            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
                border-radius: 50%;
            }

            .rewards-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
                border-radius: 20px;
            }

            .joystick {
                width: 45px;
                height: 45px;
            }

            .joystick::after {
                width: 20px;
                height: 20px;
            }

            /* PCç«¯æŠ½å¥–å¡ç‰‡åŒºåŸŸ */
            .draw-cards {
                gap: 20px;
                padding: 10px;
            }

            /* PCç«¯æŠ½å¥–å ä½æç¤º */
            .draw-placeholder {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                color: white;
                padding: 20px 15px;
                border-radius: 15px;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
                backdrop-filter: blur(10px);
                border: 2px solid rgba(255, 215, 0, 0.3);
                box-shadow: 
                    0 8px 25px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2),
                    0 0 15px rgba(255, 215, 0, 0.1);
                
                width: 80%;
                min-height: 200px;
                height: 80%;
                max-height: 400px;
                max-width: 400px;
                
                position: relative;
                overflow: hidden;
                transition: all 0.3s ease;
            }

            .placeholder-icon {
                font-size: 3rem;
                margin-bottom: 20px;
                animation: float 3s ease-in-out infinite;
                filter: drop-shadow(0 4px 8px rgba(255, 215, 0, 0.3));
                position: relative;
                z-index: 2;
            }

            .placeholder-text {
                font-size: 1.2rem;
                font-weight: bold;
                margin-bottom: 10px;
                color: #ffd700;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                position: relative;
                z-index: 2;
                letter-spacing: 1px;
            }

            .placeholder-subtext {
                font-size: 0.9rem;
                opacity: 0.9;
                color: rgba(255, 255, 255, 0.95);
                line-height: 1.4;
                position: relative;
                z-index: 2;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            }

            /* PCç«¯draw-placeholderä¼ªå…ƒç´ æ ·å¼ */
            .draw-placeholder::before {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.1), transparent);
                animation: shimmer 3s infinite;
                pointer-events: none;
            }

            .draw-placeholder::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.1), transparent 50%);
                pointer-events: none;
            }

            /* PCç«¯é‡‘å¸ä¸è¶³å†…å®¹ */
            .insufficient-coins-content {
                padding: 40px 30px;
                border-radius: 15px;
                min-height: 200px;
                max-width: 70%;
            }

            /* PCç«¯éŸ³æ•ˆæ§åˆ¶æŒ‰é’® */
            .sound-control {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            /* PCç«¯å¥–å“ç½‘æ ¼ */
            .prize-grid {
                gap: 15px;
                margin-bottom: 20px;
                max-width: 80%;
            }

            .prize-item {
                border-radius: 15px;
                padding: 20px 15px;
            }

            .prize-icon {
                font-size: 2rem;
                margin-bottom: 10px;
            }

            .prize-name {
                font-size: 0.9rem;
            }

            /* PCç«¯æŠ½å¥–æŒ‰é’® */
            .draw-button {
                border-radius: 15px;
                padding: 15px 20px;
                font-size: 1.1rem;
                margin-bottom: 20px;
            }

            /* PCç«¯æŠ½å¥–é€‰é¡¹æŒ‰é’® */
            .draw-option-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
                border-radius: 20px;
                min-width: 120px;
            }

            /* PCç«¯è´­ç‰©æŒ‰é’® */
            .shopping-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
                border-radius: 20px;
            }

            /* PCç«¯æ¨¡æ€æ¡†æ ·å¼ */
            .modal {
                padding: 20px;
            }

            .modal-content {
                max-width: 600px;
                border-radius: 15px;
            }

            .modal-header {
                padding: 15px 20px;
                border-radius: 15px 15px 0 0;
            }

            .modal-body {
                padding: 20px;
            }

            .modal-footer {
                padding: 15px 20px;
                border-radius: 0 0 15px 15px;
            }

            /* PCç«¯è¡¨å•æ ·å¼ */
            .form-group {
                margin-bottom: 15px;
            }

            .form-control {
                padding: 10px 12px;
                border-radius: 8px;
                font-size: 0.9rem;
            }

            .btn {
                padding: 10px 20px;
                border-radius: 8px;
                font-size: 0.9rem;
            }

            /* PCç«¯è¡¨æ ¼æ ·å¼ */
            .table {
                font-size: 0.9rem;
            }

            .table th,
            .table td {
                padding: 10px 12px;
            }

            /* PCç«¯åˆ†é¡µæ ·å¼ */
            .pagination {
                gap: 8px;
            }

            .page-link {
                padding: 8px 12px;
                font-size: 0.9rem;
            }



        /* æŠ½å¥–èµ„æ ¼æ˜¾ç¤ºåŒºåŸŸ - å›ºå®šåœ¨æŒ‰é’®ä¸‹æ–¹ */
        .draw-qualification {
            position: absolute;
            bottom: 7%;        /* è·ç¦»åº•éƒ¨5% */
            left: 20%;         /* è·ç¦»å·¦ä¾§20% */
            width: 60%;        /* å®½åº¦å 60% */
            text-align: center;
            color: white;
            font-size: 0.9rem;
            flex-shrink: 0;
            z-index: 10;
        }

        /* æ§åˆ¶åŒºåŸŸ - å›ºå®šåœ¨å›¾ç‰‡å³ä¸‹è§’ */
        .controls {
            position: absolute;
            bottom: 21%;        /* è·ç¦»åº•éƒ¨5% */
            right: 35%;        /* è·ç¦»å³ä¾§10% */
            width: 30%;        /* å®½åº¦å 30% */
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
        }

        .control-btn {
            background: #ffd700;
            border: none;
            border-radius: 50%;
            width: 10vw;
            height: 10vw;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3vw;
            cursor: pointer;
            box-shadow: 0 0.8vw 2.5vw rgba(0,0,0,0.2);
        }

        .rewards-btn {
            background: transparent;
            color: transparent;
            border: none;
            border-radius: 5vw;
            padding: 2.5vw 5vw;
            font-size: 2.5vw;
            cursor: pointer;
            box-shadow: none;
        }

        .joystick {
            background: #ffd700;
            border: none;
            border-radius: 50%;
            width: 10vw;
            height: 10vw;
            cursor: pointer;
            box-shadow: 0 0.8vw 2.5vw rgba(0,0,0,0.2);
            position: relative;
        }

        .joystick::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 5vw;
            height: 5vw;
            background: #333;
            border-radius: 50%;
        }

        /* æŠ½å¥–å¡ç‰‡åŒºåŸŸ */
        .draw-cards {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4vw;
            margin: 0;
            flex-wrap: wrap;
          
            flex: 1;
            padding: 7vw 1vw;
            min-height: 300px;
            height: 90%;
            max-height: 600px;
        }

        /* æŠ½å¥–å ä½æç¤º - ç¾åŒ–ç‰ˆæœ¬ */
        .draw-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 3vw 3vw;
            border-radius: 5vw;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(4vw);
            border: 0.5vw solid rgba(255, 215, 0, 0.3);
            box-shadow: 
                0 2vw 8vw rgba(0, 0, 0, 0.3),
                inset 0 0.3vw 0 rgba(255, 255, 255, 0.2),
                0 0 5vw rgba(255, 215, 0, 0.1);
            
            width: 80%;
            min-height: 200px;
            height: 80%;
            max-height: 400px;
            
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .draw-placeholder::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        .draw-placeholder::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.1), transparent 50%);
            pointer-events: none;
        }

        .placeholder-icon {
            font-size: 8.5vw;
            margin-bottom: 5vw;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 1vw 2vw rgba(255, 215, 0, 0.3));
            position: relative;
            z-index: 2;
        }

        .placeholder-text {
            font-size: 3.5vw;
            font-weight: bold;
            margin-bottom: 3vw;
            color: #ffd700;
            text-shadow: 0 0.5vw 1vw rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
            letter-spacing: 0.3vw;
        }

        .placeholder-subtext {
            font-size: 2.5vw;
            opacity: 0.9;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.4;
            position: relative;
            z-index: 2;
            text-shadow: 0 0.3vw 0.5vw rgba(0, 0, 0, 0.2);
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        /* é‡‘å¸ä¸è¶³æ—¶æ˜¾ç¤ºçš„å†…å®¹æ ·å¼ */
        .insufficient-coins-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 7.5vw 6vw;
            border-radius: 5vw;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.15), rgba(255, 107, 107, 0.05));
            backdrop-filter: blur(4vw);
            border: 0.5vw solid rgba(255, 107, 107, 0.3);
            box-shadow: 
                0 2vw 8vw rgba(0, 0, 0, 0.3),
                inset 0 0.3vw 0 rgba(255, 255, 255, 0.2),
                0 0 5vw rgba(255, 107, 107, 0.1);
            min-height: 55vh; /* ä½¿ç”¨è§†å£é«˜åº¦ */
            width: 100%;
            max-width: 80%;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .insufficient-coins-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 107, 107, 0.1), transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        .insufficient-coins-content::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255, 107, 107, 0.1), transparent 50%);
            pointer-events: none;
        }

        .coins-title {
            font-size: 4vw;
            font-weight: bold;
            margin-bottom: 4vw;
            color: #ff6b6b;
            text-shadow: 0 0.5vw 1vw rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
            letter-spacing: 0.3vw;
        }

        .coins-text {
            font-size: 3vw;
            opacity: 0.9;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.5;
            position: relative;
            z-index: 2;
            text-shadow: 0 0.3vw 0.5vw rgba(0, 0, 0, 0.2);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-2.5vw) rotate(1.5deg); }
        }
         
         /* éªŒè¯è¡¨å•æ ·å¼ - ç¾åŒ–ç‰ˆæœ¬ */
         .verification-form {
             display: flex;
             flex-direction: row;
             align-items: center;
             gap: 3vw;
             width: 100%;
             max-width: 80%;
             position: relative;
             z-index: 2;
             margin: 0 auto;
         }
         
         .verification-input {
             flex: 1;
             padding: 3vw 4.5vw;
             border: 0.5vw solid rgba(255, 215, 0, 0.4);
             border-radius: 3vw;
             background: rgba(255, 255, 255, 0.9);
             color: #333;
             font-size: 3vw;
             backdrop-filter: blur(4vw);
             outline: none;
             transition: all 0.3s ease;
             box-shadow: 
                 0 1vw 3vw rgba(0, 0, 0, 0.2),
                 inset 0 0.3vw 0 rgba(255, 255, 255, 0.1);
         }
         
         .verification-input::placeholder {
             color: #666;
             font-weight: 500;
         }
         
         .verification-input:focus {
             border-color: #ffd700;
             box-shadow: 
                 0 0 4vw rgba(255, 215, 0, 0.4),
                 0 1vw 3vw rgba(0, 0, 0, 0.2),
                 inset 0 0.3vw 0 rgba(255, 255, 255, 0.1);
             transform: translateY(-0.3vw);
         }
         
         .verification-btn {
             padding: 3vw 6vw;
             background: linear-gradient(145deg, #ffd700, #ffed4e);
             border: none;
             border-radius: 4vw;
             color: #333;
             font-size: 3vw;
             font-weight: bold;
             cursor: pointer;
             transition: all 0.3s ease;
             box-shadow: 
                 0 1.5vw 5vw rgba(255, 215, 0, 0.4),
                 0 0.5vw 2vw rgba(0, 0, 0, 0.2);
             position: relative;
             overflow: hidden;
             white-space: nowrap;
         }
         
         .verification-btn::before {
             content: '';
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
             transition: left 0.5s ease;
         }
         
         .verification-btn:hover {
             transform: translateY(-0.8vw);
             box-shadow: 
                 0 2vw 6vw rgba(255, 215, 0, 0.6),
                 0 1vw 3vw rgba(0, 0, 0, 0.3);
         }
         
         .verification-btn:hover::before {
             left: 100%;
         }
         
                 .verification-btn:active {
            transform: translateY(-0.3vw);
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 480px) {
            .main-screen {
                top: 13%;
                left: 2%;
                width: 96%;
                height: 60%;
                padding: 0 2vw;
                min-height: 300px;
            }
            
            .draw-cards {
                height: 60%;
                margin-bottom: 1.5vw;
                min-height: 200px;
            }
            
            .draw-placeholder {
                padding: 2.5vw;
                min-height: 150px;
                max-height: 250px;
            }
            
            .verification-form {
                flex-direction: row;
                gap: 2.5vw;
                max-width: 90%;
            }
            
            .verification-input {
                width: 100%;
                min-width: 65%;
                font-size: 2.8vw;
                padding: 2.5vw 4vw;
            }
            
            .verification-btn {
                width: 100%;
                font-size: 2.8vw;
                padding: 2.5vw 5vw;
            }
            
            .draw-buttons {
                gap: 3vw;
                padding: 15px 0;
            }
            
            .draw-options-section {
                gap: 2.5vw;
            }
        }

        @media (max-width: 360px) {
            .main-screen {
                top: 13%;
                left: 1%;
                width: 98%;
                height: 60%;
                padding: 0 1.5vw;
                min-height: 280px;
            }
            
            .draw-cards {
                height: 55%;
                margin-bottom: 1vw;
                min-height: 180px;
            }
            
            .draw-placeholder {
                padding: 2vw;
                min-height: 120px;
                max-height: 200px;
            }
            
            .verification-form {
                max-width: 95%;
                gap: 2vw;
            }
            
            .verification-input {
                min-width: 70%;
                font-size: 2.5vw;
                padding: 2vw 3.5vw;
            }
            
            .verification-btn {
                font-size: 2.5vw;
                padding: 2vw 4.5vw;
            }
            
            .draw-buttons {
                gap: 2.5vw;
                padding: 10px 0;
            }
            
            .draw-options-section {
                gap: 2vw;
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-2.5vw);
            }
            60% {
                transform: translateY(-1.3vw);
            }
        }

        .draw-card {
            width: 18vw;
            height: 25vw;
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border-radius: 2.5vw;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5vw;
            font-weight: bold;
            color: #ff4757;
            cursor: pointer;
            box-shadow: 0 1vw 4vw rgba(255, 215, 0, 0.4);
            transition: all 0.6s ease;
            transform-style: preserve-3d;
            position: relative;
        }

        /* é‡‘è‰²è¾¹æ¡†åŠ¨ç”»æ•ˆæœ */
        @keyframes goldenGlow {
            0% {
                box-shadow: 0 0 5vw rgba(255, 215, 0, 0.8), 0 0 10vw rgba(255, 215, 0, 0.4), 0 0 15vw rgba(255, 215, 0, 0.2);
            }
            50% {
                box-shadow: 0 0 7.5vw rgba(255, 215, 0, 1), 0 0 12.5vw rgba(255, 215, 0, 0.6), 0 0 17.5vw rgba(255, 215, 0, 0.3);
            }
            100% {
                box-shadow: 0 0 5vw rgba(255, 215, 0, 0.8), 0 0 10vw rgba(255, 215, 0, 0.4), 0 0 15vw rgba(255, 215, 0, 0.2);
            }
        }

        @keyframes goldenBorder {
            0% {
                border: 0.8vw solid #ffd700;
            }
            50% {
                border: 0.8vw solid #ffed4e;
            }
            100% {
                border: 0.8vw solid #ffd700;
            }
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0.8);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        .draw-card.golden-prize {
            border: 0.8vw solid #ffd700;
            animation: goldenGlow 2s ease-in-out infinite, goldenBorder 1.5s ease-in-out infinite;
            position: relative;
        }

        .draw-card.golden-prize::before {
            content: 'âœ¨';
            position: absolute;
            top: -2.5vw;
            right: -2.5vw;
            font-size: 3vw;
            animation: sparkle 1.5s ease-in-out infinite;
            z-index: 10;
        }

        .draw-card.golden-prize::after {
            content: 'ğŸ‰';
            position: absolute;
            bottom: -2.5vw;
            left: -2.5vw;
            font-size: 3vw;
            animation: sparkle 1.5s ease-in-out infinite 0.5s;
            z-index: 10;
        }

        .draw-card.flipped {
            transform: rotateY(180deg);
        }

        .draw-card-front,
        .draw-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 2.5vw;
        }

        .draw-card-front {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            color: #ff4757;
        }

        .draw-card-back {
            background: linear-gradient(145deg, #ff4757, #ff6b9d);
            color: white;
            transform: rotateY(180deg);
            font-size: 2vw;
            text-align: center;
            padding: 1.3vw;
        }

        /* çŠ¶æ€æ˜¾ç¤º - ä¸»å±å¹•å†… */
        .status-display {
            text-align: center;
            color: white;
            font-size: 2.5vw;
            margin-bottom: 4vw;
            width: 100%;
        }

        .decorative-pattern {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2.5vw;
        }

        .pattern-left {
            display: flex;
            gap: 1.3vw;
        }

        .pattern-square {
            width: 2vw;
            height: 2vw;
            background: #ff4757;
            border-radius: 0.5vw;
        }

        .pattern-right {
            display: flex;
            gap: 2vw;
            align-items: center;
        }

        .coin {
            width: 5vw;
            height: 5vw;
            background: #ffd700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8vw;
            color: #333;
        }

        .gold-ingot {
            width: 6vw;
            height: 3.5vw;
            background: #ffd700;
            border-radius: 0.8vw;
            margin-left: 1.3vw;
        }

        .rules-text2 {
            color: #666;
            line-height: 1.6;
            font-size: 2.5vw;
            text-align: justify;
            margin: 6vw 0px;
        }

        .shopping-btn {
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 6vw;
            padding: 4vw 10vw;
            font-size: 3vw;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 1vw 4vw rgba(255, 71, 87, 0.3);
            transition: all 0.3s ease;
            animation: breathing 2s ease-in-out infinite;
        }

        .shopping-btn:hover {
            transform: translateY(-0.5vw);
            box-shadow: 0 1.5vw 5vw rgba(255, 71, 87, 0.4);
            animation: none;
        }
        
        /* å‘¼å¸æ•ˆæœåŠ¨ç”» */
        @keyframes breathing {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 1vw 4vw rgba(255, 71, 87, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 1.5vw 6vw rgba(255, 71, 87, 0.5);
            }
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .draw-button.animate {
            animation: pulse 0.5s ease-in-out;
        }

        /* å“åº”å¼è®¾è®¡ - ç»Ÿä¸€åª’ä½“æŸ¥è¯¢é€»è¾‘ */
        /* å°å±å¹•é€‚é… (480pxä»¥ä¸‹) */
        @media (max-width: 480px) {
            .main-screen {
                top: 13%;
                left: 2%;
                width: 96%;
                height: 60%;
                padding: 0 2vw;
                min-height: 300px;
            }

            .draw-cards {
                height: 60%;
                margin-bottom: 1.5vw;
                min-height: 200px;
            }

            .draw-placeholder {
                padding: 2.5vw;
                min-height: 150px;
                max-height: 250px;
            }

            .placeholder-icon {
                font-size: 6vw;
                margin-bottom: 2.5vw;
            }

            .placeholder-text {
                font-size: 3vw;
                margin-bottom: 1.5vw;
            }

            .placeholder-subtext {
                font-size: 2.2vw;
            }

            .verification-form {
                flex-direction: row;
                gap: 2.5vw;
                max-width: 90%;
            }

            .verification-input {
                width: 100%;
                min-width: 65%;
                font-size: 2.8vw;
                padding: 2.5vw 4vw;
            }

            .verification-btn {
                width: 100%;
                font-size: 2.8vw;
                padding: 2.5vw 5vw;
            }

            .draw-buttons {
                gap: 3vw;
                padding: 15px 0;
            }

            .draw-options-section {
                gap: 2.5vw;
            }
        }
        
        /* è¶…å°å±å¹•é€‚é… (360pxä»¥ä¸‹) */
        @media (max-width: 360px) {
            .main-screen {
                top: 1%;
                left: 1%;
                width: 98%;
                height: 60%;
                padding: 0 1.5vw;
                min-height: 280px;
            }

            .draw-cards {
                height: 55%;
                margin-bottom: 1vw;
                min-height: 180px;
            }

            .draw-placeholder {
                padding: 2vw;
                min-height: 120px;
                max-height: 200px;
            }

            .placeholder-icon {
                font-size: 5vw;
                margin-bottom: 2vw;
            }

            .placeholder-text {
                font-size: 2.5vw;
                margin-bottom: 1vw;
            }

            .placeholder-subtext {
                font-size: 2vw;
            }

            .verification-form {
                max-width: 95%;
                gap: 2vw;
            }

            .verification-input {
                min-width: 70%;
                font-size: 2.5vw;
                padding: 2vw 3.5vw;
            }

            .verification-btn {
                font-size: 2.5vw;
                padding: 2vw 4.5vw;
            }

            .draw-buttons {
                gap: 2.5vw;
                padding: 10px 0;
            }

            .draw-options-section {
                gap: 2vw;
            }
        }

        /* å¼¹çª—æ ·å¼ */
        .modal {
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(145deg, #ff4757, #ff6b9d);
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 20px;
        }

        .address-list {
            margin-bottom: 20px;
        }

        .address-item {
            border: 2px solid #f1f1f1;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            position: relative;
            transition: all 0.3s ease;
        }

        .address-item:hover {
            border-color: #ffd700;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
        }

        .address-item.default {
            border-color: #ffd700;
            background: linear-gradient(145deg, #fff9e6, #fff5cc);
        }

        .address-item.default::before {
            content: 'é»˜è®¤';
            position: absolute;
            top: -8px;
            right: 15px;
            background: #ffd700;
            color: #333;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .address-item.selected {
            border-color: #ffd700;
            background: linear-gradient(145deg, #fff9e6, #fff5cc);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .address-item.selected::after {
            content: 'å·²é€‰æ‹©';
            position: absolute;
            top: -8px;
            left: 15px;
            background: #28a745;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .address-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .address-phone {
            color: #666;
            margin-bottom: 5px;
        }

        .address-detail {
            color: #333;
            line-height: 1.4;
        }

        .address-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .add-address-btn, .confirm-order-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
         
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-address-btn {
            background: #f1f1f1;
            color: #333;
        }

        .add-address-btn:hover {
            background: #e1e1e1;
        }

        .confirm-order-btn {
            background: linear-gradient(145deg, #ff4757, #ff6b9d);
            color: white;
        }

        .confirm-order-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
        }

        .address-form {
            border: 2px solid #f1f1f1;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f9f9f9;
        }

        .address-form h4 {
            margin: 0 0 15px 0;
            color: #333;
        }

        .address-input, .address-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .address-input:focus, .address-textarea:focus {
            outline: none;
            border-color: #ffd700;
        }

        .address-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .address-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .address-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .address-checkbox label {
            color: #333;
            font-weight: 500;
        }

        .address-buttons {
            display: flex;
            gap: 10px;
        }

        .save-btn, .cancel-btn {
            flex: 1;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-btn {
            background: linear-gradient(145deg, #2ed573, #7bed9f);
            color: white;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(46, 213, 115, 0.4);
        }

        .cancel-btn {
            background: #f1f1f1;
            color: #333;
        }

        .cancel-btn:hover {
            background: #e1e1e1;
        }

        .no-address {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .no-address-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* è®¢å•æ¨¡å—æ ·å¼ - ç°ä»£åŒ–è®¾è®¡ */
        .orders-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            margin: 20px 15px;
            border-radius: 25px;
            padding: 15px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            display: none; /* é»˜è®¤éšè—ï¼ŒéªŒè¯åæ˜¾ç¤º */
            border: 2px solid rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }

        .orders-section::before {
            content: '';
            position: absolute;
            top: 0;
            
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 25px 25px 0 0;
        }

        .orders-title {
            color: #2d3748;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .orders-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        .orders-container {
            height: 400px;
            overflow-y: auto;
            padding-right: 8px;
            padding-left: 4px;
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ - ç°ä»£åŒ–è®¾è®¡ */
        .orders-container::-webkit-scrollbar {
            width: 8px;
        }

        .orders-container::-webkit-scrollbar-track {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 4px;
            margin: 4px 0;
        }

        .orders-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            border: 2px solid rgba(248, 250, 252, 0.8);
        }

        .orders-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        }

        .loading-orders {
            text-align: center;
            padding: 60px 20px;
            color: #4a5568;
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.8) 0%, rgba(241, 245, 249, 0.8) 100%);
            border-radius: 20px;
            border: 2px dashed rgba(102, 126, 234, 0.3);
            margin: 20px 0;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(102, 126, 234, 0.1);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* æŠ½å¥–è®°å½•å¡ç‰‡æ ·å¼ - ä¸“ç”¨æ ·å¼ */
        .lottery-record-item {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .lottery-record-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 16px 16px 0 0;
        }
        
        .lottery-record-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
            border-color: rgba(102, 126, 234, 0.3);
        }
        
        .lottery-record-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            position: relative;
        }
        
        .lottery-record-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .lottery-record-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .lottery-record-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 12px;
        }
        
        .lottery-record-details h4 {
            color: #2d3748;
            margin-bottom: 6px;
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1.3;
        }
        
        .lottery-record-details .detail-item {
            color: #4a5568;
            font-size: 0.9rem;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .lottery-record-details .detail-item strong {
            color: #2d3748;
            font-weight: 600;
        }
        
        .lottery-record-status {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .lottery-record-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 16px;
        }
        
        .lottery-record-status.pending {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #744210;
        }
        
        .lottery-record-status.shipped {
            background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);
            color: white;
        }
        
        .lottery-record-status.delivered {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .lottery-record-status.completed {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .lottery-record-status.special {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }
        
        .lottery-record-content {
            /* margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(0, 0, 0, 0.06); */
        }
        
        .lottery-record-content .detail-item {
            color: #4a5568;
            font-size: 0.85rem;
            padding: 8px 0;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            margin-top: 10px;
            background: none;
            border-left: none;
            border-radius: 0;
        }
        
        .lottery-record-content .detail-item:hover {
            background: none;
            transform: none;
        }

        /* ç›²ç›’è®¢å•å¡ç‰‡æ ·å¼ - ä¸“ç”¨æ ·å¼ */
        .blind-box-order-item {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .blind-box-order-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 16px 16px 0 0;
        }
        
        .blind-box-order-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
            border-color: rgba(102, 126, 234, 0.3);
        }
        
        .blind-box-order-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            position: relative;
        }
        
        .blind-box-order-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .blind-box-order-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .blind-box-order-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 12px;
        }
        
        .blind-box-order-details h4 {
            color: #2d3748;
            margin-bottom: 6px;
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1.3;
        }
        
        .blind-box-order-details .detail-item {
            color: #4a5568;
            font-size: 0.9rem;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .blind-box-order-details .detail-item strong {
            color: #2d3748;
            font-weight: 600;
        }
        
        .blind-box-order-status {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .blind-box-order-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            border-radius: 16px;
        }
        
        .blind-box-order-status.pending {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #744210;
        }
        
        .blind-box-order-status.shipped {
            background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);
            color: white;
        }
        
        .blind-box-order-status.delivered {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .blind-box-order-status.completed {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .blind-box-order-status.special {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }
        
        .blind-box-order-content {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(0, 0, 0, 0.06);
        }
        
        .blind-box-order-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }
        
        .blind-box-order-details-grid .detail-item {
            color: #4a5568;
            font-size: 0.85rem;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: rgba(248, 250, 252, 0.8);
            border-radius: 8px;
            border-left: 3px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .blind-box-order-details-grid .detail-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(4px);
        }
        
        .blind-box-order-details-grid .detail-item strong {
            color: #2d3748;
            font-weight: 600;
            margin-right: 8px;
        }

        /* å¼¹çª—ä¸­çš„è®¢å•å®¹å™¨æ ·å¼ - ç°ä»£åŒ–è®¾è®¡ */
        #modalOrdersContainer {
            height: 400px;
            overflow-y: auto;
            padding-right: 8px;
            padding-left: 4px;
        }

        #modalOrdersContainer::-webkit-scrollbar {
            width: 8px;
        }

        #modalOrdersContainer::-webkit-scrollbar-track {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 4px;
            margin: 4px 0;
        }

        #modalOrdersContainer::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            border: 2px solid rgba(248, 250, 252, 0.8);
        }

        #modalOrdersContainer::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        }

        .no-orders {
            text-align: center;
            padding: 60px 20px;
            color: #4a5568;
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.8) 0%, rgba(241, 245, 249, 0.8) 100%);
            border-radius: 20px;
            border: 2px dashed rgba(102, 126, 234, 0.3);
            margin: 20px 0;
        }

        .no-orders-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.7;
            animation: float 3s ease-in-out infinite;
        }



        .order-info {
            margin-bottom: 10px;
        }

        .order-item-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .order-price {
            color: #ff4757;
            font-weight: bold;
        }

        .order-time {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 8px;
        }

        .order-contact {
            background: #e9ecef;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .order-contact-name {
            font-weight: bold;
            color: #333;
        }

        .order-contact-phone {
            color: #666;
            margin-left: 10px;
        }

        .order-contact-address {
            color: #666;
            margin-top: 5px;
            word-break: break-all;
        }
        
        /* é€šç”¨è¯¦æƒ…é¡¹æ ·å¼ - ä¿æŒåŸæœ‰æ ·å¼ */
        .detail-item {
            color: #4a5568;
            font-size: 0.85rem;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: rgba(248, 250, 252, 0.8);
            border-radius: 8px;
            border-left: 3px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .detail-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(4px);
        }
        
        .detail-item strong {
            color: #2d3748;
            font-weight: 600;
            margin-right: 8px;
        }
        
        .virtual-item {
            border-left: 4px solid #28a745;
            position: relative;
        }
        
        .virtual-item::after {
            content: 'ğŸ';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.2rem;
            opacity: 0.7;
        }

        /* ç›²ç›’å•†å“æ¨¡å—æ ·å¼ - ç°ä»£åŒ–è®¾è®¡ */
        .blind-box-products-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            margin: 20px 15px;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }

        .blind-box-products-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 25px 25px 0 0;
        }

        .blind-box-products-title {
            color: #2d3748;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .blind-box-products-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        .blind-box-products-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .blind-box-product-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 5px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .blind-box-product-item::before {
            /* content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ffd700 0%, #ffed4e 100%);
            border-radius: 20px 20px 0 0; */
        }

        .blind-box-product-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%);
            pointer-events: none;
        }

        .blind-box-product-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
            border-color: rgba(255, 215, 0, 0.5);
        }

        .blind-box-product-image {
            width: 100%;
            /* height: 140px; */
            margin: 0 auto 15px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .blind-box-product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 14px;
            transition: all 0.3s ease;
        }

        .blind-box-product-item:hover .blind-box-product-image img {
            transform: scale(1.05);
        }

        .blind-box-product-description {
            color: white;
            font-size: 0.95rem;
            font-weight: 600;
            line-height: 1.4;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* æ§åˆ¶åŒºåŸŸ - å›ºå®šåœ¨å›¾ç‰‡å³ä¸‹è§’ */
        .controls {
            position: absolute;
            bottom: 21%;        /* è·ç¦»åº•éƒ¨5% */
            right: 35%;        /* è·ç¦»å³ä¾§10% */
            width: 30%;        /* å®½åº¦å 30% */
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
        }

        .draw-option-btn {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border: none;
            border-radius: 15px;
            padding: 15px 25px;
            font-size: 3vw;
            font-weight: bold;
            color: #ff4757;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .draw-option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
        }

        .draw-option-btn:active {
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <!-- PCç«¯æç¤ºé¡µé¢ -->
    <div class="pc-tip" id="pcTip" style="display: none;">
        <div class="pc-tip-icon">ğŸ“±</div>
        <div class="pc-tip-title">è¯·ä½¿ç”¨æ‰‹æœºè®¿é—®</div>
        <div class="pc-tip-text">
            ä¸ºäº†è·å¾—æœ€ä½³ä½“éªŒï¼Œè¯·ä½¿ç”¨æ‰‹æœºæµè§ˆå™¨è®¿é—®æ­¤é¡µé¢ã€‚<br>
            æœ¬æŠ½å¥–æ´»åŠ¨ä¸“ä¸ºç§»åŠ¨ç«¯è®¾è®¡ï¼ŒPCç«¯æš‚ä¸æ”¯æŒã€‚
        </div>
        <div class="pc-tip-qrcode">
            <img src="https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/3dfbcad5-ead7-4116-af85-a389ab109bb1/cj.png" alt="æ‰«ç è®¿é—®">
            <div class="pc-tip-qrcode-text">æ‰«æäºŒç»´ç ï¼Œç”¨æ‰‹æœºè®¿é—®</div>
        </div>
        
    </div>

    <!-- ç§»åŠ¨ç«¯å†…å®¹ -->
    <div class="mobile-container" id="mobileContainer">
        <!-- éŸ³æ•ˆæ§åˆ¶æŒ‰é’® -->
        <div class="sound-control" id="soundControl" onclick="toggleSound()">
            ğŸ”Š
        </div>

        <!-- é¡¶éƒ¨åŒºåŸŸ -->
        <div class="header">
            <img src="https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/77ec949d-7b3f-4c73-94ed-cc9cc19b02c9/title.png" alt="ç™¾åˆ†ç™¾ä¸­å¥–" class="header-title-img">
        </div>

    <!-- æ¸¸æˆæœºä¸»ä½“ -->
    <div class="game-machine">
                 <!-- ç”¨æˆ·ä¿¡æ¯æ  - é¡¶éƒ¨ç‹­é•¿åŒºåŸŸ -->
         <div class="user-info-bar">
             <div class="scroll-container" id="userInfoContainer">
                 <!-- ç”¨æˆ·ä¿¡æ¯å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
             </div>
         </div>

                          <!-- ä¸»å±å¹•åŒºåŸŸ - æŠ½å¥–å†…å®¹ -->
         <div class="main-screen">
                                                       <!-- æŠ½å¥–å¡ç‰‡åŒºåŸŸ -->
               <div class="draw-cards" id="drawCards">
                                  <!-- é»˜è®¤æç¤ºæ–‡æ¡ˆ -->
                <div class="draw-placeholder" id="drawPlaceholder">
                    
                    
                </div>
                    
                   <!-- å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
               </div>

               <!-- æŠ½å¥–æŒ‰é’®åŒºåŸŸ - å›ºå®šåœ¨å›¾ç‰‡åº•éƒ¨åŒºåŸŸ -->
                        <div class="draw-buttons" id="drawButtons">
                            <!-- éªŒè¯åŒºåŸŸ -->
                            <div class="verification-section">
                                <div class="verification-form" id="verificationForm">
                                    <input type="text" id="verificationCode" placeholder="è¯·è¾“å…¥éªŒè¯ç " class="verification-input" maxlength="8" onkeypress="handleKeyPress(event)" oninput="limitInput(this)">
                                    <button onclick="handleVerification()" class="verification-btn">éªŒè¯</button>
                                </div>
                            </div>
                            
                            <!-- æŠ½å¥–æŒ‰é’®ç»„ -->
                            <div class="draw-options-section">
                                <button class="draw-option-btn" onclick="startDraw(1)">20<svg t="1754277660881" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5506" width="16" height="16" style="vertical-align: middle; margin: 0 2px;"><path d="M512 528m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#F2814E" p-id="5507"></path><path d="M512 496m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#FFDC88" p-id="5508"></path><path d="M512 496m-282 0a282 282 0 1 0 564 0 282 282 0 1 0-564 0Z" fill="#FFBC54" p-id="5509"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5510"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5511"></path><path d="M257.4 801.828c14.168-7.124 31.124-14.42 36.6-35.828 20.132-78.676 424-508 424-508s0.372-52.644 29.852-82.536C846.172 247.96 910 364.584 910 496c0 219.664-178.336 398-398 398-96.8 0-185.572-34.632-254.6-92.172z" fill="#F47A38" fill-opacity=".5" p-id="5512"></path><path d="M716.296 301.688a30.104 30.104 0 0 1-0.228-41.464c1.24-1.488 1.932-2.224 1.932-2.224v-0.144a0.188 0.188 0 0 1 0.044-0.24 0.188 0.188 0 0 1 0.244 0c66.784 57.816 109.044 143.204 109.044 238.384 0 174.036-141.296 315.332-315.332 315.332-72.76 0-139.8-24.696-193.18-66.156a14.96 14.96 0 0 1-3.216-19.928l-0.036-0.02a18.172 18.172 0 0 1 26.248-4.452C389.112 756.692 448.088 778 512 778c155.64 0 282-126.36 282-282 0-75.284-29.564-143.716-77.704-194.312z" fill="#FFBA58" p-id="5513"></path><path d="M496.016 347.784a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.668 19.668 0 0 1 9.88 30.404l-53.308 72.396a19.668 19.668 0 0 0-3.828 11.788l0.572 89.896a19.668 19.668 0 0 1-25.864 18.792l-85.324-28.324a19.656 19.656 0 0 0-12.392 0l-85.324 28.324a19.664 19.664 0 0 1-25.864-18.792l0.572-89.896a19.668 19.668 0 0 0-3.828-11.788l-53.308-72.396a19.668 19.668 0 0 1 9.88-30.404l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FA7F4B" p-id="5514"></path><path d="M496.016 327.004a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.68 19.68 0 0 1 9.88 30.408l-53.308 72.392a19.668 19.668 0 0 0-3.828 11.788l0.572 89.9a19.664 19.664 0 0 1-25.864 18.792l-85.324-28.328a19.656 19.656 0 0 0-12.392 0l-85.324 28.328a19.668 19.668 0 0 1-25.864-18.792l0.572-89.9a19.668 19.668 0 0 0-3.828-11.788L338.052 465a19.68 19.68 0 0 1 9.88-30.408l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FFBC54" p-id="5515"></path><path d="M338.444 461.512a25.548 25.548 0 0 1 17.3-29.404l76.008-24.16a25.564 25.564 0 0 0 13.02-9.46l46.468-64.82a25.54 25.54 0 0 1 41.52 0l46.468 64.82a25.564 25.564 0 0 0 13.02 9.46l76.008 24.16a25.548 25.548 0 0 1 16.16 33.36c-49.228 10.14-104.98 15.864-164.024 15.864-66.332 0-128.508-7.224-181.948-19.82z" fill="#FFEA8D" p-id="5516"></path><path d="M787.368 557.016a17.312 17.312 0 0 1 21.992-12.948c0.376 0.124 0.752 0.236 1.124 0.356a14.752 14.752 0 0 1 10.016 17.036c-18.42 87.196-72.936 161.14-147.148 205.464a15.988 15.988 0 0 1-21.116-4.48l0.016-0.016a17.24 17.24 0 0 1 5.224-24.844c65.064-39.296 113.004-104.128 129.892-180.568z" fill="#FFED8C" p-id="5517"></path></svg>/1æ¬¡</button>
                                <button class="draw-option-btn" onclick="startDraw(5)">90<svg t="1754277660881" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5506" width="16" height="16" style="vertical-align: middle; margin: 0 2px;"><path d="M512 528m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#F2814E" p-id="5507"></path><path d="M512 496m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#FFDC88" p-id="5508"></path><path d="M512 496m-282 0a282 282 0 1 0 564 0 282 282 0 1 0-564 0Z" fill="#FFBC54" p-id="5509"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5510"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5511"></path><path d="M257.4 801.828c14.168-7.124 31.124-14.42 36.6-35.828 20.132-78.676 424-508 424-508s0.372-52.644 29.852-82.536C846.172 247.96 910 364.584 910 496c0 219.664-178.336 398-398 398-96.8 0-185.572-34.632-254.6-92.172z" fill="#F47A38" fill-opacity=".5" p-id="5512"></path><path d="M716.296 301.688a30.104 30.104 0 0 1-0.228-41.464c1.24-1.488 1.932-2.224 1.932-2.224v-0.144a0.188 0.188 0 0 1 0.044-0.24 0.188 0.188 0 0 1 0.244 0c66.784 57.816 109.044 143.204 109.044 238.384 0 174.036-141.296 315.332-315.332 315.332-72.76 0-139.8-24.696-193.18-66.156a14.96 14.96 0 0 1-3.216-19.928l-0.036-0.02a18.172 18.172 0 0 1 26.248-4.452C389.112 756.692 448.088 778 512 778c155.64 0 282-126.36 282-282 0-75.284-29.564-143.716-77.704-194.312z" fill="#FFBA58" p-id="5513"></path><path d="M496.016 347.784a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.668 19.668 0 0 1 9.88 30.404l-53.308 72.396a19.668 19.668 0 0 0-3.828 11.788l0.572 89.896a19.668 19.668 0 0 1-25.864 18.792l-85.324-28.324a19.656 19.656 0 0 0-12.392 0l-85.324 28.324a19.664 19.664 0 0 1-25.864-18.792l0.572-89.896a19.668 19.668 0 0 0-3.828-11.788l-53.308-72.396a19.668 19.668 0 0 1 9.88-30.404l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FA7F4B" p-id="5514"></path><path d="M496.016 327.004a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.68 19.68 0 0 1 9.88 30.408l-53.308 72.392a19.668 19.668 0 0 0-3.828 11.788l0.572 89.9a19.664 19.664 0 0 1-25.864 18.792l-85.324-28.328a19.656 19.656 0 0 0-12.392 0l-85.324 28.328a19.668 19.668 0 0 1-25.864-18.792l0.572-89.9a19.668 19.668 0 0 0-3.828-11.788L338.052 465a19.68 19.68 0 0 1 9.88-30.408l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FFBC54" p-id="5515"></path><path d="M338.444 461.512a25.548 25.548 0 0 1 17.3-29.404l76.008-24.16a25.564 25.564 0 0 0 13.02-9.46l46.468-64.82a25.54 25.54 0 0 1 41.52 0l46.468 64.82a25.564 25.564 0 0 0 13.02 9.46l76.008 24.16a25.548 25.548 0 0 1 16.16 33.36c-49.228 10.14-104.98 15.864-164.024 15.864-66.332 0-128.508-7.224-181.948-19.82z" fill="#FFEA8D" p-id="5516"></path><path d="M787.368 557.016a17.312 17.312 0 0 1 21.992-12.948c0.376 0.124 0.752 0.236 1.124 0.356a14.752 14.752 0 0 1 10.016 17.036c-18.42 87.196-72.936 161.14-147.148 205.464a15.988 15.988 0 0 1-21.116-4.48l0.016-0.016a17.24 17.24 0 0 1 5.224-24.844c65.064-39.296 113.004-104.128 129.892-180.568z" fill="#FFED8C" p-id="5517"></path></svg>/5æ¬¡</button>
                            </div>
                        </div>
         </div>
         
         
         
                   <div class="draw-qualification" id="drawQualification">
             æ‚¨å½“å‰æ‹¥æœ‰ 0 é‡‘å¸
          </div>
  
          
        

        <!-- æ§åˆ¶åŒºåŸŸ - åº•éƒ¨å›ºå®š -->
        <div class="controls">
           
            <button class="rewards-btn">æˆ‘çš„å¥–åŠ± ></button>
    
        </div>
    </div>



    <!-- ç›²ç›’å•†å“æ¨¡å— -->
    <div class="blind-box-products-section">
        <h3 class="blind-box-products-title">ç›²ç›’å•†å“</h3>
        <div class="blind-box-products-grid" id="blindBoxProductsGrid">
            <!-- ç›²ç›’å•†å“å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <p class="rules-text2">
            å…‘æ¢æˆåŠŸåï¼Œåœ¨å…¬ä¼—å·å›å¤è®¢å•å·è·å–ç‰©æµä¿¡æ¯
        </p>
                 <button class="shopping-btn">å…‘æ¢ç›²ç›’/2000<svg t="1754277660881" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5506" width="16" height="16" style="vertical-align: middle; margin: 0 2px;"><path d="M512 528m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#F2814E" p-id="5507"></path><path d="M512 496m-398 0a398 398 0 1 0 796 0 398 398 0 1 0-796 0Z" fill="#FFDC88" p-id="5508"></path><path d="M512 496m-282 0a282 282 0 1 0 564 0 282 282 0 1 0-564 0Z" fill="#FFBC54" p-id="5509"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5510"></path><path d="M512 180.668c174.036 0 315.332 141.296 315.332 315.332S686.036 811.332 512 811.332 196.668 670.036 196.668 496 337.964 180.668 512 180.668z m0 33.332c-155.64 0-282 126.36-282 282s126.36 282 282 282 282-126.36 282-282-126.36-282-282-282z" fill="#FA7B4D" p-id="5511"></path><path d="M257.4 801.828c14.168-7.124 31.124-14.42 36.6-35.828 20.132-78.676 424-508 424-508s0.372-52.644 29.852-82.536C846.172 247.96 910 364.584 910 496c0 219.664-178.336 398-398 398-96.8 0-185.572-34.632-254.6-92.172z" fill="#F47A38" fill-opacity=".5" p-id="5512"></path><path d="M716.296 301.688a30.104 30.104 0 0 1-0.228-41.464c1.24-1.488 1.932-2.224 1.932-2.224v-0.144a0.188 0.188 0 0 1 0.044-0.24 0.188 0.188 0 0 1 0.244 0c66.784 57.816 109.044 143.204 109.044 238.384 0 174.036-141.296 315.332-315.332 315.332-72.76 0-139.8-24.696-193.18-66.156a14.96 14.96 0 0 1-3.216-19.928l-0.036-0.02a18.172 18.172 0 0 1 26.248-4.452C389.112 756.692 448.088 778 512 778c155.64 0 282-126.36 282-282 0-75.284-29.564-143.716-77.704-194.312z" fill="#FFBA58" p-id="5513"></path><path d="M496.016 347.784a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.668 19.668 0 0 1 9.88 30.404l-53.308 72.396a19.668 19.668 0 0 0-3.828 11.788l0.572 89.896a19.668 19.668 0 0 1-25.864 18.792l-85.324-28.324a19.656 19.656 0 0 0-12.392 0l-85.324 28.324a19.664 19.664 0 0 1-25.864-18.792l0.572-89.896a19.668 19.668 0 0 0-3.828-11.788l-53.308-72.396a19.668 19.668 0 0 1 9.88-30.404l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FA7F4B" p-id="5514"></path><path d="M496.016 327.004a19.664 19.664 0 0 1 31.968 0l52.38 73.068a19.668 19.668 0 0 0 10.028 7.284l85.676 27.236a19.68 19.68 0 0 1 9.88 30.408l-53.308 72.392a19.668 19.668 0 0 0-3.828 11.788l0.572 89.9a19.664 19.664 0 0 1-25.864 18.792l-85.324-28.328a19.656 19.656 0 0 0-12.392 0l-85.324 28.328a19.668 19.668 0 0 1-25.864-18.792l0.572-89.9a19.668 19.668 0 0 0-3.828-11.788L338.052 465a19.68 19.68 0 0 1 9.88-30.408l85.676-27.236a19.668 19.668 0 0 0 10.028-7.284l52.38-73.068z" fill="#FFBC54" p-id="5515"></path><path d="M338.444 461.512a25.548 25.548 0 0 1 17.3-29.404l76.008-24.16a25.564 25.564 0 0 0 13.02-9.46l46.468-64.82a25.54 25.54 0 0 1 41.52 0l46.468 64.82a25.564 25.564 0 0 0 13.02 9.46l76.008 24.16a25.548 25.548 0 0 1 16.16 33.36c-49.228 10.14-104.98 15.864-164.024 15.864-66.332 0-128.508-7.224-181.948-19.82z" fill="#FFEA8D" p-id="5516"></path><path d="M787.368 557.016a17.312 17.312 0 0 1 21.992-12.948c0.376 0.124 0.752 0.236 1.124 0.356a14.752 14.752 0 0 1 10.016 17.036c-18.42 87.196-72.936 161.14-147.148 205.464a15.988 15.988 0 0 1-21.116-4.48l0.016-0.016a17.24 17.24 0 0 1 5.224-24.844c65.064-39.296 113.004-104.128 129.892-180.568z" fill="#FFED8C" p-id="5517"></path></svg></button>
    </div>

    <!-- è®¢å•æ¨¡å— -->
    <div class="orders-section">
        <h3 class="orders-title">æˆ‘çš„ç›²ç›’è®¢å•</h3>
        <div class="orders-container" id="ordersContainer">
            <div class="loading-orders" id="loadingOrders">
                <div class="loading-spinner"></div>
                <div>æ­£åœ¨åŠ è½½è®¢å•...</div>
            </div>
        </div>
    </div>

    

    <!-- åœ°å€ç®¡ç†å¼¹çª— -->
    <div id="addressModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ”¶è´§åœ°å€ç®¡ç†</h3>
                <span class="close" onclick="closeAddressModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="addressList" class="address-list">
                    <!-- åœ°å€åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="address-form" id="addressForm" style="display: none;">
                    <h4>æ·»åŠ /ç¼–è¾‘åœ°å€</h4>
                    <input type="text" id="addressName" placeholder="æ”¶è´§äººå§“å" class="address-input">
                    <input type="text" id="addressPhone" placeholder="è”ç³»ç”µè¯" class="address-input">
                    <textarea id="addressDetail" placeholder="è¯¦ç»†åœ°å€" class="address-textarea"></textarea>
                    <div class="address-checkbox">
                        <input type="checkbox" id="addressDefault">
                        <label for="addressDefault">è®¾ä¸ºé»˜è®¤åœ°å€</label>
                    </div>
                    <div class="address-buttons">
                        <button onclick="saveAddress()" class="save-btn">ä¿å­˜åœ°å€</button>
                        <button onclick="cancelAddress()" class="cancel-btn">å–æ¶ˆ</button>
                    </div>
                </div>
                <div class="address-actions">
                    <button onclick="showAddressForm()" class="add-address-btn">+ æ–°å¢åœ°å€</button>
                    <button onclick="confirmBlindBoxOrder()" class="confirm-order-btn">ç¡®è®¤å…‘æ¢ç›²ç›’</button>
                </div>
            </div>
        </div>
    </div>

               <!-- æŠ½å¥–è®°å½•å¼¹çª— -->
           <div id="ordersModal" class="modal" style="display: none;">
               <div class="modal-content">
                   <div class="modal-header">
                       <h3>æŠ½å¥–è®°å½•</h3>
                       <span class="close" onclick="closeOrdersModal()">&times;</span>
                   </div>
                   <div class="modal-body">
                       <div class="orders-container" id="modalOrdersContainer">
                           <div class="loading-orders" id="modalLoadingOrders">
                               <div class="loading-spinner"></div>
                               <div>æ­£åœ¨åŠ è½½è®°å½•...</div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>

                   <script>
          // APIåŸºç¡€URL
          const API_BASE_URL = 'https://www.fuyetask.top:83/public/api/lottery';
        //    const API_BASE_URL = 'http://127.0.0.1:8000/public/api/lottery';
          
                     // ç”¨æˆ·çŠ¶æ€
           let currentUser = null;
           let isVerified = false;
           
           // éŸ³æ•ˆæ§åˆ¶
           let soundEnabled = true;
           
           // éŸ³æ•ˆå¯¹è±¡
           const sounds = {
               draw: null,
               win: null,
               lose: null,
               flip: null
           };
           
           // åˆå§‹åŒ–éŸ³æ•ˆ
           function initSounds() {
               // åˆ›å»ºæŠ½å¥–éŸ³æ•ˆï¼ˆä½¿ç”¨Web Audio APIç”Ÿæˆï¼‰
               const audioContext = new (window.AudioContext || window.webkitAudioContext)();
               
               // æŠ½å¥–éŸ³æ•ˆ - ä»¤äººå…´å¥‹çš„ä¸Šå‡éŸ³è°ƒ
               function createDrawSound() {
                   const oscillator = audioContext.createOscillator();
                   const gainNode = audioContext.createGain();
                   
                   oscillator.connect(gainNode);
                   gainNode.connect(audioContext.destination);
                   
                   oscillator.type = 'sine';
                   oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                   oscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.5);
                   
                   gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                   gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.1);
                   gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                   
                   oscillator.start(audioContext.currentTime);
                   oscillator.stop(audioContext.currentTime + 0.5);
               }
               
               // ä¸­å¥–éŸ³æ•ˆ - æ¬¢å¿«çš„èƒœåˆ©éŸ³è°ƒ
               function createWinSound() {
                   const oscillator = audioContext.createOscillator();
                   const gainNode = audioContext.createGain();
                   
                   oscillator.connect(gainNode);
                   gainNode.connect(audioContext.destination);
                   
                   oscillator.type = 'triangle';
                   oscillator.frequency.setValueAtTime(523, audioContext.currentTime); // C5
                   oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1); // E5
                   oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2); // G5
                   oscillator.frequency.setValueAtTime(1047, audioContext.currentTime + 0.3); // C6
                   
                   gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                   gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.05);
                   gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                   
                   oscillator.start(audioContext.currentTime);
                   oscillator.stop(audioContext.currentTime + 0.4);
               }
               
               // å¡ç‰‡ç¿»è½¬éŸ³æ•ˆ
               function createFlipSound() {
                   const oscillator = audioContext.createOscillator();
                   const gainNode = audioContext.createGain();
                   
                   oscillator.connect(gainNode);
                   gainNode.connect(audioContext.destination);
                   
                   oscillator.type = 'square';
                   oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                   oscillator.frequency.setValueAtTime(400, audioContext.currentTime + 0.1);
                   
                   gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                   gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.05);
                   gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                   
                   oscillator.start(audioContext.currentTime);
                   oscillator.stop(audioContext.currentTime + 0.2);
               }
               
               sounds.draw = createDrawSound;
               sounds.win = createWinSound;
               sounds.flip = createFlipSound;
           }
           
           // æ’­æ”¾éŸ³æ•ˆ
           function playSound(soundType) {
               if (!soundEnabled) return;
               
               try {
                   if (sounds[soundType]) {
                       sounds[soundType]();
                   }
               } catch (error) {
                   console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:', error);
               }
           }
           
           // åˆ‡æ¢éŸ³æ•ˆå¼€å…³
           function toggleSound() {
               soundEnabled = !soundEnabled;
               const soundControl = document.getElementById('soundControl');
               
               if (soundEnabled) {
                   soundControl.textContent = 'ğŸ”Š';
                   soundControl.classList.remove('muted');
               } else {
                   soundControl.textContent = 'ğŸ”‡';
                   soundControl.classList.add('muted');
               }
               
               // ä¿å­˜éŸ³æ•ˆè®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨
               localStorage.setItem('soundEnabled', soundEnabled);
           }
           
           // æŠ½å¥–è®°å½•åˆ†é¡µç›¸å…³å˜é‡
           let currentPage = 1;
           let hasMoreRecords = true;
           let isLoadingRecords = false;
           
           // ä»æœ¬åœ°å­˜å‚¨æ¢å¤éªŒè¯çŠ¶æ€
           async function loadVerificationState() {
               const savedUser = localStorage.getItem('lottery_user');
               const savedVerified = localStorage.getItem('lottery_verified');
               
               if (savedUser && savedVerified === 'true') {
                   try {
                       currentUser = JSON.parse(savedUser);
                       isVerified = true;
                       console.log('ä»æœ¬åœ°å­˜å‚¨æ¢å¤éªŒè¯çŠ¶æ€');
                       
                       // è°ƒç”¨APIè·å–ç”¨æˆ·æœ€æ–°ä¿¡æ¯
                       await refreshUserInfo();
                       
                       // æ˜¾ç¤ºè®¢å•æ¨¡å—
                       const ordersSection = document.querySelector('.orders-section');
                       if (ordersSection) {
                           ordersSection.style.display = 'block';
                       }
                   } catch (error) {
                       console.error('è§£ææœ¬åœ°å­˜å‚¨æ•°æ®å¤±è´¥:', error);
                       clearVerificationState();
                   }
               }
           }
           
           // åˆ·æ–°ç”¨æˆ·ä¿¡æ¯
           async function refreshUserInfo() {
               if (!currentUser || !currentUser.user_id) {
                   console.log('ç”¨æˆ·ä¿¡æ¯ä¸å®Œæ•´ï¼Œè·³è¿‡åˆ·æ–°');
                   return;
               }
               
               try {
                   console.log('æ­£åœ¨è·å–ç”¨æˆ·æœ€æ–°ä¿¡æ¯...');
                   const response = await fetch(`${API_BASE_URL}/my-coins/?user_id=${currentUser.user_id}`, {
                       method: 'GET',
                       headers: {
                           'Content-Type': 'application/json',
                       }
                   });

                   const data = await response.json();
                   
                   if (response.ok && data.code === 200) {
                       // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
                       currentUser = {
                           user_id: data.data.user_id,
                           name: data.data.name,
                           coins: data.data.coins,
                           kills: data.data.kills
                       };
                       
                       console.log('ç”¨æˆ·ä¿¡æ¯å·²æ›´æ–°:', currentUser);
                       
                       // æ›´æ–°é¡µé¢æ˜¾ç¤º
                       updateDrawQualification();
                       updateDrawCardsDisplay();
                       
                       // ä¿å­˜æ›´æ–°åçš„çŠ¶æ€
                       saveVerificationState();
                   } else {
                       console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', data);
                       // å¦‚æœè·å–å¤±è´¥ï¼Œæ¸…é™¤éªŒè¯çŠ¶æ€
                       clearVerificationState();
                   }
               } catch (error) {
                   console.error('åˆ·æ–°ç”¨æˆ·ä¿¡æ¯APIé”™è¯¯:', error);
                   // å¦‚æœç½‘ç»œé”™è¯¯ï¼Œä¿æŒå½“å‰çŠ¶æ€ä¸å˜
               }
           }
           
           // ä¿å­˜éªŒè¯çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
           function saveVerificationState() {
               if (currentUser && isVerified) {
                   localStorage.setItem('lottery_user', JSON.stringify(currentUser));
                   localStorage.setItem('lottery_verified', 'true');
                   console.log('éªŒè¯çŠ¶æ€å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨');
               }
           }
           
           // æ¸…é™¤éªŒè¯çŠ¶æ€
           function clearVerificationState() {
               localStorage.removeItem('lottery_user');
               localStorage.removeItem('lottery_verified');
               currentUser = null;
               isVerified = false;
               console.log('éªŒè¯çŠ¶æ€å·²æ¸…é™¤');
           }
          
          // å¥–å“åˆ—è¡¨ï¼ˆä¿ç•™ä½œä¸ºå¤‡ç”¨ï¼‰
          const prizes = [
              'ğŸ’» è‹¹æœç¬”è®°æœ¬',
              'ğŸ“± iPhone 7 MAX',
              'âŒš Apple Watch',
              'ğŸ§§ 500å…ƒçº¢åŒ…',
              'ğŸ§§ 200å…ƒçº¢åŒ…',
              'ğŸ§§ 100å…ƒçº¢åŒ…',
              'ğŸ§§ 50å…ƒçº¢åŒ…',
              'ğŸ§§ 10å…ƒçº¢åŒ…',
              'ğŸ è°¢è°¢å‚ä¸'
          ];

                                       // æŠ½å¥–åŠŸèƒ½
          // é˜²é‡å¤ç‚¹å‡»æ—¶é—´æˆ³
          let lastDrawClickTime = 0;
          
          async function startDraw(times) {
              // é˜²é‡å¤ç‚¹å‡»æ£€æŸ¥ - 1ç§’å†…åªèƒ½ç‚¹å‡»ä¸€æ¬¡
              const currentTime = Date.now();
              if (currentTime - lastDrawClickTime < 1000) {
                  showToast('ä½ çš„æ‰‹é€Ÿå¤ªå¿«äº†å§', 'warning');
                  return;
              }
              
              // è®°å½•ç‚¹å‡»æ—¶é—´
              lastDrawClickTime = currentTime;
              
              // è·å–draw-cardsåŒºåŸŸå¹¶æ·»åŠ loadingçŠ¶æ€
              const drawCards = document.getElementById('drawCards');
              drawCards.classList.add('loading');
              
              // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²éªŒè¯
          if (!isVerified || !currentUser) {
              showToast('è¯·å…ˆéªŒè¯èº«ä»½', 'error');
              return;
          }
              
              // æ’­æ”¾æŠ½å¥–éŸ³æ•ˆ
              playSound('draw');
              
              const drawPlaceholder = document.getElementById('drawPlaceholder');
              
              // éšè—æç¤ºæ–‡æ¡ˆ
              if (drawPlaceholder) {
                  drawPlaceholder.style.display = 'none';
              }
              
              drawCards.innerHTML = ''; // æ¸…ç©ºç°æœ‰å¡ç‰‡
              
              try {
                  // è°ƒç”¨çœŸå®æŠ½å¥–API
                  const response = await fetch(`${API_BASE_URL}/draw/`, {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json',
                      },
                      body: JSON.stringify({
                          user_id: currentUser.user_id,
                          draw_type: times
                      })
                  });

                  const data = await response.json();
                  
                  if (response.ok) {
                                           // æ›´æ–°ç”¨æˆ·é‡‘å¸
                     if (data.data && data.data.remaining_coins !== undefined) {
                         currentUser.coins = data.data.remaining_coins;
                         updateDrawQualification();
                     }
                      
                      // æ˜¾ç¤ºæŠ½å¥–ç»“æœ
                      if (data.data && data.data.draw_results) {
                          showDrawResults(data.data.draw_results, drawCards);
                      } else {
                          // å¦‚æœAPIæ²¡æœ‰è¿”å›ç»“æœï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ
                          showBackupDrawResults(times, drawCards);
                      }
                  } else {
                      // ç‰¹åˆ«å¤„ç†é‡‘å¸ä¸è¶³çš„æƒ…å†µ
                      if (data.message && data.message.includes('é‡‘å¸ä¸è¶³')) {
                          const costCoins = times === 1 ? 20 : 90;
                          const currentCoins = currentUser.coins || 0;
                          const needed = costCoins - currentCoins;
                          showToast(`é‡‘å¸ä¸è¶³ï¼Œæ— æ³•æŠ½å¥–\néœ€è¦${costCoins}é‡‘å¸ï¼Œå½“å‰${currentCoins}é‡‘å¸\nè¿˜å·®${needed}é‡‘å¸`, 'error');
                          
                          // é‡‘å¸ä¸è¶³æ—¶ï¼Œåœ¨drawCardsåŒºåŸŸæ˜¾ç¤ºå¦‚ä½•è·å–é‡‘å¸çš„æ–‡æ¡ˆ
                          drawCards.innerHTML = `
                              <div class="insufficient-coins-content">
                                  <div class="coins-title">å¦‚ä½•è·å–é‡‘å¸</div>
                                  <div class="coins-text">å‚ä¸æ¸¸æˆï¼Œé€šè¿‡æ¸¸æˆå¯¹æˆ˜è·å¾—é‡‘å¸</div>
                              </div>
                          `;
                          // ç§»é™¤loadingçŠ¶æ€
                          drawCards.classList.remove('loading');
                          return; // ç›´æ¥è¿”å›ï¼Œä¸æ‰§è¡Œåç»­çš„å¤‡ç”¨æ–¹æ¡ˆ
                      } else {
                          showToast(data.message || 'æŠ½å¥–å¤±è´¥', 'error');
                          // å…¶ä»–é”™è¯¯æ—¶ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ
                          showBackupDrawResults(times, drawCards);
                      }
                  }
              } catch (error) {
                  console.error('æŠ½å¥–APIé”™è¯¯:', error);
                  showToast('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
                  
                  // ç½‘ç»œé”™è¯¯æ—¶ï¼Œæ¢å¤æç¤ºæ–‡æ¡ˆæ˜¾ç¤ºï¼Œä¸å±•ç¤ºä»»ä½•å¡ç‰‡
                  if (drawPlaceholder) {
                      drawPlaceholder.style.display = 'block';
                  }
              } finally {
                  // ç§»é™¤loadingçŠ¶æ€
                  drawCards.classList.remove('loading');
              }
          }
          
          // æ˜¾ç¤ºæŠ½å¥–ç»“æœ
          function showDrawResults(prizes, container) {
              prizes.forEach((prize, index) => {
                  setTimeout(() => {
                      const card = document.createElement('div');
                      card.className = 'draw-card';
                      
                      card.innerHTML = `
                          <div class="draw-card-front">?</div>
                          <div class="draw-card-back">${prize.prize_name || prize}</div>
                      `;
                      container.appendChild(card);
                      
                      // å»¶è¿Ÿç¿»è½¬å¡ç‰‡ - ç¡®ä¿è‡³å°‘ç­‰å¾…1ç§’å†ç¿»è½¬
                      setTimeout(() => {
                          card.classList.add('flipped');
                          
                          // æ’­æ”¾ç¿»è½¬éŸ³æ•ˆ
                          playSound('flip');
                          
                          // ç¿»è½¬åå†æ·»åŠ é‡‘è‰²è¾¹æ¡†æ ·å¼ï¼ˆå¦‚æœæ˜¯å¥½å¥–å“ï¼‰
                          if (prize.prize_type <= 3) {
                              card.classList.add('golden-prize');
                              // æ’­æ”¾ä¸­å¥–éŸ³æ•ˆ
                              playSound('win');
                          }
                      }, 1000 + index * 500);
                  }, index * 200);
              });
          }
          
          // å¤‡ç”¨æŠ½å¥–ç»“æœï¼ˆå½“APIä¸å¯ç”¨æ—¶ï¼‰
          function showBackupDrawResults(times, container) {
              const cards = [];
              for (let i = 0; i < times; i++) {
                  const card = document.createElement('div');
                  card.className = 'draw-card';
                  
                  card.innerHTML = `
                      <div class="draw-card-front">?</div>
                      <div class="draw-card-back">${getRandomPrize()}</div>
                  `;
                  container.appendChild(card);
                  cards.push(card);
              }
              
              // å»¶è¿Ÿç¿»è½¬å¡ç‰‡ - ç¡®ä¿è‡³å°‘ç­‰å¾…1ç§’å†ç¿»è½¬
              setTimeout(() => {
                  cards.forEach((card, index) => {
                      setTimeout(() => {
                          card.classList.add('flipped');
                          
                          // æ’­æ”¾ç¿»è½¬éŸ³æ•ˆ
                          playSound('flip');
                          
                          // ç¿»è½¬åå†éšæœºæ·»åŠ é‡‘è‰²è¾¹æ¡†ï¼ˆæ¨¡æ‹Ÿå¥½å¥–å“ï¼‰
                          if (Math.random() > 0.7) { // 30%æ¦‚ç‡è·å¾—é‡‘è‰²è¾¹æ¡†
                              card.classList.add('golden-prize');
                              // æ’­æ”¾ä¸­å¥–éŸ³æ•ˆ
                              playSound('win');
                          }
                      }, 1000 + index * 500);
                  });
              }, 1000);
          }

                   // è·å–éšæœºå¥–å“
         function getRandomPrize() {
             return prizes[Math.floor(Math.random() * prizes.length)];
         }
         
         // è·å–ç”¨æˆ·é»˜è®¤åœ°å€
         async function getUserDefaultAddress() {
             try {
                 const response = await fetch(`${API_BASE_URL}/user-address/`, {
                     method: 'GET',
                     headers: {
                       'Content-Type': 'application/json',
                       'Accept': 'application/json',
                     }
                 });
                 
                 if (response.ok) {
                     const data = await response.json();
                     if (data.data && data.data.length > 0) {
                         // ä¼˜å…ˆè¿”å›é»˜è®¤åœ°å€ï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤åœ°å€åˆ™è¿”å›ç¬¬ä¸€ä¸ªåœ°å€
                         const defaultAddress = data.data.find(addr => addr.is_default) || data.data[0];
                         return defaultAddress;
                     }
                 }
                 return null;
             } catch (error) {
                 console.error('è·å–ç”¨æˆ·åœ°å€å¤±è´¥:', error);
                 return null;
             }
         }
         
                   // éªŒè¯å¤„ç†å‡½æ•°
          async function handleVerification() {
              const code = document.getElementById('verificationCode').value.trim();
              if (!code) {
                  showToast('è¯·è¾“å…¥éªŒè¯ç ', 'error');
                  return;
              }
              
              try {
                  const success = await verifyUser(code);
                  if (success) {
                      // éªŒè¯æˆåŠŸåä¿å­˜çŠ¶æ€å¹¶æ›´æ–°æ˜¾ç¤º
                      saveVerificationState();
                      updateDrawCardsDisplay();
                      updateDrawQualification();
                  }
              } catch (error) {
                  console.error('éªŒè¯å¤±è´¥:', error);
              }
          }
          
                                           // æ›´æ–°æŠ½å¥–å¡ç‰‡åŒºåŸŸæ˜¾ç¤º
            function updateDrawCardsDisplay() {
                const drawPlaceholder = document.getElementById('drawPlaceholder');
                const drawButtons = document.getElementById('drawButtons');
                const verificationSection = document.querySelector('.verification-section');
                const drawOptionsSection = document.querySelector('.draw-options-section');
                
                if (isVerified && currentUser) {
                    // éªŒè¯æˆåŠŸï¼Œæ˜¾ç¤ºæŠ½å¥–æç¤ºå¹¶æ˜¾ç¤ºæŠ½å¥–æŒ‰é’®
                    drawPlaceholder.innerHTML = `
                        <div class="placeholder-icon">ğŸ¯</div>
                        <div class="placeholder-text">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æŠ½å¥–</div>
                        <div class="placeholder-subtext">é€‰æ‹©æŠ½å¥–æ¬¡æ•°ï¼Œèµ¢å–ä¸°åšå¥–å“</div>

                    `;
                    // æ˜¾ç¤ºæŠ½å¥–æŒ‰é’®åŒºåŸŸ
                    if (drawButtons) {
                        drawButtons.style.display = 'flex';
                    }
                    // éšè—éªŒè¯åŒºåŸŸï¼Œæ˜¾ç¤ºæŠ½å¥–é€‰é¡¹åŒºåŸŸ
                    if (verificationSection) {
                        verificationSection.style.display = 'none';
                    }
                    if (drawOptionsSection) {
                        drawOptionsSection.style.display = 'flex';
                    }
                } else {
                    // æœªéªŒè¯ï¼Œæ˜¾ç¤ºéªŒè¯è¡¨å•
                    drawPlaceholder.innerHTML = `
                        <div class="placeholder-icon">ğŸ”</div>
                        <div class="placeholder-text">è¯·è¾“å…¥éªŒè¯ç </div>
                       
                    `;
                    // æ˜¾ç¤ºéªŒè¯åŒºåŸŸï¼Œéšè—æŠ½å¥–é€‰é¡¹åŒºåŸŸ
                    if (drawButtons) {
                        drawButtons.style.display = 'flex';
                    }
                    if (verificationSection) {
                        verificationSection.style.display = 'flex';
                    }
                    if (drawOptionsSection) {
                        drawOptionsSection.style.display = 'none';
                    }
                }
             }
            
                         // å¤„ç†å›è½¦é”®
             function handleKeyPress(event) {
                 if (event.key === 'Enter') {
                     handleVerification();
                 }
             }
             
             // é™åˆ¶è¾“å…¥æ¡†é•¿åº¦å’Œå­—ç¬¦ç±»å‹
             function limitInput(input) {
                 // åªå…è®¸æ•°å­—
                //  input.value = input.value.replace(/[^0-9]/g, '');
                 
                 // é™åˆ¶æœ€å¤§é•¿åº¦ä¸º8ä½
                 if (input.value.length > 8) {
                     input.value = input.value.slice(0, 8);
                 }
             }
          
          // ç”¨æˆ·éªŒè¯åŠŸèƒ½
          async function verifyUser(code) {
             try {
                 const response = await fetch(`${API_BASE_URL}/verify/`, {
                     method: 'POST',
                     headers: {
                         'Content-Type': 'application/json',
                     },
                                           body: JSON.stringify({
                          password: code
                      })
                 });

                 const data = await response.json();
                 
                 if (response.ok) {
                     currentUser = data.data;
                     isVerified = true;
                     
                     // ä¿å­˜éªŒè¯çŠ¶æ€
                     saveVerificationState();
                     
                     // æ›´æ–°é¡µé¢æ˜¾ç¤º
                     updateDrawQualification();
                     updateDrawCardsDisplay();
                     
                     // æ˜¾ç¤ºè®¢å•æ¨¡å—å¹¶åŠ è½½ç”¨æˆ·è®¢å•
                     const ordersSection = document.querySelector('.orders-section');
                     if (ordersSection) {
                         ordersSection.style.display = 'block';
                     }
                     loadUserOrders();
                     
                     showToast('éªŒè¯æˆåŠŸï¼', 'success');
                     return true;
                 } else {
                     showToast(data.message || 'éªŒè¯å¤±è´¥', 'error');
                     return false;
                 }
             } catch (error) {
                 console.error('éªŒè¯APIé”™è¯¯:', error);
                 showToast('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
                 return false;
             }
         }
         
         // æ›´æ–°æŠ½å¥–èµ„æ ¼æ˜¾ç¤º
         function updateDrawQualification() {
             const qualificationElement = document.getElementById('drawQualification');
             if (currentUser && isVerified) {
                 qualificationElement.textContent = `${currentUser.name || 0}ï¼Œæ‚¨å½“å‰æ‹¥æœ‰ ${currentUser.coins || 0} é‡‘å¸`;
             } else {
                 qualificationElement.textContent = 'å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œå›å¤ã€è´¦å·ã€‘è·å¾—éªŒè¯ç ';
             }
         }
         
                             // Toastæç¤ºåŠŸèƒ½
          function showToast(message, type = 'info') {
              // åˆ›å»ºtoastå…ƒç´ 
              const toast = document.createElement('div');
              toast.style.cssText = `
                  position: fixed;
                  top: 20px;
                  right: -320px;
                  background: ${type === 'error' ? '#ff4757' : type === 'success' ? '#2ed573' : '#3742fa'};
                  color: white;
                  padding: 16px 24px;
                  border-radius: 12px;
                  z-index: 10000;
                  font-size: 16px;
                  font-weight: bold;
                  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
                  backdrop-filter: blur(10px);
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  min-width: 200px;
                  max-width: 300px;
                  text-align: center;
                  transition: right 0.4s ease;
              `;
              toast.textContent = message;
              
              document.body.appendChild(toast);
              
              // ä»å³åˆ°å·¦æ»‘å…¥
              setTimeout(() => {
                  toast.style.right = '20px';
              }, 100);
              
              // 2ç§’åç›´æ¥æ¶ˆå¤±
              setTimeout(() => {
                  if (toast.parentNode) {
                      toast.parentNode.removeChild(toast);
                  }
              }, 2000);
          }



        // æˆ‘çš„å¥–åŠ±æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.querySelector('.rewards-btn').addEventListener('click', function() {
            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²éªŒè¯
            if (!isVerified || !currentUser) {
                showToast('è¯·å…ˆéªŒè¯èº«ä»½', 'error');
                return;
            }
            
            // æ˜¾ç¤ºç›²ç›’è®¢å•å¼¹çª—
            showOrdersModal();
        });

                                                                       // å»è´­ç‰©æŒ‰é’®ç‚¹å‡»äº‹ä»¶
           document.querySelector('.shopping-btn').addEventListener('click', function() {
               // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²éªŒè¯
               if (!isVerified || !currentUser) {
                   showToast('è¯·å…ˆéªŒè¯èº«ä»½', 'error');
                   return;
               }
               
                              // æ£€æŸ¥ç”¨æˆ·é‡‘å¸æ˜¯å¦è¶³å¤Ÿï¼ˆç›²ç›’ä»·æ ¼2000é‡‘å¸ï¼‰
                if (!currentUser.coins || currentUser.coins < 2000) {
                    const needed = 2000 - (currentUser.coins || 0);
                    showToast(`é‡‘å¸ä¸è¶³ï¼Œæ— æ³•å…‘æ¢ç›²ç›’\néœ€è¦2000é‡‘å¸ï¼Œå½“å‰${currentUser.coins || 0}é‡‘å¸\nè¿˜å·®${needed}é‡‘å¸`, 'error');
                    return;
                }
               
               // å…ˆæŸ¥è¯¢ç”¨æˆ·åœ°å€ï¼Œç„¶åæ˜¾ç¤ºåœ°å€ç®¡ç†å¼¹çª—
               loadUserAddresses();
           });
          
                     // åˆ›å»ºç›²ç›’è®¢å• - å‚è€ƒlottery.htmlçš„ç»Ÿä¸€ä¸‹å•é€»è¾‘
           async function createBlindBoxOrder() {
               try {
                   // æ˜¾ç¤ºåŠ è½½æç¤º
                   showToast('æ­£åœ¨åˆ›å»ºç›²ç›’è®¢å•...', 'info');
                   
                   // è·å–ç”¨æˆ·é€‰ä¸­çš„åœ°å€
                   const selectedAddress = getSelectedAddress();
                   if (!selectedAddress) {
                       showToast('è¯·å…ˆæ·»åŠ æ”¶è´§åœ°å€', 'error');
                       return;
                   }
                   
                   // å‡†å¤‡è¯·æ±‚æ•°æ® - ä½¿ç”¨å›ºå®šçš„item_idï¼Œå‚è€ƒlottery.htmlé€»è¾‘
                   const requestData = {
                       user_id: currentUser.user_id,
                       item_id: '5c1563fa-e38f-43c4-b7ad-aaaed0458304',  // å›ºå®šç›²ç›’å•†å“ID
                       contact_info: {
                           name: selectedAddress.name,
                           phone: selectedAddress.phone,
                           address: selectedAddress.address
                       }
                   };
                   
                   console.log('ç›²ç›’è®¢å•è¯·æ±‚æ•°æ®:', requestData);
                   console.log('è¯·æ±‚URL:', `${API_BASE_URL.replace('/lottery', '/shop')}/exchange/`);
                   
                   // è°ƒç”¨ç»Ÿä¸€çš„å•†å“å…‘æ¢API - å‚è€ƒlottery.htmlçš„APIè°ƒç”¨æ–¹å¼
                   const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/exchange/`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify(requestData)
                   });

                   console.log('å“åº”çŠ¶æ€:', response.status);
                   const data = await response.json();
                   console.log('å“åº”æ•°æ®:', data);
                   
                   if (response.ok) {
                       // æ›´æ–°ç”¨æˆ·é‡‘å¸ - å‚è€ƒlottery.htmlçš„é‡‘å¸æ›´æ–°é€»è¾‘
                       if (data.data && data.data.remaining_coins !== undefined) {
                           currentUser.coins = data.data.remaining_coins;
                           updateDrawQualification();
                           
                           // æ›´æ–°ç¼“å­˜æ•°æ®
                           const cachedUserData = localStorage.getItem('cachedUserData');
                           if (cachedUserData) {
                               const cachedUser = JSON.parse(cachedUserData);
                               cachedUser.coins = currentUser.coins;
                               localStorage.setItem('cachedUserData', JSON.stringify(cachedUser));
                           }
                       }
                       
                       // æ˜¾ç¤ºæˆåŠŸä¿¡æ¯ - å‚è€ƒlottery.htmlçš„æˆåŠŸåé¦ˆ
                       const orderInfo = data.data;
                       showToast(`ç›²ç›’è®¢å•åˆ›å»ºæˆåŠŸï¼\nè®¢å•å·ï¼š${orderInfo.order_id}`, 'success');
                       
                       // åˆ·æ–°è®¢å•åˆ—è¡¨
                       loadUserOrders();
                       
                       // æ˜¾ç¤ºè¯¦ç»†è®¢å•ä¿¡æ¯ - å‚è€ƒlottery.htmlçš„è®¢å•è¯¦æƒ…å±•ç¤º
                       setTimeout(() => {
                           showOrderDetails(orderInfo, requestData.contact_info);
                       }, 1000);
                       
                   } else {
                       console.error('APIé”™è¯¯å“åº”:', data);
                       showToast(data.message || `ç›²ç›’è®¢å•åˆ›å»ºå¤±è´¥ (${response.status})`, 'error');
                   }
               } catch (error) {
                   console.error('ç›²ç›’è®¢å•APIé”™è¯¯:', error);
                   showToast(`ç½‘ç»œé”™è¯¯: ${error.message}`, 'error');
               }
           }

           // æ˜¾ç¤ºè®¢å•è¯¦æƒ… - å‚è€ƒlottery.htmlçš„è®¢å•è¯¦æƒ…å±•ç¤º
           function showOrderDetails(orderData, contactInfo) {
               const orderHtml = `
                   <div style="background: rgba(0,0,0,0.9); position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10000; display: flex; align-items: center; justify-content: center;">
                       <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 30px; max-width: 500px; width: 90%; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                           <h3 style="color: #ffd700; text-align: center; margin-bottom: 20px;">ğŸ‰ ç›²ç›’è®¢å•åˆ›å»ºæˆåŠŸ</h3>
                           <div style="color: #fff; line-height: 1.6;">
                               <p><strong>å•†å“åç§°ï¼š</strong>${orderData.item_name}</p>
                               <p><strong>è®¢å•å·ï¼š</strong>${orderData.order_id}</p>
                               <p><strong>å…‘æ¢ä»·æ ¼ï¼š</strong>${orderData.price} ğŸª™</p>
                               <p><strong>å‰©ä½™é‡‘å¸ï¼š</strong>${orderData.remaining_coins} ğŸª™</p>
                               <p><strong>æ”¶è´§äººï¼š</strong>${contactInfo.name}</p>
                               <p><strong>è”ç³»ç”µè¯ï¼š</strong>${contactInfo.phone}</p>
                               <p><strong>æ”¶è´§åœ°å€ï¼š</strong>${contactInfo.address}</p>
                               <p><strong>å…‘æ¢æ—¶é—´ï¼š</strong>${new Date(orderData.exchange_time).toLocaleString()}</p>
                               <p><strong>è®¢å•çŠ¶æ€ï¼š</strong><span style="color: #ffc107;">å¾…å‘è´§</span></p>
                           </div>
                           <div style="text-align: center; margin-top: 20px;">
                               <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer;">ç¡®å®š</button>
                           </div>
                       </div>
                   </div>
               `;
               document.body.insertAdjacentHTML('beforeend', orderHtml);
           }

                 // å¥–å“ç‚¹å‡»äº‹ä»¶ - å·²æ³¨é‡Šï¼Œå› ä¸ºå¥–å“ç½‘æ ¼ä¸å­˜åœ¨
         // document.querySelectorAll('.prize-item').forEach(item => {
         //     item.addEventListener('click', function() {
         //         const prizeName = this.querySelector('.prize-name').textContent;
         //         alert(`å¥–å“è¯¦æƒ…ï¼š${prizeName}`);
         //     });
         // });

                   // åŠ¨æ€ç”Ÿæˆç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼ˆå®šæ—¶æ›´æ–°æ–‡æ¡ˆï¼‰
          let userInfoUpdateTimer = null;
          
          function generateUserInfoData() {
              const container = document.getElementById('userInfoContainer');
              
              // ç”Ÿæˆè„±æ•ç”¨æˆ·å
              const generateDesensitizedName = () => {
                  const prefixes = ['ç”¨æˆ·', 'ç©å®¶', 'å¹¸è¿å„¿', 'æŠ½å¥–è€…', 'å°ä¼™ä¼´', 'æœ‹å‹', 'ç”¨æˆ·', 'ç©å®¶'];
                  const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                  const suffix = Math.floor(Math.random() * 999) + 1;
                  return `${prefix}***${suffix}`;
              };
              
              // ç”Ÿæˆé‡‘å¸æ•°é‡ï¼ˆç®€åŒ–ä¸ºæŒ‡å®šçš„é‡‘å¸æ•°é‡ï¼‰
              const generateCoinAmount = () => {
                  const amounts = [5, 10, 20, 50, 500, 2000];
                  return amounts[Math.floor(Math.random() * amounts.length)];
              };
              
              // ç®€åŒ–çš„æ¶ˆæ¯ç”Ÿæˆå‡½æ•°
              const generateRandomMessage = () => {
                  const userName = generateDesensitizedName();
                  const coinAmount = generateCoinAmount();
                  return `${userName}æŠ½ä¸­${coinAmount}é‡‘å¸`;
              };
              
              // æ›´æ–°æ–‡æ¡ˆå†…å®¹
              const updateUserInfoMessage = () => {
                  const userStatusElement = container.querySelector('.user-status');
                  if (userStatusElement) {
                      const newMessage = generateRandomMessage();
                      userStatusElement.textContent = newMessage;
                      console.log('æ›´æ–°æ–‡æ¡ˆ:', newMessage);
                  }
              };
              
              console.log('å¼€å§‹ç”Ÿæˆç”¨æˆ·ä¿¡æ¯æ•°æ®');
              
              // æ¸…ç©ºç°æœ‰å†…å®¹
              container.innerHTML = '';
              
              // ç”Ÿæˆ1ä¸ªç”¨æˆ·ä¿¡æ¯é¡¹
              const initialMessage = generateRandomMessage();
              
              const userInfoItem = document.createElement('div');
              userInfoItem.className = 'user-info-item';
              userInfoItem.innerHTML = `
                  <div class="user-avatar">ğŸ‘¤</div>
                  <div class="user-status">${initialMessage}</div>
              `;
              
              container.appendChild(userInfoItem);
              
              console.log('ç”Ÿæˆäº†1ä¸ªç”¨æˆ·ä¿¡æ¯é¡¹');
              
              // ç›´æ¥æ˜¾ç¤ºï¼Œä¸éœ€è¦åˆ‡æ¢åŠ¨ç”»
              if (userInfoItem) {
                  userInfoItem.classList.add('active');
              }
              
              // å¯åŠ¨å®šæ—¶æ›´æ–°ï¼ˆæ¯3-5ç§’æ›´æ–°ä¸€æ¬¡ï¼‰
              if (userInfoUpdateTimer) {
                  clearInterval(userInfoUpdateTimer);
              }
              
              userInfoUpdateTimer = setInterval(() => {
                  updateUserInfoMessage();
              }, 3000 + Math.random() * 2000); // 3-5ç§’éšæœºé—´éš”
              
              console.log('å¯åŠ¨å®šæ—¶æ›´æ–°æ–‡æ¡ˆåŠŸèƒ½');
          }

                     // é¡µé¢å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨
                     window.addEventListener('beforeunload', function() {
                         if (userInfoUpdateTimer) {
                             clearInterval(userInfoUpdateTimer);
                             console.log('æ¸…ç†ç”¨æˆ·ä¿¡æ¯æ›´æ–°å®šæ—¶å™¨');
                         }
                     });
                     
                     // é¡µé¢åŠ è½½æ—¶ç”Ÿæˆç”¨æˆ·ä¿¡æ¯æ•°æ®
                        window.addEventListener('load', async function() {
                 console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–ç”¨æˆ·ä¿¡æ¯');
                 await loadVerificationState(); // å…ˆåŠ è½½éªŒè¯çŠ¶æ€
                 generateUserInfoData();
                 updateDrawQualification();
                 updateDrawCardsDisplay();
                 
                 // åŠ è½½ç”¨æˆ·è®¢å•
                 if (isVerified && currentUser) {
                     loadUserOrders();
                 }
             });
          
                      // ä¹Ÿå°è¯•åœ¨DOMContentLoadedæ—¶æ‰§è¡Œ
            document.addEventListener('DOMContentLoaded', function() {
                console.log('DOMåŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–ç”¨æˆ·ä¿¡æ¯');
                generateUserInfoData();
            });

            // åœ°å€ç®¡ç†ç›¸å…³å˜é‡
            let userAddresses = [];
            let editingAddressId = null;
            let selectedAddressId = null; // æ–°å¢ï¼šé€‰ä¸­çš„åœ°å€ID

            // è·å–ç”¨æˆ·é»˜è®¤åœ°å€ - å‚è€ƒlottery.htmlçš„åœ°å€è·å–é€»è¾‘
            async function getUserDefaultAddress() {
                try {
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/address/?user_id=${currentUser.user_id}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok && data.data.addresses && data.data.addresses.length > 0) {
                        // è¿”å›ç¬¬ä¸€ä¸ªåœ°å€ä½œä¸ºé»˜è®¤åœ°å€
                        return data.data.addresses[0];
                    } else {
                        return null;
                    }
                } catch (error) {
                    console.error('è·å–ç”¨æˆ·åœ°å€å¤±è´¥:', error);
                    return null;
                }
            }

            // è·å–é€‰ä¸­çš„åœ°å€
            function getSelectedAddress() {
                if (!selectedAddressId) {
                    // å¦‚æœæ²¡æœ‰é€‰ä¸­åœ°å€ï¼Œè¿”å›é»˜è®¤åœ°å€ï¼ˆç¬¬ä¸€ä¸ªåœ°å€ï¼‰
                    return userAddresses.length > 0 ? userAddresses[0] : null;
                }
                return userAddresses.find(addr => addr.id === selectedAddressId) || userAddresses[0];
            }

            // é€‰æ‹©åœ°å€
            function selectAddress(addressId) {
                selectedAddressId = addressId;
                // æ›´æ–°åœ°å€åˆ—è¡¨çš„é€‰ä¸­çŠ¶æ€
                renderAddressList();
            }

            // åŠ è½½ç”¨æˆ·åœ°å€
            async function loadUserAddresses() {
                try {
                    showToast('æ­£åœ¨åŠ è½½åœ°å€ä¿¡æ¯...', 'info');
                    
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/address/?user_id=${currentUser.user_id}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok) {
                        userAddresses = data.data.addresses || [];
                        // è®¾ç½®é»˜è®¤é€‰ä¸­åœ°å€ï¼ˆç¬¬ä¸€ä¸ªåœ°å€æˆ–é»˜è®¤åœ°å€ï¼‰
                        if (userAddresses.length > 0) {
                            const defaultAddress = userAddresses.find(addr => addr.is_default) || userAddresses[0];
                            selectedAddressId = defaultAddress.id;
                        }
                        showAddressModal();
                    } else {
                        console.error('åŠ è½½åœ°å€å¤±è´¥:', data);
                        showToast(data.message || 'åŠ è½½åœ°å€å¤±è´¥', 'error');
                        // å³ä½¿åŠ è½½å¤±è´¥ä¹Ÿæ˜¾ç¤ºå¼¹çª—ï¼Œå…è®¸ç”¨æˆ·æ·»åŠ åœ°å€
                        userAddresses = [];
                        showAddressModal();
                    }
                } catch (error) {
                    console.error('åœ°å€APIé”™è¯¯:', error);
                    showToast('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
                    // å³ä½¿ç½‘ç»œé”™è¯¯ä¹Ÿæ˜¾ç¤ºå¼¹çª—ï¼Œå…è®¸ç”¨æˆ·æ·»åŠ åœ°å€
                    userAddresses = [];
                    showAddressModal();
                }
            }

            // æ˜¾ç¤ºåœ°å€ç®¡ç†å¼¹çª—
            function showAddressModal() {
                const modal = document.getElementById('addressModal');
                modal.style.display = 'block';
                renderAddressList();
            }

            // å…³é—­åœ°å€ç®¡ç†å¼¹çª—
            function closeAddressModal() {
                const modal = document.getElementById('addressModal');
                modal.style.display = 'none';
                hideAddressForm();
            }

            // æ˜¾ç¤ºç›²ç›’è®¢å•å¼¹çª—
            function showOrdersModal() {
                const modal = document.getElementById('ordersModal');
                modal.style.display = 'block';
                
                loadModalOrders();
                
                // æ·»åŠ æ»šåŠ¨ç›‘å¬å™¨
                const container = document.getElementById('modalOrdersContainer');
                if (container) {
                    container.addEventListener('scroll', handleModalScroll);
                }
            }

            // å…³é—­ç›²ç›’è®¢å•å¼¹çª—
            function closeOrdersModal() {
                const modal = document.getElementById('ordersModal');
                modal.style.display = 'none';
                
                // ç§»é™¤æ»šåŠ¨ç›‘å¬å™¨
                const container = document.getElementById('modalOrdersContainer');
                if (container) {
                    container.removeEventListener('scroll', handleModalScroll);
                }
            }

            // åŠ è½½å¼¹çª—ä¸­çš„æŠ½å¥–è®°å½•
            async function loadModalOrders(page = 1, append = false) {
                if (isLoadingRecords) return;
                
                try {
                    isLoadingRecords = true;
                    const loadingElement = document.getElementById('modalLoadingOrders');
                    const container = document.getElementById('modalOrdersContainer');
                    
                    if (page === 1 && container) {
                        // é‡ç½®çŠ¶æ€
                        currentPage = 1;
                        hasMoreRecords = true;
                        container.innerHTML = '';
                    }
                    
                    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                    if (loadingElement) {
                        loadingElement.style.display = 'block';
                    }
                    
                    // è°ƒç”¨æ–°çš„æŠ½å¥–è®°å½•API
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '')}/lottery-draw-records/?user_id=${currentUser.user_id}&page=${page}&per_page=10`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok && data.code === 200 && data.data.records) {
                        // æ˜¾ç¤ºç”¨æˆ·çš„æŠ½å¥–è®°å½•
                        renderModalRecords(data.data.records, append);
                        
                        // æ›´æ–°åˆ†é¡µçŠ¶æ€
                        hasMoreRecords = data.data.has_next;
                        currentPage = page;
                    } else {
                        console.error('åŠ è½½æŠ½å¥–è®°å½•å¤±è´¥:', data);
                        if (page === 1) {
                            showToast('åŠ è½½æŠ½å¥–è®°å½•å¤±è´¥', 'error');
                            showNoModalOrders();
                        }
                    }
                } catch (error) {
                    console.error('æŠ½å¥–è®°å½•APIé”™è¯¯:', error);
                    if (page === 1) {
                        showToast('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
                        showNoModalOrders();
                    }
                } finally {
                    isLoadingRecords = false;
                    const loadingElement = document.getElementById('modalLoadingOrders');
                    if (loadingElement) {
                        loadingElement.style.display = 'none';
                    }
                    
                    // ç§»é™¤è®¢å•å¼¹çª—loadingçŠ¶æ€
                    const ordersModal = document.getElementById('ordersModal');
                    if (ordersModal) {
                        ordersModal.classList.remove('loading');
                    }
                }
            }

            // æ¸²æŸ“å¼¹çª—ä¸­çš„æŠ½å¥–è®°å½•åˆ—è¡¨
            function renderModalRecords(records, append = false) {
                const container = document.getElementById('modalOrdersContainer');
                const loadingElement = document.getElementById('modalLoadingOrders');
                
                // éšè—åŠ è½½çŠ¶æ€
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }
                
                if (records.length === 0 && !append) {
                    showNoModalOrders();
                    return;
                }
                
                const recordsHTML = records.map(record => {
                    const statusText = record.is_special ? 'ç‰¹æ®Šå¥–åŠ±' : 'æ™®é€šé‡‘å¸';
                    const statusClass = record.is_special ? 'special' : 'completed';
                    
                    // æ ¹æ®å¥–å“ç±»å‹æ˜¾ç¤ºä¸åŒçš„å›¾æ ‡
                    let icon = 'ğŸ';
                    if (record.prize_type === 5) icon = 'ğŸ’°'; // é‡‘å¸
                    else if (record.prize_type === 4) icon = 'ğŸ¯'; // å››ç­‰å¥–
                    else if (record.prize_type === 3) icon = 'ğŸ†'; // ä¸‰ç­‰å¥–
                    else if (record.prize_type === 2) icon = 'ğŸ¥ˆ'; // äºŒç­‰å¥–
                    else if (record.prize_type === 1) icon = 'ğŸ¥‡'; // ä¸€ç­‰å¥–
                    
                    return `
                        <div class="lottery-record-item">
                            <div class="lottery-record-header">
                                <div class="lottery-record-info">
                                    <div class="lottery-record-icon">
                                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">${icon}</div>
                                    </div>
                                    <div class="lottery-record-details">
                                        ${record.earned_coins > 0 ? `<div class="detail-item">
                                            <strong>è·å¾—ï¼š</strong>${record.earned_coins}ğŸ’°
                                        </div>` : ''}
                                    </div>
                                </div>
                                <div class="lottery-record-status ${statusClass}">${statusText}</div>
                            </div>
                            <div class="lottery-record-content">
                                <div class="detail-item">
                                    <strong>æŠ½å¥–æ—¶é—´ï¼š</strong>${record.draw_time}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                if (container) {
                    if (append) {
                        container.innerHTML += recordsHTML;
                    } else {
                        container.innerHTML = recordsHTML;
                    }
                }
                
                // å¦‚æœæ²¡æœ‰æ›´å¤šæ•°æ®ï¼Œæ˜¾ç¤ºåŠ è½½å®Œæˆæç¤º
                if (!hasMoreRecords && records.length > 0 && container) {
                    container.innerHTML += `
                        <div style="text-align: center; padding: 20px; color: #999; font-size: 0.9rem;">
                            å·²åŠ è½½å…¨éƒ¨è®°å½•
                        </div>
                    `;
                }
            }
            
            // è·å–å¥–å“ç±»å‹æ–‡æœ¬
            function getPrizeTypeText(prizeType) {
                switch(prizeType) {
                    case 1: return 'ä¸€ç­‰å¥–';
                    case 2: return 'äºŒç­‰å¥–';
                    case 3: return 'ä¸‰ç­‰å¥–';
                    case 4: return 'å››ç­‰å¥–';
                    case 5: return 'äº”ç­‰å¥–';
                    default: return 'æœªçŸ¥ç±»å‹';
                }
            }

            // å¤„ç†å¼¹çª—æ»šåŠ¨äº‹ä»¶
            function handleModalScroll(event) {
                const container = event.target;
                const scrollTop = container.scrollTop;
                const scrollHeight = container.scrollHeight;
                const clientHeight = container.clientHeight;
                
                // å½“æ»šåŠ¨åˆ°åº•éƒ¨æ—¶åŠ è½½æ›´å¤šæ•°æ®
                if (scrollTop + clientHeight >= scrollHeight - 50 && hasMoreRecords && !isLoadingRecords) {
                    loadModalOrders(currentPage + 1, true);
                }
            }
            
            // æ˜¾ç¤ºå¼¹çª—ä¸­æ— è®°å½•ä¿¡æ¯
            function showNoModalOrders() {
                const container = document.getElementById('modalOrdersContainer');
                const loadingElement = document.getElementById('modalLoadingOrders');
                
                // éšè—åŠ è½½çŠ¶æ€
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }
                
                if (container) {
                    container.innerHTML = `
                        <div class="no-orders">
                            <div class="no-orders-icon">ğŸ“‹</div>
                            <div>æš‚æ— æŠ½å¥–è®°å½•</div>
                            <div style="font-size: 0.9rem; margin-top: 10px; color: #999;">å¿«å»å‚ä¸æŠ½å¥–å§ï¼</div>
                        </div>
                    `;
                }
            }

            // æ¸²æŸ“åœ°å€åˆ—è¡¨
            function renderAddressList() {
                const addressList = document.getElementById('addressList');
                
                if (userAddresses.length === 0) {
                    addressList.innerHTML = `
                        <div class="no-address">
                            <div class="no-address-icon">ğŸ“</div>
                            <div>æš‚æ— æ”¶è´§åœ°å€</div>
                            <div style="font-size: 0.9rem; margin-top: 10px; color: #999;">è¯·æ·»åŠ æ”¶è´§åœ°å€ä»¥ä¾¿å…‘æ¢ç›²ç›’</div>
                        </div>
                    `;
                } else {
                    addressList.innerHTML = userAddresses.map(address => {
                        const isSelected = selectedAddressId === address.id || (!selectedAddressId && address.is_default);
                        return `
                            <div class="address-item ${address.is_default ? 'default' : ''} ${isSelected ? 'selected' : ''}" data-id="${address.id}" onclick="selectAddress('${address.id}')" style="cursor: pointer;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="flex: 1;">
                                        <div class="address-name">${address.name}</div>
                                        <div class="address-phone">${address.phone}</div>
                                        <div class="address-detail">${address.address}</div>
                                    </div>
                                    <div style="color: #ffd700; font-size: 1.2rem;">
                                        ${isSelected ? 'âœ“' : 'â—‹'}
                                    </div>
                                </div>
                                <div style="margin-top: 10px; display: flex; gap: 10px;">
                                    <button onclick="event.stopPropagation(); editAddress('${address.id}')" style="padding: 5px 10px; background: #f1f1f1; border: none; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">ç¼–è¾‘</button>
                                    <button onclick="event.stopPropagation(); deleteAddress('${address.id}')" style="padding: 5px 10px; background: #ff4757; color: white; border: none; border-radius: 5px; font-size: 0.8rem; cursor: pointer;">åˆ é™¤</button>
                                </div>
                            </div>
                        `;
                    }).join('');
                }
            }

            // æ˜¾ç¤ºåœ°å€è¡¨å•
            function showAddressForm(addressId = null) {
                const form = document.getElementById('addressForm');
                const nameInput = document.getElementById('addressName');
                const phoneInput = document.getElementById('addressPhone');
                const detailInput = document.getElementById('addressDetail');
                const defaultCheckbox = document.getElementById('addressDefault');
                
                // æ¸…ç©ºè¡¨å•
                nameInput.value = '';
                phoneInput.value = '';
                detailInput.value = '';
                defaultCheckbox.checked = false;
                
                if (addressId) {
                    // ç¼–è¾‘æ¨¡å¼
                    editingAddressId = addressId;
                    const address = userAddresses.find(addr => addr.id === addressId);
                    if (address) {
                        nameInput.value = address.name;
                        phoneInput.value = address.phone;
                        detailInput.value = address.address;
                        defaultCheckbox.checked = address.is_default;
                    }
                } else {
                    // æ–°å¢æ¨¡å¼
                    editingAddressId = null;
                }
                
                form.style.display = 'block';
            }

            // éšè—åœ°å€è¡¨å•
            function hideAddressForm() {
                const form = document.getElementById('addressForm');
                form.style.display = 'none';
                editingAddressId = null;
            }

            // ä¿å­˜åœ°å€
            async function saveAddress() {
                const nameInput = document.getElementById('addressName');
                const phoneInput = document.getElementById('addressPhone');
                const detailInput = document.getElementById('addressDetail');
                const defaultCheckbox = document.getElementById('addressDefault');
                
                const name = nameInput.value.trim();
                const phone = phoneInput.value.trim();
                const address = detailInput.value.trim();
                const isDefault = defaultCheckbox.checked;
                
                if (!name || !phone || !address) {
                    showToast('è¯·å¡«å†™å®Œæ•´çš„åœ°å€ä¿¡æ¯', 'error');
                    return;
                }
                
                // éªŒè¯æ‰‹æœºå·æ ¼å¼
                const phoneRegex = /^1[3-9]\d{9}$/;
                if (!phoneRegex.test(phone)) {
                    showToast('è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ', 'error');
                    return;
                }
                
                try {
                    const requestData = {
                        user_id: currentUser.user_id,
                        name: name,
                        phone: phone,
                        address: address,
                        is_default: isDefault
                    };
                    
                    let url = `${API_BASE_URL.replace('/lottery', '/shop')}/address/`;
                    let method = 'POST';
                    
                    if (editingAddressId) {
                        // ç¼–è¾‘æ¨¡å¼
                        url = `${API_BASE_URL.replace('/lottery', '/shop')}/address/`;
                        method = 'PUT';
                        requestData.id = editingAddressId;
                    }
                    
                    const response = await fetch(url, {
                        method: method,
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(requestData)
                    });

                    const data = await response.json();
                    
                    if (response.ok) {
                        showToast(editingAddressId ? 'åœ°å€æ›´æ–°æˆåŠŸ' : 'åœ°å€æ·»åŠ æˆåŠŸ', 'success');
                        hideAddressForm();
                        // é‡æ–°åŠ è½½åœ°å€åˆ—è¡¨
                        await loadUserAddresses();
                    } else {
                        showToast(data.message || 'ä¿å­˜åœ°å€å¤±è´¥', 'error');
                    }
                } catch (error) {
                    console.error('ä¿å­˜åœ°å€APIé”™è¯¯:', error);
                    showToast('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
                }
            }

            // ç¼–è¾‘åœ°å€
            function editAddress(addressId) {
                showAddressForm(addressId);
            }

            // åˆ é™¤åœ°å€
            async function deleteAddress(addressId) {
                if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåœ°å€å—ï¼Ÿ')) {
                    return;
                }
                
                try {
                    const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/address/?id=${addressId}`, {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    const data = await response.json();
                    
                    if (response.ok) {
                        showToast('åœ°å€åˆ é™¤æˆåŠŸ', 'success');
                        // é‡æ–°åŠ è½½åœ°å€åˆ—è¡¨
                        await loadUserAddresses();
                    } else {
                        showToast(data.message || 'åˆ é™¤åœ°å€å¤±è´¥', 'error');
                    }
                } catch (error) {
                    console.error('åˆ é™¤åœ°å€APIé”™è¯¯:', error);
                    showToast('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•', 'error');
                }
            }

                         // å–æ¶ˆåœ°å€ç¼–è¾‘
             function cancelAddress() {
                 hideAddressForm();
             }

             // ç¡®è®¤å…‘æ¢ç›²ç›’
             async function confirmBlindBoxOrder() {
                 // æ£€æŸ¥æ˜¯å¦æœ‰åœ°å€
                 if (userAddresses.length === 0) {
                     showToast('è¯·å…ˆæ·»åŠ æ”¶è´§åœ°å€', 'error');
                     return;
                 }
                 
                 // æ£€æŸ¥æ˜¯å¦é€‰æ‹©äº†åœ°å€
                 const selectedAddress = getSelectedAddress();
                 if (!selectedAddress) {
                     showToast('è¯·é€‰æ‹©ä¸€ä¸ªæ”¶è´§åœ°å€', 'error');
                     return;
                 }
                 
                 try {
                     // å…³é—­å¼¹çª—
                     closeAddressModal();
                     
                     // æ‰§è¡Œå…‘æ¢é€»è¾‘
                     await createBlindBoxOrder();
                 } catch (error) {
                     console.error('ç¡®è®¤è®¢å•å¤±è´¥:', error);
                 }
             }

             // åŠ è½½ç”¨æˆ·ç›²ç›’è®¢å•
             async function loadUserOrders() {
                 if (!currentUser || !currentUser.user_id) {
                     console.log('ç”¨æˆ·æœªéªŒè¯ï¼Œè·³è¿‡åŠ è½½è®¢å•');
                     return;
                 }

                 try {
                     console.log('æ­£åœ¨åŠ è½½ç”¨æˆ·ç›²ç›’è®¢å•...');
                     const response = await fetch(`${API_BASE_URL.replace('/lottery', '/shop')}/records/?user_id=${currentUser.user_id}`, {
                         method: 'GET',
                         headers: {
                             'Content-Type': 'application/json',
                         }
                     });

                     const data = await response.json();
                     
                     if (response.ok && data.code === 200) {
                         // è¿‡æ»¤å‡ºç›²ç›’è®¢å•
                         const blindBoxOrders = data.data.records.filter(order => order.item_name && order.item_name.includes('ç›²ç›’'));
                         renderOrders(blindBoxOrders);
                     } else {
                         console.error('åŠ è½½è®¢å•å¤±è´¥:', data);
                         showNoOrders();
                     }
                 } catch (error) {
                     console.error('åŠ è½½è®¢å•APIé”™è¯¯:', error);
                     showNoOrders();
                 }
             }

             // æ¸²æŸ“è®¢å•åˆ—è¡¨
             function renderOrders(orders) {
                 const container = document.getElementById('ordersContainer');
                 const loadingElement = document.getElementById('loadingOrders');
                 
                 // éšè—åŠ è½½çŠ¶æ€
                 if (loadingElement) {
                     loadingElement.style.display = 'none';
                 }

                 if (!orders || orders.length === 0) {
                     showNoOrders();
                     return;
                 }

                 const ordersHTML = orders.map(order => `
                     <div class="blind-box-order-item">
                         <div class="blind-box-order-header">
                             <div class="blind-box-order-info">
                                 <div class="blind-box-order-icon">
                                     <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">ğŸ“¦</div>
                                 </div>
                                 <div class="blind-box-order-details">
                                     <h4>${order.item_name} ${order.order_id}</h4>
                                     <div style="color: #ffd700; font-size: 0.9rem;">${order.exchange_time}</div>
                                 </div>
                             </div>
                             <div class="blind-box-order-status ${order.status}">${getStatusText(order.status)}</div>
                         </div>
                         <div class="blind-box-order-content">
                             <div class="blind-box-order-details-grid">
                                 
                                 <div class="detail-item">
                                     <strong>è”ç³»äººï¼š</strong>${order.contact_name}
                                 </div>
                                 <div class="detail-item">
                                     <strong>è”ç³»ç”µè¯ï¼š</strong>${order.contact_phone}
                                 </div>
                                 <div class="detail-item">
                                     <strong>æ”¶è´§åœ°å€ï¼š</strong>${order.contact_address}
                                 </div>
                             </div>
                         </div>
                     </div>
                 `).join('');

                 container.innerHTML = ordersHTML;
             }

             // æ˜¾ç¤ºæ— è®¢å•çŠ¶æ€
             function showNoOrders() {
                 const container = document.getElementById('ordersContainer');
                 const loadingElement = document.getElementById('loadingOrders');
                 
                 if (loadingElement) {
                     loadingElement.style.display = 'none';
                 }

                 container.innerHTML = `
                     <div class="no-orders">
                         <div class="no-orders-icon">ğŸ“¦</div>
                         <div>æš‚æ— ç›²ç›’è®¢å•</div>
                         <div style="font-size: 0.9rem; margin-top: 10px; color: #999;">å…‘æ¢ç›²ç›’åè®¢å•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                     </div>
                 `;
             }

             // è·å–è®¢å•çŠ¶æ€æ–‡æœ¬
             function getStatusText(status) {
                 const statusMap = {
                     'pending': 'å¾…å‘è´§',
                     'shipped': 'å·²å‘è´§',
                     'delivered': 'å·²é€è¾¾'
                 };
                 return statusMap[status] || status;
             }

                        // ç›²ç›’å•†å“æ•°æ®
           const blindBoxProducts = [
               {
                   id: 1,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/04157b5c-c1f8-4b2a-8d7c-b644fdf509eb/1.jpg',
                   description: 'ç¥ç§˜ç›²ç›’\nå†…å«æƒŠå–œå¥½ç¤¼'
               },
               {
                   id: 2,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/d81dce78-e636-4ada-a6df-d758bae1aa30/2.jpg',
                   description: 'æ¸¸æˆå‘¨è¾¹\nç²¾ç¾æ‰‹åŠæ¨¡å‹'
               },
               {
                   id: 3,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/1b95d0e8-1b95-4732-8ed1-355c7ba04590/3.jpg',
                   description: 'ã€é‡‘è‰²ä¼ è¯´ã€‘\næ–°æ¬¾é“é“åŸç¥æ–—ç ´'
               },
               {
                   id: 4,
                   image: 'https://cdnwukong.com/5432f62d-b3f0-4e02-8bf9-efd70b29e730/cfe1ee97-6b9c-4abb-bb42-adbeaca27f3f/gzh.png',
                   description: 'å…¬ä¼—å·\nå›å¤è®¢å•å·è·å–ç‰©æµä¿¡æ¯'
               }
           ];

             // æ¸²æŸ“ç›²ç›’å•†å“
             function renderBlindBoxProducts() {
                 const container = document.getElementById('blindBoxProductsGrid');
                 
                 if (!container) {
                     console.log('ç›²ç›’å•†å“å®¹å™¨æœªæ‰¾åˆ°');
                     return;
                 }

                                const productsHTML = blindBoxProducts.map(product => `
                   <div class="blind-box-product-item" onclick="handleBlindBoxProductClick(${product.id})">
                       <div class="blind-box-product-image">
                           <img src="${product.image}" alt="ç›²ç›’å•†å“" onerror="this.style.display='none'">
                       </div>
                       <div class="blind-box-product-description">${product.description}</div>
                   </div>
               `).join('');

                 container.innerHTML = productsHTML;
             }

             // å¤„ç†ç›²ç›’å•†å“ç‚¹å‡»
             function handleBlindBoxProductClick(productId) {
                 console.log('ç‚¹å‡»äº†ç›²ç›’å•†å“:', productId);
                 showToast('ç›²ç›’å•†å“æš‚ä¸æ”¯æŒè‡ªé€‰...', 'info');
             }

             // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–ç›²ç›’å•†å“
             window.addEventListener('load', function() {
                 // æ£€æµ‹è®¾å¤‡ç±»å‹
                 checkDeviceType();
                 
                 // åˆå§‹åŒ–éŸ³æ•ˆ
                 initSounds();
                 
                 // æ¢å¤éŸ³æ•ˆè®¾ç½®
                 const savedSoundEnabled = localStorage.getItem('soundEnabled');
                 if (savedSoundEnabled !== null) {
                     soundEnabled = savedSoundEnabled === 'true';
                     const soundControl = document.getElementById('soundControl');
                     if (soundControl) {
                         if (soundEnabled) {
                             soundControl.textContent = 'ğŸ”Š';
                             soundControl.classList.remove('muted');
                         } else {
                             soundControl.textContent = 'ğŸ”‡';
                             soundControl.classList.add('muted');
                         }
                     }
                 }
                 
                 renderBlindBoxProducts();
             });
             
             // æ£€æµ‹è®¾å¤‡ç±»å‹å¹¶æ˜¾ç¤ºç›¸åº”å†…å®¹
             function checkDeviceType() {
                 const isMobile = window.innerWidth < 768;
                 const pcTip = document.getElementById('pcTip');
                 const mobileContainer = document.getElementById('mobileContainer');
                 
                 if (!isMobile) {
                     // PCç«¯æ˜¾ç¤ºæç¤ºé¡µé¢
                     pcTip.style.display = 'flex';
                     mobileContainer.style.display = 'none';
                 } else {
                     // ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸å†…å®¹
                     pcTip.style.display = 'none';
                     mobileContainer.style.display = 'block';
                 }
             }
             
             // å¤„ç†é”®ç›˜è°ƒèµ·æ—¶çš„è§†å£è°ƒæ•´
             function handleKeyboardAdjustment() {
                 const isKeyboardOpen = window.innerHeight < window.outerHeight * 0.7;
                 const body = document.body;
                 const gameMachine = document.querySelector('.game-machine');
                 
                 if (isKeyboardOpen) {
                     // é”®ç›˜è°ƒèµ·æ—¶ï¼Œä¿æŒåŸå§‹è§†å£è®¾ç½®ï¼Œåªæ·»åŠ æ ·å¼ç±»
                     body.classList.add('keyboard-open');
                     
                     // ç¡®ä¿æ¸¸æˆæœºèƒŒæ™¯å›¾ç‰‡ä¿æŒæ¯”ä¾‹
                     if (gameMachine) {
                         gameMachine.style.minHeight = '350px';
                     }
                     
                     // æ»šåŠ¨åˆ°è¾“å…¥æ¡†ä½ç½®
                     const activeInput = document.querySelector('input:focus, textarea:focus');
                     if (activeInput) {
                         setTimeout(() => {
                             activeInput.scrollIntoView({ 
                                 behavior: 'smooth', 
                                 block: 'center' 
                             });
                         }, 100);
                     }
                 } else {
                     // é”®ç›˜æ”¶èµ·æ—¶ï¼Œç§»é™¤æ ·å¼ç±»
                     body.classList.remove('keyboard-open');
                     
                     // æ¢å¤æ¸¸æˆæœºèƒŒæ™¯å›¾ç‰‡è®¾ç½®
                     if (gameMachine) {
                         gameMachine.style.minHeight = '600px';
                     }
                 }
             }
             
             // ç›‘å¬çª—å£å¤§å°å˜åŒ–
             window.addEventListener('resize', handleKeyboardAdjustment);
             
             // ç›‘å¬è¾“å…¥æ¡†ç„¦ç‚¹äº‹ä»¶
             document.addEventListener('focusin', function(e) {
                 if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                     // è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œå»¶è¿Ÿå¤„ç†é”®ç›˜è°ƒèµ·
                     setTimeout(handleKeyboardAdjustment, 300);
                 }
             });
             
             document.addEventListener('focusout', function(e) {
                 if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                     // è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œå»¶è¿Ÿå¤„ç†é”®ç›˜æ”¶èµ·
                     setTimeout(handleKeyboardAdjustment, 300);
                 }
             });
             
             // æ˜¾ç¤ºç§»åŠ¨ç«¯å†…å®¹ï¼ˆç”¨æˆ·ç‚¹å‡»"æˆ‘çŸ¥é“äº†"åï¼‰
             function showMobileContent() {
                 const pcTip = document.getElementById('pcTip');
                 const mobileContainer = document.getElementById('mobileContainer');
                 
                 pcTip.style.display = 'none';
                 mobileContainer.style.display = 'block';
             }

    </script>
    </div><!-- ç§»åŠ¨ç«¯å®¹å™¨ç»“æŸ -->
</body>
</html> 
